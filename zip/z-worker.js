!function t(e){"use strict";function r(t){t.scripts&&t.scripts.length>0&&importScripts.apply(void 0,t.scripts),postMessage({type:"importScripts"})}function c(t){var r=e[t.codecClass],c=t.sn;if(u[c])throw Error("duplicated sn");u[c]={codec:new r(t.options),crcInput:"input"===t.crcType,crcOutput:"output"===t.crcType,crc:new p},postMessage({type:"newTask",sn:c})}function n(t){var e=t.sn,r=t.type,n=t.data,s=u[e];!s&&t.codecClass&&(c(t),s=u[e]);var o="append"===r,p=f(),a;if(o)try{a=s.codec.append(n,function t(r){postMessage({type:"progress",sn:e,loaded:r})})}catch(t){throw delete u[e],t}else delete u[e],a=s.codec.flush();var i=f()-p;p=f(),n&&s.crcInput&&s.crc.append(n),a&&s.crcOutput&&s.crc.append(a);var d=f()-p,h={type:r,sn:e,codecTime:i,crcTime:d},l=[];a&&(h.data=a,l.push(a.buffer)),o||!s.crcInput&&!s.crcOutput||(h.crc=s.crc.get());try{postMessage(h,l)}catch(t){postMessage(h)}}function s(t,e,r){var c={type:t,sn:e,error:o(r)};postMessage(c)}function o(t){return{message:t.message,stack:t.stack}}function p(){this.crc=-1}function a(){}if(e.zWorkerInitialized)throw new Error("z-worker.js should be run only once");e.zWorkerInitialized=!0,addEventListener("message",function(t){var e=t.data,r=e.type,c=e.sn,n=i[r];if(n)try{n(e)}catch(t){s(r,c,t)}});var i={importScripts:r,newTask:c,append:n,flush:n},u={},f=e.performance?e.performance.now.bind(e.performance):Date.now;p.prototype.append=function t(e){for(var r=0|this.crc,c=this.table,n=0,s=0|e.length;n<s;n++)r=r>>>8^c[255&(r^e[n])];this.crc=r},p.prototype.get=function t(){return~this.crc},p.prototype.table=function(){var t,e,r,c=[];for(t=0;t<256;t++){for(r=t,e=0;e<8;e++)1&r?r=r>>>1^3988292384:r>>>=1;c[t]=r}return c}(),e.NOOP=a,a.prototype.append=function t(e,r){return e},a.prototype.flush=function t(){}}(this);