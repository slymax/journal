!function(e){"use strict";function t(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),s=new d(i||[]);return a._invoke=c(e,n,s),a}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(r,i,o,a){var s=n(e[r],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&v.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(u).then(function(e){c.value=e,o(c)},a)}a(s.arg)}function r(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=r}function c(e,t,r){var i=S;return function o(a,s){if(i===M)throw new Error("Generator is already running");if(i===E){if("throw"===a)throw s;return p()}for(r.method=a,r.arg=s;;){var c=r.delegate;if(c){var l=u(c,r);if(l){if(l===A)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=M;var f=n(e,t,r);if("normal"===f.type){if(i=r.done?E:C,f.arg===A)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(i=E,r.method="throw",r.arg=f.arg)}}}function u(e,t){var r=e.iterator[t.method];if(r===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,u(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,A;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(v.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:p}}function p(){return{value:g,done:!0}}var m=Object.prototype,v=m.hasOwnProperty,g,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",w=y.asyncIterator||"@@asyncIterator",_=y.toStringTag||"@@toStringTag",k="object"==typeof module,x=e.regeneratorRuntime;if(x)return void(k&&(module.exports=x));x=e.regeneratorRuntime=k?module.exports:{},x.wrap=t;var S="suspendedStart",C="suspendedYield",M="executing",E="completed",A={},I={};I[b]=function(){return this};var O=Object.getPrototypeOf,D=O&&O(O(h([])));D&&D!==m&&v.call(D,b)&&(I=D);var P=o.prototype=r.prototype=Object.create(I);i.prototype=P.constructor=o,o.constructor=i,o[_]=i.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,_ in e||(e[_]="GeneratorFunction")),e.prototype=Object.create(P),e},x.awrap=function(e){return{__await:e}},a(s.prototype),s.prototype[w]=function(){return this},x.AsyncIterator=s,x.async=function(e,n,r,i){var o=new s(t(e,n,r,i));return x.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(P),P[_]="Generator",P[b]=function(){return this},P.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},x.values=h,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),s=v.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&v.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),A}}}(function(){return this}()||Function("return this")()),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SF=e()}}(function(){var e,t,n;return function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=s||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=s,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<n;a++)e.push(r.charAt(o>>>6*(3-a)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r.indexOf(e.charAt(a-1))<<a%4*2,c=r.indexOf(e.charAt(a))>>>6-a%4*2;i[o>>>2]|=(s|c)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,o,a){return((e=e+(t&n|~t&r)+i+a)<<o|e>>>32-o)+t}function n(e,t,n,r,i,o,a){return((e=e+(t&r|n&~r)+i+a)<<o|e>>>32-o)+t}function r(e,t,n,r,i,o,a){return((e=e+(t^n^r)+i+a)<<o|e>>>32-o)+t}function i(e,t,n,r,i,o,a){return((e=e+(n^(t|~r))+i+a)<<o|e>>>32-o)+t}for(var o=s,a=o.lib,c=a.WordArray,u=a.Hasher,a=o.algo,l=[],f=0;64>f;f++)l[f]=4294967296*e.abs(e.sin(f+1))|0;a=a.MD5=u.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,o){for(var a=0;16>a;a++){var s=o+a,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var a=this._hash.words,s=e[o+0],c=e[o+1],u=e[o+2],f=e[o+3],d=e[o+4],h=e[o+5],p=e[o+6],m=e[o+7],v=e[o+8],g=e[o+9],y=e[o+10],b=e[o+11],w=e[o+12],_=e[o+13],k=e[o+14],x=e[o+15],S=a[0],C=a[1],M=a[2],E=a[3],S=t(S,C,M,E,s,7,l[0]),E=t(E,S,C,M,c,12,l[1]),M=t(M,E,S,C,u,17,l[2]),C=t(C,M,E,S,f,22,l[3]),S=t(S,C,M,E,d,7,l[4]),E=t(E,S,C,M,h,12,l[5]),M=t(M,E,S,C,p,17,l[6]),C=t(C,M,E,S,m,22,l[7]),S=t(S,C,M,E,v,7,l[8]),E=t(E,S,C,M,g,12,l[9]),M=t(M,E,S,C,y,17,l[10]),C=t(C,M,E,S,b,22,l[11]),S=t(S,C,M,E,w,7,l[12]),E=t(E,S,C,M,_,12,l[13]),M=t(M,E,S,C,k,17,l[14]),C=t(C,M,E,S,x,22,l[15]),S=n(S,C,M,E,c,5,l[16]),E=n(E,S,C,M,p,9,l[17]),M=n(M,E,S,C,b,14,l[18]),C=n(C,M,E,S,s,20,l[19]),S=n(S,C,M,E,h,5,l[20]),E=n(E,S,C,M,y,9,l[21]),M=n(M,E,S,C,x,14,l[22]),C=n(C,M,E,S,d,20,l[23]),S=n(S,C,M,E,g,5,l[24]),E=n(E,S,C,M,k,9,l[25]),M=n(M,E,S,C,f,14,l[26]),C=n(C,M,E,S,v,20,l[27]),S=n(S,C,M,E,_,5,l[28]),E=n(E,S,C,M,u,9,l[29]),M=n(M,E,S,C,m,14,l[30]),C=n(C,M,E,S,w,20,l[31]),S=r(S,C,M,E,h,4,l[32]),E=r(E,S,C,M,v,11,l[33]),M=r(M,E,S,C,b,16,l[34]),C=r(C,M,E,S,k,23,l[35]),S=r(S,C,M,E,c,4,l[36]),E=r(E,S,C,M,d,11,l[37]),M=r(M,E,S,C,m,16,l[38]),C=r(C,M,E,S,y,23,l[39]),S=r(S,C,M,E,_,4,l[40]),E=r(E,S,C,M,s,11,l[41]),M=r(M,E,S,C,f,16,l[42]),C=r(C,M,E,S,p,23,l[43]),S=r(S,C,M,E,g,4,l[44]),E=r(E,S,C,M,w,11,l[45]),M=r(M,E,S,C,x,16,l[46]),C=r(C,M,E,S,u,23,l[47]),S=i(S,C,M,E,s,6,l[48]),E=i(E,S,C,M,m,10,l[49]),M=i(M,E,S,C,k,15,l[50]),C=i(C,M,E,S,h,21,l[51]),S=i(S,C,M,E,w,6,l[52]),E=i(E,S,C,M,f,10,l[53]),M=i(M,E,S,C,y,15,l[54]),C=i(C,M,E,S,c,21,l[55]),S=i(S,C,M,E,v,6,l[56]),E=i(E,S,C,M,x,10,l[57]),M=i(M,E,S,C,p,15,l[58]),C=i(C,M,E,S,_,21,l[59]),S=i(S,C,M,E,d,6,l[60]),E=i(E,S,C,M,b,10,l[61]),M=i(M,E,S,C,u,15,l[62]),C=i(C,M,E,S,g,21,l[63]);a[0]=a[0]+S|0,a[1]=a[1]+C|0,a[2]=a[2]+M|0,a[3]=a[3]+E|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=u._createHelper(a),o.HmacMD5=u._createHmacHelper(a)}(Math),function(){var e=s,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),o=r.create(),a=o.words,s=n.keySize,n=n.iterations;a.length<s;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var u=1;u<n;u++)c=i.finalize(c),i.reset();o.concat(c)}return o.sigBytes=4*s,o}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),s.lib.Cipher||function(e){var t=s,n=t.lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,a=t.enc.Base64,c=t.algo.EvpKDF,u=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?m:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?m:p).decrypt(e,t,n,r)}}}});n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=t.mode={},f=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;o<r;o++)t[n+o]^=i[o]},d=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;f.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),f.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=d,d=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],a=0;a<n;a+=4)o.push(r);n=i.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:l,padding:d}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),l=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},p=n.SerializableCipher=r.extend({cfg:r.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=c.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},m=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=s,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],o=[],a=[],c=[],u=[],l=[],f=[],d=[],h=[],p=[],m=0;256>m;m++)p[m]=128>m?m<<1:m<<1^283;for(var v=0,g=0,m=0;256>m;m++){var y=g^g<<1^g<<2^g<<3^g<<4,y=y>>>8^255&y^99;r[v]=y,i[y]=v;var b=p[v],w=p[b],_=p[w],k=257*p[y]^16843008*y;o[v]=k<<24|k>>>8,a[v]=k<<16|k>>>16,c[v]=k<<8|k>>>24,u[v]=k,k=16843009*_^65537*w^257*b^16843008*v,l[y]=k<<24|k>>>8,f[y]=k<<16|k>>>16,d[y]=k<<8|k>>>24,h[y]=k,v?(v=b^p[p[p[_^b]]],g^=p[p[g]]):v=g=1}var x=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;o<e;o++)if(o<n)i[o]=t[o];else{var a=i[o-1];o%n?6<n&&4==o%n&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=a<<8|a>>>24,a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=x[o/n|0]<<24),i[o]=i[o-n]^a}for(t=this._invKeySchedule=[],n=0;n<e;n++)o=e-n,a=n%4?i[o]:i[o-4],t[n]=4>n||4>=o?a:l[r[a>>>24]]^f[r[a>>>16&255]]^d[r[a>>>8&255]]^h[r[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,c,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,f,d,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,a,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],h=4,p=1;p<c;p++)var m=r[u>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&d]^n[h++],v=r[l>>>24]^i[f>>>16&255]^o[d>>>8&255]^a[255&u]^n[h++],g=r[f>>>24]^i[d>>>16&255]^o[u>>>8&255]^a[255&l]^n[h++],d=r[d>>>24]^i[u>>>16&255]^o[l>>>8&255]^a[255&f]^n[h++],u=m,l=v,f=g;m=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[h++],v=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],g=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[h++],d=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[h++],e[t]=m,e[t+1]=v,e[t+2]=g,e[t+3]=d},keySize:8});e.AES=t._createHelper(n)}();var s=s||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(e){for(var t=s,n=t.lib,r=n.WordArray,i=n.Hasher,n=t.algo,o=[],a=[],c=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var f;e:{f=u;for(var d=e.sqrt(f),h=2;h<=d;h++)if(!(f%h)){f=!1;break e}f=!0}f&&(8>l&&(o[l]=c(e.pow(u,.5))),a[l]=c(e.pow(u,1/3)),l++),u++}var p=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],c=n[4],u=n[5],l=n[6],f=n[7],d=0;64>d;d++){if(16>d)p[d]=0|e[t+d];else{var h=p[d-15],m=p[d-2];p[d]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+p[d-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[d-16]}h=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+a[d]+p[d],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),f=l,l=u,u=c,c=s+h|0,s=o,o=i,i=r,r=h+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(n),t.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var e=s,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();var s=s||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(e){var t=s,n=t.lib,r=n.Base,i=n.WordArray,t=t.x64={};t.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}})}(),function(){function e(){return i.create.apply(i,arguments)}for(var t=s,n=t.lib.Hasher,r=t.x64,i=r.Word,o=r.WordArray,r=t.algo,a=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],c=[],u=0;80>u;u++)c[u]=e();r=r.SHA512=n.extend({_doReset:function(){
this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],l=n[5],f=n[6],n=n[7],d=r.high,h=r.low,p=i.high,m=i.low,v=o.high,g=o.low,y=s.high,b=s.low,w=u.high,_=u.low,k=l.high,x=l.low,S=f.high,C=f.low,M=n.high,E=n.low,A=d,I=h,O=p,D=m,P=v,T=g,j=y,R=b,F=w,N=_,L=k,B=x,U=S,V=C,H=M,z=E,q=0;80>q;q++){var W=c[q];if(16>q)var J=W.high=0|e[t+2*q],K=W.low=0|e[t+2*q+1];else{var J=c[q-15],K=J.high,G=J.low,J=(K>>>1|G<<31)^(K>>>8|G<<24)^K>>>7,G=(G>>>1|K<<31)^(G>>>8|K<<24)^(G>>>7|K<<25),Y=c[q-2],K=Y.high,Z=Y.low,Y=(K>>>19|Z<<13)^(K<<3|Z>>>29)^K>>>6,Z=(Z>>>19|K<<13)^(Z<<3|K>>>29)^(Z>>>6|K<<26),K=c[q-7],$=K.high,X=c[q-16],Q=X.high,X=X.low,K=G+K.low,J=J+$+(K>>>0<G>>>0?1:0),K=K+Z,J=J+Y+(K>>>0<Z>>>0?1:0),K=K+X,J=J+Q+(K>>>0<X>>>0?1:0);W.high=J,W.low=K}var $=F&L^~F&U,X=N&B^~N&V,W=A&O^A&P^O&P,ee=I&D^I&T^D&T,G=(A>>>28|I<<4)^(A<<30|I>>>2)^(A<<25|I>>>7),Y=(I>>>28|A<<4)^(I<<30|A>>>2)^(I<<25|A>>>7),Z=a[q],te=Z.high,ne=Z.low,Z=z+((N>>>14|F<<18)^(N>>>18|F<<14)^(N<<23|F>>>9)),Q=H+((F>>>14|N<<18)^(F>>>18|N<<14)^(F<<23|N>>>9))+(Z>>>0<z>>>0?1:0),Z=Z+X,Q=Q+$+(Z>>>0<X>>>0?1:0),Z=Z+ne,Q=Q+te+(Z>>>0<ne>>>0?1:0),Z=Z+K,Q=Q+J+(Z>>>0<K>>>0?1:0),K=Y+ee,W=G+W+(K>>>0<Y>>>0?1:0),H=U,z=V,U=L,V=B,L=F,B=N,N=R+Z|0,F=j+Q+(N>>>0<R>>>0?1:0)|0,j=P,R=T,P=O,T=D,O=A,D=I,I=Z+K|0,A=Q+W+(I>>>0<Z>>>0?1:0)|0}h=r.low=h+I,r.high=d+A+(h>>>0<I>>>0?1:0),m=i.low=m+D,i.high=p+O+(m>>>0<D>>>0?1:0),g=o.low=g+T,o.high=v+P+(g>>>0<T>>>0?1:0),b=s.low=b+R,s.high=y+j+(b>>>0<R>>>0?1:0),_=u.low=_+N,u.high=w+F+(_>>>0<N>>>0?1:0),x=l.low=x+B,l.high=k+L+(x>>>0<B>>>0?1:0),C=f.low=C+V,f.high=S+U+(C>>>0<V>>>0?1:0),E=n.low=E+z,n.high=M+H+(E>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(r),t.HmacSHA512=n._createHmacHelper(r)}(),function(){var e=s,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}();var s=s||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=s,t=e.lib,n=t.WordArray,r=t.Hasher,i=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+i[u],l=20>u?l+(1518500249+(o&a|~o&s)):40>u?l+(1859775393+(o^a^s)):60>u?l+((o&a|o&s|a&s)-1894007588):l+((o^a^s)-899497514),c=s,s=a,a=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(t),e.HmacSHA1=r._createHmacHelper(t)}(),function(){var e=s,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),a=this._iKey=n.clone(),s=o.words,c=a.words,u=0;u<r;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=s,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.HMAC,o=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=i.create(n.hasher,e),a=r.create(),s=r.create([1]),c=a.words,u=s.words,l=n.keySize,n=n.iterations;c.length<l;){var f=o.update(t).finalize(s);o.reset();for(var d=f.words,h=d.length,p=f,m=1;m<n;m++){p=o.finalize(p),o.reset();for(var v=p.words,g=0;g<h;g++)d[g]^=v[g]}a.concat(f),u[0]++}return a.sigBytes=4*l,a}});e.PBKDF2=function(e,t,n){return o.create(n).compute(e,t)}}();var s=s||function(e,t){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*o,i=e.min(4*t,i),t){for(var c=0;c<t;c+=o)this._doProcessBlock(r,c);c=r.splice(0,t),n.sigBytes-=i}return new a.init(c,i)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=s,t=e.lib,n=t.WordArray,r=t.Hasher,i=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|e[t+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+i[u],l=20>u?l+(1518500249+(o&a|~o&s)):40>u?l+(1859775393+(o^a^s)):60>u?l+((o&a|o&s|a&s)-1894007588):l+((o^a^s)-899497514),c=s,s=a,a=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(t),e.HmacSHA1=r._createHmacHelper(t)}(),Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n.SFAbstractCrypto=function(){function e(){a(this,e),this.DefaultPBKDF2Length=768}return c(e,[{key:"generateUUIDSync",value:function e(){var t=window.crypto||window.msCrypto;if(t){var n=new Uint32Array(4);t.getRandomValues(n);var r=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){r++;var t=n[r>>3]>>r%8*4&15;return("x"==e?t:3&t|8).toString(16)})}var i=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"==e?t:3&t|8).toString(16)})}},{key:"decryptText",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ciphertextToAuth,r=t.contentCiphertext,i=t.encryptionKey,o=t.iv,a=t.authHash,c=t.authKey,u=arguments[1],l,f,d,h;return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:if(!u||a){t.next=3;break}return console.error("Auth hash is required."),t.abrupt("return");case 3:if(!a){t.next=10;break}return t.next=6,this.hmac256(n,c);case 6:if(l=t.sent,a===l){t.next=10;break}return console.error("Auth hash does not match, returning null."),t.abrupt("return",null);case 10:return f=s.enc.Hex.parse(i),d=s.enc.Hex.parse(o||""),h=s.AES.decrypt(r,f,{iv:d,mode:s.mode.CBC,padding:s.pad.Pkcs7}),t.abrupt("return",h.toString(s.enc.Utf8));case 14:case"end":return t.stop()}},e,this)}));return e}()},{key:"encryptText",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:return i=s.enc.Hex.parse(n),o=s.enc.Hex.parse(r||""),a=s.AES.encrypt(t,i,{iv:o,mode:s.mode.CBC,padding:s.pad.Pkcs7}),c.abrupt("return",a.toString());case 4:case"end":return c.stop()}},e,this)}));return e}()},{key:"generateRandomKey",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.lib.WordArray.random(t/8).toString());case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"generateRandomEncryptionKey",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:return t=512,n=1,o.next=4,this.generateRandomKey(t);case 4:return r=o.sent,o.next=7,this.generateRandomKey(t);case 7:return i=o.sent,o.abrupt("return",this.pbkdf2(i,r,n,t));case 9:case"end":return o.stop()}},e,this)}));return e}()},{key:"firstHalfOfKey",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.substring(0,t.length/2));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"secondHalfOfKey",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.substring(t.length/2,t.length));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"base64",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",window.btoa(t));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"base64Decode",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",window.atob(t));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"sha256",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.SHA256(t).toString());case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"hmac256",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:return r=s.enc.Hex.parse(n),i=s.enc.Utf8.parse(t),o=s.HmacSHA256(i,r).toString(),a.abrupt("return",o);case 4:case"end":return a.stop()}},e,this)}));return e}()},{key:"generateSalt",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r,i){var o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.sha256([t,"SF",n,r,i].join(":"));case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}},e,this)}));return e}()},{key:"generateSymmetricKeyPair",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.password,r=t.pw_salt,i=t.pw_cost,o,a,s,c,u,l;return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pbkdf2(n,r,i,this.DefaultPBKDF2Length);case 2:return o=t.sent,a=o.length,s=a/3,c=o.slice(0,s),u=o.slice(s,2*s),l=o.slice(2*s,3*s),t.abrupt("return",[c,u,l]);case 9:case"end":return t.stop()}},e,this)}));return e}()},{key:"computeEncryptionKeysForUser",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:if("003"!=n.version){i.next=9;break}if(n.identifier){i.next=4;break}return console.error("authParams is missing identifier."),i.abrupt("return");case 4:return i.next=6,this.generateSalt(n.identifier,n.version,n.pw_cost,n.pw_nonce);case 6:r=i.sent,i.next=10;break;case 9:r=n.pw_salt;case 10:return i.abrupt("return",this.generateSymmetricKeyPair({password:t,pw_salt:r,pw_cost:n.pw_cost}).then(function(e){return{pw:e[0],mk:e[1],ak:e[2]}}));case 11:case"end":return i.stop()}},e,this)}));return e}()},{key:"generateInitialKeysAndAuthParamsForUser",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return r=this.SFJS.version,i=this.SFJS.defaultPasswordGenerationCost,s.next=4,this.generateRandomKey(256);case 4:return o=s.sent,s.next=7,this.generateSalt(t,r,i,o);case 7:return a=s.sent,s.abrupt("return",this.generateSymmetricKeyPair({password:n,pw_salt:a,pw_cost:i}).then(function(e){var n={pw_nonce:o,pw_cost:i,identifier:t,version:r};return{keys:{pw:e[0],mk:e[1],ak:e[2]},authParams:n}}));case 9:case"end":return s.stop()}},e,this)}));return e}()}]),e}(),l=n.SFCryptoJS=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"pbkdf2",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r,i){var o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:return o={keySize:i/32,hasher:s.algo.SHA512,iterations:r},a.abrupt("return",s.PBKDF2(t,n,o).toString());case 2:case"end":return a.stop()}},e,this)}));return e}()}]),t}(u),f=window.crypto?window.crypto.subtle:null,d=n.SFCryptoWeb=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"pbkdf2",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r,i){var o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.webCryptoImportKey(t);case 2:if(o=a.sent){a.next=6;break}return console.log("Key is null, unable to continue"),a.abrupt("return",null);case 6:return a.abrupt("return",this.webCryptoDeriveBits(o,n,r,i));case 7:case"end":return a.stop()}},e,this)}));return e}()},{key:"webCryptoImportKey",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",f.importKey("raw",this.stringToArrayBuffer(t),{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return e}).catch(function(e){return console.error(e),null}));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"webCryptoDeriveBits",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r,i){var o=this,a;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return a={name:"PBKDF2",salt:this.stringToArrayBuffer(n),iterations:r,hash:{name:"SHA-512"}},s.abrupt("return",f.deriveBits(a,t,i).then(function(e){return o.arrayBufferToHexString(new Uint8Array(e))}).catch(function(e){return console.error(e),null}));case 2:case"end":return s.stop()}},e,this)}));return e}()},{key:"stringToArrayBuffer",value:function e(t){if(window.TextEncoder){return new TextEncoder("utf-8").encode(t)}t=unescape(encodeURIComponent(t));for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,o=t.length;i<o;i++)r[i]=t.charCodeAt(i);return n}},{key:"arrayBufferToHexString",value:function e(t){for(var n=new Uint8Array(t),r="",i,o=0;o<n.byteLength;o++)i=n[o].toString(16),i.length<2&&(i="0"+i),r+=i;return r}}]),t}(u),h=n.SFItemTransformer=function(){function e(t){a(this,e),this.crypto=t}return c(e,[{key:"_private_encryptString",value:function(){function e(e,n,r,i,o){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r,i,o){var a,s,c,u,l;return regeneratorRuntime.wrap(function e(f){for(;;)switch(f.prev=f.next){case 0:if("001"!==o){f.next=7;break}return f.next=3,this.crypto.encryptText(t,n,null);case 3:s=f.sent,a=o+s,f.next=18;break;case 7:return f.next=9,this.crypto.generateRandomKey(128);case 9:return c=f.sent,f.next=12,this.crypto.encryptText(t,n,c);case 12:return s=f.sent,u=[o,i,c,s].join(":"),f.next=16,this.crypto.hmac256(u,r);case 16:l=f.sent,a=[o,l,i,c,s].join(":");case 18:return f.abrupt("return",a);case 19:case"end":return f.stop()}},e,this)}));return e}()},{key:"encryptItem",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"003",i,o,a,s,c,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return i={},l.next=3,this.crypto.generateRandomEncryptionKey();case 3:if(o=l.sent,"001"!==r){l.next=10;break}return l.next=7,this.crypto.encryptText(o,n.mk,null);case 7:i.enc_item_key=l.sent,l.next=13;break;case 10:return l.next=12,this._private_encryptString(o,n.mk,n.ak,t.uuid,r);case 12:i.enc_item_key=l.sent;case 13:return l.next=15,this.crypto.firstHalfOfKey(o);case 15:return a=l.sent,l.next=18,this.crypto.secondHalfOfKey(o);case 18:return s=l.sent,l.next=21,this._private_encryptString(JSON.stringify(t.createContentJSONFromProperties()),a,s,t.uuid,r);case 21:if(c=l.sent,"001"!==r){l.next=27;break}return l.next=25,this.crypto.hmac256(c,s);case 25:u=l.sent,i.auth_hash=u;case 27:return i.content=c,l.abrupt("return",i);case 29:case"end":return l.stop()}},e,this)}));return e}()},{key:"encryptionComponentsFromString",value:function e(t,n,r){var i=t.substring(0,3);if("001"===i)return{contentCiphertext:t.substring(3,t.length),encryptionVersion:i,ciphertextToAuth:t,iv:null,authHash:null,encryptionKey:n,authKey:r};var o=t.split(":");return{encryptionVersion:o[0],authHash:o[1],uuid:o[2],iv:o[3],contentCiphertext:o[4],ciphertextToAuth:[o[0],o[2],o[3],o[4]].join(":"),encryptionKey:n,authKey:r}}},{key:"decryptItem",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,c,u,l;return regeneratorRuntime.wrap(function e(f){for(;;)switch(f.prev=f.next){case 0:if("string"==typeof t.content){f.next=2;break}return f.abrupt("return");case 2:if(!t.content.startsWith("000")){f.next=14;break}return f.prev=3,f.t0=JSON,f.next=7,this.crypto.base64Decode(t.content.substring(3,t.content.length));case 7:f.t1=f.sent,t.content=f.t0.parse.call(f.t0,f.t1),f.next=13;break;case 11:f.prev=11,f.t2=f.catch(3);case 13:return f.abrupt("return");case 14:if(t.enc_item_key){f.next=17;break}return console.log("Missing item encryption key, skipping decryption."),f.abrupt("return");case 17:if(r=t.enc_item_key,i=!0,r.startsWith("002")||r.startsWith("003")||(r="001"+r,i=!1),o=this.encryptionComponentsFromString(r,n.mk,n.ak),!o.uuid||o.uuid===t.uuid){f.next=25;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,f.abrupt("return");case 25:return f.next=27,this.crypto.decryptText(o,i);case 27:if(a=f.sent){f.next=32;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,f.abrupt("return");case 32:return f.next=34,this.crypto.firstHalfOfKey(a);case 34:return s=f.sent,f.next=37,this.crypto.secondHalfOfKey(a);case 37:if(c=f.sent,u=this.encryptionComponentsFromString(t.content,s,c),!u.uuid||u.uuid===t.uuid){f.next=43;break}return t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,f.abrupt("return");case 43:return u.authHash||(u.authHash=t.auth_hash),f.next=46,this.crypto.decryptText(u,!0);case 46:l=f.sent,l?(1==t.errorDecrypting&&(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!1,t.content=l):(t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0);case 48:case"end":return f.stop()}},e,this,[[3,11]])}));return e}()},{key:"decryptMultipleItems",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,n,r){var i=this,a;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return a=function(){var e=o(regeneratorRuntime.mark(function e(t){var o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:if(1!=t.deleted||null!=t.content){a.next=2;break}return a.abrupt("return");case 2:if(!(o="string"==typeof t.content||t.content instanceof String)){a.next=17;break}return a.prev=4,a.next=7,i.decryptItem(t,n);case 7:a.next=17;break;case 9:if(a.prev=9,a.t0=a.catch(4),t.errorDecrypting||(t.errorDecryptingValueChanged=!0),t.errorDecrypting=!0,!r){a.next=15;break}throw a.t0;case 15:return console.error("Error decrypting item",t,a.t0),a.abrupt("return");case 17:case"end":return a.stop()}},e,i,[[4,9]])}));return function t(n){return e.apply(this,arguments)}}(),s.abrupt("return",Promise.all(t.map(function(e){return a(e)})));case 2:case"end":return s.stop()}},e,this)}));return e}()}]),e}(),p=n.StandardFile=function(){function e(t){if(a(this,e),"undefined"!=typeof window&&"undefined"!=typeof document){!(document.documentMode||/Edge/.test(navigator.userAgent))&&window.crypto&&window.crypto.subtle?this.crypto=new d:this.crypto=new l}t&&(this.crypto=t),this.itemTransformer=new h(this.crypto),this.crypto.SFJS={version:this.version(),defaultPasswordGenerationCost:this.defaultPasswordGenerationCost()}}return c(e,[{key:"version",value:function e(){return"003"}},{key:"supportsPasswordDerivationCost",value:function e(t){return!(t>5e3)||this.crypto instanceof d}},{key:"supportedVersions",value:function e(){return["001","002","003"]}},{key:"isVersionNewerThanLibraryVersion",value:function e(t){var n=this.version();return parseInt(t)>parseInt(n)}},{key:"isProtocolVersionOutdated",value:function e(t){var n={"001":Date.parse("2018-01-01"),"002":Date.parse("2020-01-01")},r=n[t];return!!r&&new Date>r}},{key:"costMinimumForVersion",value:function e(t){return{"001":3e3,"002":3e3,"003":11e4}[t]}},{key:"defaultPasswordGenerationCost",value:function e(){return this.costMinimumForVersion(this.version())}}]),e}();if("undefined"!=typeof window&&null!==window)try{window.StandardFile=p,window.SFJS=new p}catch(e){}},{}]},{},[1])(1)}),/**
 * @license AngularJS v1.6.1
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e){"use strict";function t(e,t){return t=t||Error,function(){var n=2,r=arguments,i=r[0],o="["+(e?e+":":"")+i+"] ",a=r[1],s,c;for(o+=a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+2;return n<r.length?_e(r[n]):e}),o+="\nhttp://errors.angularjs.org/1.6.1/"+(e?e+"/":"")+i,c=2,s="?";c<r.length;c++,s="&")o+=s+"p"+(c-2)+"="+encodeURIComponent(_e(r[c]));return new t(o)}}function n(e){if(null==e||M(e))return!1;if(di(e)||_(e)||ei&&e instanceof ei)return!0;var t="length"in Object(e)&&e.length;return k(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,i){var o,a;if(e)if(S(e))for(o in e)"prototype"!==o&&"length"!==o&&"name"!==o&&e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else if(di(e)||n(e)){var s="object"!=typeof e;for(o=0,a=e.length;o<a;o++)(s||o in e)&&t.call(i,e[o],o,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,i,e);else if(w(e))for(o in e)t.call(i,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else for(o in e)Kr.call(e,o)&&t.call(i,e[o],o,e);return e}function i(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function o(e){return function(t,n){e(n,t)}}function a(){return++li}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(b(a)||S(a))for(var u=Object.keys(a),l=0,f=u.length;l<f;l++){var d=u[l],h=a[d];n&&b(h)?x(h)?e[d]=new Date(h.valueOf()):C(h)?e[d]=new RegExp(h):h.nodeName?e[d]=h.cloneNode(!0):R(h)?e[d]=h.clone():(b(e[d])||(e[d]=di(h)?[]:{}),c(e[d],[h],!0)):e[d]=h}}return s(e,r),e}function u(e){return c(e,ni.call(arguments,1),!1)}function l(e){return c(e,ni.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function d(e,t){return u(Object.create(e),t)}function h(){}function p($){return $}function m(e){return function t(){return e}}function v(e){return S(e.toString)&&e.toString!==oi}function g(e){return void 0===e}function y(e){return void 0!==e}function b(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!ai(e)}function _(e){return"string"==typeof e}function k(e){return"number"==typeof e}function x(e){return"[object Date]"===oi.call(e)}function S(e){return"function"==typeof e}function C(e){return"[object RegExp]"===oi.call(e)}function M(e){return e&&e.window===e}function E(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===oi.call(e)}function I(e){return"[object FormData]"===oi.call(e)}function O(e){return"[object Blob]"===oi.call(e)}function D(e){return"boolean"==typeof e}function P(e){return e&&S(e.then)}function T(e){return e&&k(e.length)&&hi.test(oi.call(e))}function j(e){return"[object ArrayBuffer]"===oi.call(e)}function R(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function F(e){var t={},n=e.split(","),r;for(r=0;r<n.length;r++)t[n[r]]=!0;return t}function N(e){return Gr(e.nodeName||e[0]&&e[0].nodeName)}function L(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function B(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t){function n(e,t){var n=t.$$hashKey,r;if(di(e))for(var o=0,a=e.length;o<a;o++)t.push(i(e[o]));else if(w(e))for(r in e)t[r]=i(e[r]);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=i(e[r]));else for(r in e)Kr.call(e,r)&&(t[r]=i(e[r]));return s(t,n),t}function i(e){if(!b(e))return e;var t=a.indexOf(e);if(-1!==t)return c[t];if(M(e)||E(e))throw si("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=o(e);return void 0===i&&(i=di(e)?[]:Object.create(ai(e)),r=!0),a.push(e),c.push(i),r?n(e,i):i}function o(e){switch(oi.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(S(e.cloneNode))return e.cloneNode(!0)}var a=[],c=[];if(t){if(T(t)||j(t))throw si("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw si("cpi","Can't copy! Source and destination are identical.");return di(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),c.push(t),n(e,t)}return i(e)}function V(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n=typeof e,r=typeof t,i,o,a;if(n===r&&"object"===n){if(!di(e)){if(x(e))return!!x(t)&&V(e.getTime(),t.getTime());if(C(e))return!!C(t)&&e.toString()===t.toString();if(E(e)||E(t)||M(e)||M(t)||di(t)||x(t)||C(t))return!1;a=ge();for(o in e)if("$"!==o.charAt(0)&&!S(e[o])){if(!V(e[o],t[o]))return!1;a[o]=!0}for(o in t)if(!(o in a)&&"$"!==o.charAt(0)&&y(t[o])&&!S(t[o]))return!1;return!0}if(!di(t))return!1;if((i=e.length)===t.length){for(o=0;o<i;o++)if(!V(e[o],t[o]))return!1;return!0}}return!1}function H(e,t,n){return e.concat(ni.call(t,n))}function z(e,t){return ni.call(e,t||0)}function q(e,t){var n=arguments.length>2?z(arguments,2):[];return!S(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,H(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function W(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:M(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":E(n)&&(r="$SCOPE"),r}function J(e,t){if(!g(e))return k(t)||(t=t?2:null),JSON.stringify(e,W,t)}function K(e){return _(e)?JSON.parse(e):e}function G(e,t){e=e.replace(yi,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return fi(n)?t:n}function Y(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Z(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return Y(e,n*(G(t,r)-r))}function X(e){e=ei(e).clone();try{e.empty()}catch(e){}var t=ei("<div>").append(e).html();try{return e[0].nodeType===Si?Gr(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Gr(t)})}catch(e){return Gr(t)}}function Q(e){try{return decodeURIComponent(e)}catch(e){}}function ee(e){var t={};return r((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=Q(r),y(r)&&(i=!y(i)||Q(i),Kr.call(t,r)?di(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function te(e){var t=[];return r(e,function(e,n){di(e)?r(e,function(e){t.push(re(n,!0)+(!0===e?"":"="+re(e,!0)))}):t.push(re(n,!0)+(!0===e?"":"="+re(e,!0)))}),t.length?t.join("&"):""}function ne(e){return re(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function re(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ie(e,t){var n,r,i=$i.length;for(r=0;r<i;++r)if(n=$i[r]+t,_(n=e.getAttribute(n)))return n;return null}function oe(e){if(!e.currentScript)return!0;var t=e.currentScript.getAttribute("src"),n=e.createElement("a");if(n.href=t,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function ae(t,n){var i,o,a={};if(r($i,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,o=t.getAttribute(n))}),r($i,function(e){var n=e+"app",r;!i&&(r=t.querySelector("["+n.replace(":","\\:")+"]"))&&(i=r,o=r.getAttribute(n))}),i){if(!bi)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==ie(i,"strict-di"),n(i,o?[o]:[],a)}}function se(t,n,i){b(i)||(i={}),i=u({strictDi:!1},i);var o=function(){if(t=ei(t),t.injector()){var r=t[0]===e.document?"document":X(t);throw si("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=lt(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function e(t,n,r,i){t.$apply(function(){n.data("$injector",i),r(n)(t)})}]),o},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&a.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(a,"")),e&&!s.test(e.name))return o();e.name=e.name.replace(s,""),ci.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),o()},S(ci.resumeDeferredBootstrap)&&ci.resumeDeferredBootstrap()}function ce(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ue(e){var t=ci.element(e).injector();if(!t)throw si("test","no injector found for element argument to getTestability");return t.get("$$testability")}function le(e,t){return t=t||"_",e.replace(wi,function(e,n){return(n?t:"")+e.toLowerCase()})}function fe(){var t;if(!_i){var n=gi();ti=g(n)?e.jQuery:n?e[n]:void 0,ti&&ti.fn.on?(ei=ti,u(ti.fn,{scope:Vi.scope,isolateScope:Vi.isolateScope,controller:Vi.controller,injector:Vi.injector,inheritedData:Vi.inheritedData}),t=ti.cleanData,ti.cleanData=function(e){for(var n,r=0,i;null!=(i=e[r]);r++)(n=ti._data(i,"events"))&&n.$destroy&&ti(i).triggerHandler("$destroy");t(e)}):ei=je,ci.element=ei,_i=!0}}function de(e,t,n){if(!e)throw si("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function he(e,t,n){return n&&di(e)&&(e=e[e.length-1]),de(S(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function pe(e,t){if("hasOwnProperty"===e)throw si("badname","hasOwnProperty is not a valid {0} name",t)}function me(e,t,n){if(!t)return e;for(var r=t.split("."),i,o=e,a=r.length,s=0;s<a;s++)i=r[s],e&&(e=(o=e)[i]);return!n&&S(e)?q(o,e):e}function ve(e){for(var t=e[0],n=e[e.length-1],r,i=1;t!==n&&(t=t.nextSibling);i++)(r||e[i]!==t)&&(r||(r=ei(ni.call(e,0,i))),r.push(t));return r||e}function ge(){return Object.create(null)}function ye(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!v(e)||di(e)||x(e)?J(e):e.toString()}return e}function $e(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function t(o,a,s){return function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)}(o,"module"),a&&e.hasOwnProperty(o)&&(e[o]=null),n(e,o,function(){function e(e,t,r,i){return i||(i=n),function(){return i[r||"push"]([e,t,arguments]),l}}function t(e,t,r){return r||(r=n),function(n,i){return i&&S(i)&&(i.$$moduleName=o),r.push([e,t,arguments]),l}}if(!a)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",o);var n=[],i=[],c=[],u=e("$injector","invoke","push",i),l={_invokeQueue:n,_configBlocks:i,_runBlocks:c,requires:a,name:o,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator",i),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),component:t("$compileProvider","component"),config:u,run:function(e){return c.push(e),this}};return s&&u(s),l})}})}function be(e,t){if(di(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(b(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function we(e){var t=[];return JSON.stringify(e,function(e,n){if(n=W(e,n),b(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function _e(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):g(e)?"undefined":"string"!=typeof e?we(e):e}function ke(n){u(n,{bootstrap:se,copy:U,extend:u,merge:l,equals:V,element:ei,forEach:r,injector:lt,noop:h,bind:q,toJson:J,fromJson:K,identity:p,isUndefined:g,isDefined:y,isString:_,isFunction:S,isObject:b,isNumber:k,isElement:R,isArray:di,version:Ai,isDate:x,lowercase:Gr,uppercase:Yr,callbacks:{$$counter:0},getTestability:ue,reloadWithDebugInfo:ce,$$minErr:t,$$csp:vi,$$encodeUriSegment:ne,$$encodeUriQuery:re,$$stringify:ye}),(ui=$e(e))("ng",["ngLocale"],["$provide",function e(t){t.provider({$$sanitizeUri:In}),t.provider("$compile",wt).directive({a:Yo,input:va,textarea:va,form:na,script:ls,select:hs,option:ps,ngBind:$a,ngBindHtml:wa,ngBindTemplate:ba,ngClass:ka,ngClassEven:Sa,ngClassOdd:xa,ngCloak:Ca,ngController:Ma,ngForm:ra,ngHide:rs,ngIf:Ia,ngInclude:Oa,ngInit:Pa,ngNonBindable:Ka,ngPluralize:Xa,ngRepeat:Qa,ngShow:ns,ngStyle:is,ngSwitch:os,ngSwitchWhen:as,ngSwitchDefault:ss,ngOptions:Za,ngTransclude:us,ngModel:za,ngList:Ta,ngChange:_a,pattern:vs,ngPattern:vs,required:ms,ngRequired:ms,minlength:ys,ngMinlength:ys,maxlength:gs,ngMaxlength:gs,ngValue:ya,ngModelOptions:Ja}).directive({ngInclude:Da}).directive(Zo).directive(Ea),t.provider({$anchorScroll:ft,$animate:io,$animateCss:so,$$animateJs:no,$$animateQueue:ro,$$AnimateRunner:ao,$$animateAsyncRun:oo,$browser:gt,$cacheFactory:yt,$controller:At,$document:It,$$isDocumentHidden:Ot,$exceptionHandler:Dt,$filter:qn,$$forceReflow:mo,$interpolate:Wt,$interval:Jt,$http:Vt,$httpParamSerializer:Tt,$httpParamSerializerJQLike:jt,$httpBackend:zt,$xhrFactory:Ht,$jsonpCallbacks:ko,$location:un,$log:ln,$parse:xn,$rootScope:An,$q:Sn,$$q:Cn,$sce:jn,$sceDelegate:Tn,$sniffer:Rn,$templateCache:$t,$templateRequest:Fn,$$testability:Nn,$timeout:Ln,$window:Vn,$$rAF:En,$$jqLite:rt,$$HashMap:Wi,$$cookieReader:zn})}])}function xe(){return++Oi}function Se(e){return Me(e.replace(Pi,"ms-"))}function Ce(e,t){return t.toUpperCase()}function Me(e){return e.replace(Di,Ce)}function Ee(e){return!Fi.test(e)}function Ae(e){var t=e.nodeType;return t===ki||!t||t===Mi}function Ie(e){for(var t in Ii[e.ng339])return!0;return!1}function Oe(e){for(var t=0,n=e.length;t<n;t++)Le(e[t])}function De(e,t){var n,i,o,a=t.createDocumentFragment(),s=[],c;if(Ee(e))s.push(t.createTextNode(e));else{for(n=a.appendChild(t.createElement("div")),i=(Ni.exec(e)||["",""])[1].toLowerCase(),o=Bi[i]||Bi._default,n.innerHTML=o[1]+e.replace(Li,"<$1></$2>")+o[2],c=o[0];c--;)n=n.lastChild;s=H(s,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",r(s,function(e){a.appendChild(e)}),a}function Pe(t,n){n=n||e.document;var r;return(r=Ri.exec(t))?[n.createElement(r[1])]:(r=De(t,n))?r.childNodes:[]}function Te(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function je(e){if(e instanceof je)return e;var t;if(_(e)&&(e=pi(e),t=!0),!(this instanceof je)){if(t&&"<"!==e.charAt(0))throw ji("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new je(e)}t?qe(this,Pe(e)):S(e)?Ze(e):qe(this,e)}function Re(e){return e.cloneNode(!0)}function Fe(e,t){if(t||Le(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;r<i;r++)Le(n[r])}function Ne(e,t,n,i){if(y(i))throw ji("offargs","jqLite#off() does not support the `selector` argument");var o=Be(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var c=function(t){var r=a[t];y(n)&&B(r||[],n),y(n)&&r&&r.length>0||(e.removeEventListener(t,s),delete a[t])};r(t.split(" "),function(e){c(e),Ti[e]&&c(Ti[e])})}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,s),delete a[t]}function Le(e,t){var n=e.ng339,r=n&&Ii[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Ne(e)),delete Ii[n],e.ng339=void 0}}function Be(e,t){var n=e.ng339,r=n&&Ii[n];return t&&!r&&(e.ng339=n=xe(),r=Ii[n]={events:{},data:{},handle:void 0}),r}function Ue(e,t,n){if(Ae(e)){var r,i=y(n),o=!i&&t&&!b(t),a=!t,s=Be(e,!o),c=s&&s.data;if(i)c[Me(t)]=n;else{if(a)return c;if(o)return c&&c[Me(t)];for(r in t)c[Me(r)]=t[r]}}}function Ve(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function He(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",pi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+pi(t)+" "," ")))})}function ze(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=pi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",pi(n))}}function qe(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function We(e,t){return Je(e,"$"+(t||"ngController")+"Controller")}function Je(e,t,n){e.nodeType===Mi&&(e=e.documentElement);for(var r=di(t)?t:[t];e;){for(var i=0,o=r.length;i<o;i++)if(y(n=ei.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Ei&&e.host}}function Ke(e){for(Fe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ge(e,t){t||Fe(e);var n=e.parentNode;n&&n.removeChild(e)}function Ye(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):ei(n).on("load",t)}function Ze(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}function Xe(e,t){var n=Hi[t.toLowerCase()];return n&&zi[N(e)]&&n}function Qe(e){return qi[e]}function et(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(g(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||tt;o>1&&(i=be(i));for(var c=0;c<o;c++)n.isImmediatePropagationStopped()||s(e,n,i[c])}};return n.elem=e,n}function tt(e,t,n){n.call(e,t)}function nt(e,t,n){var r=t.relatedTarget;r&&(r===e||Ui.call(e,r))||n.call(e,t)}function rt(){this.$get=function e(){return u(je,{hasClass:function(e,t){return e.attr&&(e=e[0]),Ve(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),ze(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),He(e,t)}})}}function it(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||a)():r+":"+e}function ot(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function at(e){return Function.prototype.toString.call(e)+" "}function st(e){var t=at(e).replace(Zi,"");return t.match(Ji)||t.match(Ki)}function ct(e){var t=st(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ut(e,t,n){var i,o,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw _(n)&&n||(n=e.name||ct(e)),Xi("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o=st(e),r(o[1].split(Gi),function(e){e.replace(Yi,function(e,t,n){i.push(n)})})}e.$inject=i}}else di(e)?(a=e.length-1,he(e[a],"fn"),i=e.slice(0,a)):he(e,"fn",!0);return i}function lt(e,t){function n(e){return function(t,n){if(!b(t))return e(t,n);r(t,o(e))}}function i(e,t){if(pe(e,"service"),(S(t)||di(t))&&(t=x.instantiate(t)),!t.$get)throw Xi("pget","Provider '{0}' must define $get factory method.",e);return k[e+v]=t}function a(e,t){return function n(){var r=E.invoke(t,this);if(g(r))throw Xi("undef","Provider '{0}' must return a value from $get factory method.",e);return r}}function s(e,t,n){return i(e,{$get:!1!==n?a(e,t):t})}function c(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,m(t),!1)}function l(e,t){pe(e,"constant"),k[e]=t,C[e]=t}function f(e,t){var n=x.get(e+v),r=n.$get;n.$get=function(){var e=E.invoke(r,n);return E.invoke(t,null,{$delegate:e})}}function d(e){de(g(e)||di(e),"modulesToLoad","not an array");var t=[],n;return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=x.get(r[0]);i[r[1]].apply(i,r[2])}}if(!w.get(e)){w.put(e,!0);try{_(e)?(n=ui(e),t=t.concat(d(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):S(e)?t.push(x.invoke(e)):di(e)?t.push(x.invoke(e)):he(e,"module")}catch(t){throw di(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Xi("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),t}function h(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===p)throw Xi("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=p,e[t]=n(t,r),e[t]}catch(n){throw e[t]===p&&delete e[t],n}finally{y.shift()}}function i(e,n,i){for(var o=[],a=lt.$$annotate(e,t,i),s=0,c=a.length;s<c;s++){var u=a[s];if("string"!=typeof u)throw Xi("itkn","Incorrect injection token! Expected service name as string, got {0}",u);o.push(n&&n.hasOwnProperty(u)?n[u]:r(u,i))}return o}function o(e){if(Qr||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return D(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(at(e))),t}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return di(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=di(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:lt.$$annotate,has:function(t){return k.hasOwnProperty(t+v)||e.hasOwnProperty(t)}}}t=!0===t;var p={},v="Provider",y=[],w=new ot([],!0),k={$provide:{provider:n(i),factory:n(s),service:n(c),value:n(u),constant:n(l),decorator:f}},x=k.$injector=h(k,function(e,t){throw ci.isString(t)&&y.push(t),Xi("unpr","Unknown provider: {0}",y.join(" <- "))}),C={},M=h(C,function(e,t){var n=x.get(e+v,t);return E.invoke(n.$get,n,void 0,e)}),E=M;k["$injector"+v]={$get:m(M)};var A=d(e);return E=M.get("$injector"),E.strictDi=t,r(A,function(e){e&&E.invoke(e)}),E}function ft(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===N(e))return t=e,!0}),t}function o(){var e=s.yOffset;if(S(e))e=e();else if(R(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else k(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=_(e)?e:k(e)?e.toString():n.hash();var t;e?(t=c.getElementById(e))?a(t):(t=i(c.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var c=t.document;return e&&r.$watch(function e(){return n.hash()},function e(t,n){t===n&&""===t||Ye(function(){r.$evalAsync(s)})}),s}]}function dt(e,t){return e||t?e?t?(di(e)&&(e=e.join(" ")),di(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function ht(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===eo)return n}}function pt(e){_(e)&&(e=e.split(" "));var t=ge();return r(e,function(e){e.length&&(t[e]=!0)}),t}function mt(e){return b(e)?e:{}}function vt(e,t,n,i){function o(e){try{e.apply(null,z(arguments,1))}finally{if(0===--y)for(;b.length;)try{b.pop()()}catch(e){n.error(e)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){S=null,c(),u()}function c(){w=C(),w=g(w)?null:w,V(w,A)&&(w=A),A=w}function u(){k===l.url()&&_===w||(k=l.url(),_=w,r(M,function(e){e(l.url(),w)}))}var l=this,f=e.location,d=e.history,p=e.setTimeout,m=e.clearTimeout,v={};l.isMock=!1;var y=0,b=[];l.$$completeOutstandingRequest=o,l.$$incOutstandingRequestCount=function(){y++},l.notifyWhenNoOutstandingRequests=function(e){0===y?e():b.push(e)};var w,_,k=f.href,x=t.find("base"),S=null,C=i.history?function e(){try{return d.state}catch(e){}}:h;c(),_=w,l.url=function(t,n,r){if(g(r)&&(r=null),f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){var o=_===r;if(k===t&&(!i.history||o))return l;var s=k&&Qt(k)===Qt(t);return k=t,_=r,!i.history||s&&o?(s||(S=t),n?f.replace(t):s?f.hash=a(t):f.href=t,f.href!==t&&(S=t)):(d[n?"replaceState":"pushState"](r,"",t),c(),_=w),S&&(S=t),l}return S||f.href.replace(/%27/g,"'")},l.state=function(){return w};var M=[],E=!1,A=null;l.onUrlChange=function(t){return E||(i.history&&ei(e).on("popstate",s),ei(e).on("hashchange",s),E=!0),M.push(t),t},l.$$applicationDestroyed=function(){ei(e).off("hashchange popstate",s)},l.$$checkUrlChange=u,l.baseHref=function(){var e=x.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},l.defer=function(e,t){var n;return y++,n=p(function(){delete v[n],o(e)},t||0),v[n]=!0,n},l.defer.cancel=function(e){return!!v[e]&&(delete v[e],m(e),o(h),!0)}}function gt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new vt(e,r,t,n)}]}function yt(){this.$get=function(){function e(e,r){function i(e){e!==d&&(h?h===e&&(h=e.n):h=e,o(e.n,e.p),o(e,d),d=e,d.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=u({},r,{id:e}),c=ge(),l=r&&r.capacity||Number.MAX_VALUE,f=ge(),d=null,h=null;return n[e]={put:function(e,t){if(!g(t)){if(l<Number.MAX_VALUE){i(f[e]||(f[e]={key:e}))}return e in c||a++,c[e]=t,a>l&&this.remove(h.key),t}},get:function(e){if(l<Number.MAX_VALUE){var t=f[e];if(!t)return;i(t)}return c[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=f[e];if(!t)return;t===d&&(d=t.p),t===h&&(h=t.n),o(t.n,t.p),delete f[e]}e in c&&(delete c[e],a--)},removeAll:function(){c=ge(),a=0,f=ge(),d=h=null},destroy:function(){c=null,s=null,f=null,delete n[e]},info:function(){return u({},s,{size:a})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function $t(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function bt(){}function wt(t,n){function i(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,o=ge();return r(e,function(e,r){if(e in A)return void(o[r]=A[e]);var a=e.match(i);if(!a)throw co("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");o[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r},a[4]&&(A[e]=o[r])}),o}function a(e,t){var n={isolateScope:null,bindToController:null};if(b(e.scope)&&(!0===e.bindToController?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),b(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw co("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function s(e){var t=e.charAt(0);if(!t||t!==Gr(t))throw co("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw co("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function c(e){var t=e.require||e.controller&&e.name;return!di(t)&&b(t)&&r(t,function(e,n){var r=e.match(C);e.substring(r[0].length)||(t[n]=r[0]+n)}),t}function l(e,t){if(e&&(!_(e)||!/[EACM]/.test(e)))throw co("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var f={},v="Directive",w=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,x=F("ngSrc,ngSrcset,src,srcset"),C=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,M=/^(on[a-z]+|formaction)$/,A=ge();this.directive=function e(n,i){return de(n,"name"),pe(n,"directive"),_(n)?(s(n),de(i,"directiveFactory"),f.hasOwnProperty(n)||(f[n]=[],t.factory(n+v,["$injector","$exceptionHandler",function(e,t){var i=[];return r(f[n],function(r,o){try{var a=e.invoke(r);S(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=c(a),a.restrict=l(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(e){t(e)}}),i}])),f[n].push(i)):r(n,o(e)),this},this.component=function e(t,n){function i(e){function t(t){return S(t)||di(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=n.template||n.templateUrl?n.template:"",a={controller:o,controllerAs:Et(n.controller)||n.controllerAs||"$ctrl",template:t(i),templateUrl:t(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return r(n,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var o=n.controller||function(){};return r(n,function(e,t){"$"===t.charAt(0)&&(i[t]=e,S(o)&&(o[t]=e))}),i.$inject=["$injector"],this.directive(t,i)},this.aHrefSanitizationWhitelist=function(e){return y(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var I=!0;this.debugInfoEnabled=function(e){return y(e)?(I=e,this):I};var O=!1;this.preAssignBindingsEnabled=function(e){return y(e)?(O=e,this):O};var P=10;this.onChangesTtl=function(e){return arguments.length?(P=e,this):P};var T=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(T=e,this):T};var j=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(j=e,this):j},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,i,o,s,c,l,m,A,R){function F(){try{if(!--Ae)throw Ie=void 0,co("infchng","{0} $onChanges() iterations reached. Aborting!\n",P);l.$apply(function(){for(var e=[],t=0,n=Ie.length;t<n;++t)try{Ie[t]()}catch(t){e.push(t)}if(Ie=void 0,e.length)throw e})}finally{Ae++}}function L(e,t){if(t){var n=Object.keys(t),r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r],this[o]=t[o]}else this.$attr={};this.$$element=e}function U(e,t,n){Se.innerHTML="<span "+t+">";var r=Se.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function H(e,t){try{e.addClass(t)}catch(e){}}function W(e,t,n,r,i){e instanceof ei||(e=ei(e));var o=K(e,t,e,n,r,i);W.$$addScopeClass(e);var a=null;return function t(n,r,s){if(!e)throw co("multilink","This element has already been linked.");de(n,"scope"),i&&i.needsNewScope&&(n=n.$parent.$new()),s=s||{};var c=s.parentBoundTranscludeFn,u=s.transcludeControllers,l=s.futureParentElement;c&&c.$$boundTransclude&&(c=c.$$boundTransclude),a||(a=J(l));var f;if(f="html"!==a?ei(ve(a,ei("<div>").append(e).html())):r?Vi.clone.call(e):e,u)for(var d in u)f.data("$"+d+"Controller",u[d].instance);return W.$$addScopeInfo(f,n),r&&r(f,n),o&&o(n,f,f,c),r||(e=o=null),f}}function J(e){var t=e&&e[0];return t&&"foreignobject"!==N(t)&&oi.call(t).match(/SVG/)?"svg":"html"}function K(e,t,n,r,i,o){function a(e,n,r,i){var o,a,c,u,l,f,d,h,p;if(m){var v=n.length;for(p=new Array(v),l=0;l<s.length;l+=3)d=s[l],p[d]=n[d]}else p=n;for(l=0,f=s.length;l<f;)c=p[s[l++]],o=s[l++],a=s[l++],o?(o.scope?(u=e.$new(),W.$$addScopeInfo(ei(c),u)):u=e,h=o.transcludeOnThisElement?Y(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?Y(e,t):null,o(a,u,c,r,h)):a&&a(e,c.childNodes,void 0,i)}for(var s=[],c=di(e)||e instanceof ei,u,l,f,d,h,p,m,v=0;v<e.length;v++)u=new L,11===Qr&&G(e,v,c),l=Z(e[v],[],u,0===v?r:void 0,i),f=l.length?re(l,e[v],u,t,n,null,[],[],o):null,f&&f.scope&&W.$$addScopeClass(u.$$element),
h=f&&f.terminal||!(d=e[v].childNodes)||!d.length?null:K(d,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:t),(f||h)&&(s.push(v,f,h),p=!0,m=m||f),o=null;return p?a:null}function G(e,t,n){var r=e[t],i=r.parentNode,o;if(r.nodeType===Si)for(;;){if(!(o=i?r.nextSibling:e[t+1])||o.nodeType!==Si)break;r.nodeValue=r.nodeValue+o.nodeValue,o.parentNode&&o.parentNode.removeChild(o),n&&o===e[t+1]&&e.splice(t+1,1)}}function Y(e,t,n){function r(r,i,o,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=ge();for(var o in t.$$slots)t.$$slots[o]?i[o]=Y(e,t.$$slots[o],n):i[o]=null;return r}function Z(e,t,n,r,i){var o=e.nodeType,a=n.$attr,s,c,u;switch(o){case ki:c=N(e),se(t,kt(c),"E",r,i);for(var l,f,d,h,p,m,v=e.attributes,g=0,y=v&&v.length;g<y;g++){var w=!1,x=!1;l=v[g],f=l.name,p=l.value,h=kt(f),m=Te.test(h),m&&(f=f.replace(lo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var S=h.match(je);S&&ce(S[1])&&(w=f,x=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),d=kt(f.toLowerCase()),a[d]=f,!m&&n.hasOwnProperty(d)||(n[d]=p,Xe(e,d)&&(n[d]=!0)),$e(e,t,p,d,m),se(t,d,"A",r,i,w,x)}if("input"===c&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!Me)break;if(u=e.className,b(u)&&(u=u.animVal),_(u)&&""!==u)for(;s=k.exec(u);)d=kt(s[2]),se(t,d,"C",r,i)&&(n[d]=pi(s[3])),u=u.substr(s.index+s[0].length);break;case Si:me(t,e.nodeValue);break;case Ci:if(!Ce)break;Q(e,t,n,r,i);break}return t.sort(he),t}function Q(e,t,n,r,i){try{var o=w.exec(e.nodeValue);if(o){var a=kt(o[1]);se(t,a,"M",r,i)&&(n[a]=pi(o[2]))}}catch(e){}}function ee(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw co("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===ki&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return ei(r)}function te(e,t,n){return function r(i,o,a,s,c){return o=ee(o[0],t,n),e(i,o,a,s,c)}}function ne(e,t,n,r,i,o){var a;return e?W(t,n,r,i,o):function e(){return a||(a=W(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function re(e,t,n,o,a,s,c,l,f){function d(e,t,n,r){e&&(n&&(e=te(e,n,r)),e.require=A.require,e.directiveName=I,(y===A||A.$$isolateScope)&&(e=we(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=te(t,n,r)),t.require=A.require,t.directiveName=I,(y===A||A.$$isolateScope)&&(t=we(t,{isolateScope:!0})),l.push(t))}function h(e,o,a,s,f){function d(e,t,n,r){var i;if(E(e)||(r=n,n=t,t=e,e=void 0),C&&(i=M),n||(n=C?I.parent():I),!r)return f(e,t,i,n,B);var o=f.$$slots[r];if(o)return o(e,t,i,n,B);if(g(o))throw co("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,X(I))}var h,p,_,k,x,M,A,I,D,P;t===a?(D=n,I=n.$$element):(I=ei(a),D=new L(I,n)),x=o,y?k=o.$new(!0):m&&(x=o.$parent),f&&(A=d,A.$$boundTransclude=f,A.isSlotFilled=function(e){return!!f.$$slots[e]}),v&&(M=oe(I,D,A,v,k,o,y)),y&&(W.$$addScopeInfo(I,k,!0,!(w&&(w===y||w===y.$$originalDirective))),W.$$addScopeClass(I,!0),k.$$isolateBindings=y.$$isolateBindings,P=ke(o,D,k,k.$$isolateBindings,y),P.removeWatches&&k.$on("$destroy",P.removeWatches));for(var T in M){var j=v[T],R=M[T],F=j.$$bindings.bindToController;if(O){R.bindingInfo=F?ke(x,D,R.instance,F,j):{};var N=R();N!==R.instance&&(R.instance=N,I.data("$"+j.name+"Controller",N),R.bindingInfo.removeWatches&&R.bindingInfo.removeWatches(),R.bindingInfo=ke(x,D,R.instance,F,j))}else R.instance=R(),I.data("$"+j.name+"Controller",R.instance),R.bindingInfo=ke(x,D,R.instance,F,j)}for(r(v,function(e,t){var n=e.require;e.bindToController&&!di(n)&&b(n)&&u(M[t].instance,ie(t,n,I,M))}),r(M,function(e){var t=e.instance;if(S(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){i(e)}if(S(t.$onInit))try{t.$onInit()}catch(e){i(e)}S(t.$doCheck)&&(x.$watch(function(){t.$doCheck()}),t.$doCheck()),S(t.$onDestroy)&&x.$on("$destroy",function e(){t.$onDestroy()})}),h=0,p=c.length;h<p;h++)_=c[h],_e(_,_.isolateScope?k:o,I,D,_.require&&ie(_.directiveName,_.require,I,M),A);var B=o;for(y&&(y.template||null===y.templateUrl)&&(B=k),e&&e(B,a.childNodes,void 0,f),h=l.length-1;h>=0;h--)_=l[h],_e(_,_.isolateScope?k:o,I,D,_.require&&ie(_.directiveName,_.require,I,M),A);r(M,function(e){var t=e.instance;S(t.$postLink)&&t.$postLink()})}f=f||{};for(var p=-Number.MAX_VALUE,m=f.newScopeDirective,v=f.controllerDirectives,y=f.newIsolateScopeDirective,w=f.templateDirective,_=f.nonTlbTranscludeDirective,k=!1,x=!1,C=f.hasElementTranscludeDirective,M=n.$$element=ei(t),A,I,D,P=s,T=o,j,R=!1,F=!1,B,U=0,V=e.length;U<V;U++){A=e[U];var H=A.$$start,J=A.$$end;if(H&&(M=ee(t,H,J)),D=void 0,p>A.priority)break;if(B=A.scope,B&&(A.templateUrl||(b(B)?(pe("new/isolated scope",y||m,A,M),y=A):pe("new/isolated scope",y,A,M)),m=m||A),I=A.name,!R&&(A.replace&&(A.templateUrl||A.template)||A.transclude&&!A.$$tlb)){for(var K,G=U+1;K=e[G++];)if(K.transclude&&!K.$$tlb||K.replace&&(K.templateUrl||K.template)){F=!0;break}R=!0}if(!A.templateUrl&&A.controller&&(v=v||ge(),pe("'"+I+"' controller",v[I],A,M),v[I]=A),B=A.transclude)if(k=!0,A.$$tlb||(pe("transclusion",_,A,M),_=A),"element"===B)C=!0,p=A.priority,D=M,M=n.$$element=ei(W.$$createComment(I,n[I])),t=M[0],be(a,z(D),t),D[0].$$parentNode=D[0].parentNode,T=ne(F,D,o,p,P&&P.name,{nonTlbTranscludeDirective:_});else{var Y=ge();if(b(B)){D=[];var Q=ge(),re=ge();r(B,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,Q[e]=t,Y[t]=null,re[t]=n}),r(M.contents(),function(e){var t=Q[kt(N(e))];t?(re[t]=!0,Y[t]=Y[t]||[],Y[t].push(e)):D.push(e)}),r(re,function(e,t){if(!e)throw co("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var se in Y)Y[se]&&(Y[se]=ne(F,Y[se],o))}else D=ei(Re(t)).contents();M.empty(),T=ne(F,D,o,void 0,void 0,{needsNewScope:A.$$isolateScope||A.$$newScope}),T.$$slots=Y}if(A.template)if(x=!0,pe("template",w,A,M),w=A,B=S(A.template)?A.template(M,n):A.template,B=Pe(B),A.replace){if(P=A,D=Ee(B)?[]:Mt(ve(A.templateNamespace,pi(B))),t=D[0],1!==D.length||t.nodeType!==ki)throw co("tplrt","Template for directive '{0}' must have exactly one root element. {1}",I,"");be(a,M,t);var ce={$attr:{}},le=Z(t,[],ce),de=e.splice(U+1,e.length-(U+1));(y||m)&&ae(le,y,m),e=e.concat(le).concat(de),ue(n,ce),V=e.length}else M.html(B);if(A.templateUrl)x=!0,pe("template",w,A,M),w=A,A.replace&&(P=A),h=fe(e.splice(U,e.length-U),M,n,a,k&&T,c,l,{controllerDirectives:v,newScopeDirective:m!==A&&m,newIsolateScopeDirective:y,templateDirective:w,nonTlbTranscludeDirective:_}),V=e.length;else if(A.compile)try{j=A.compile(M,n,T);var he=A.$$originalDirective||A;S(j)?d(null,q(he,j),H,J):j&&d(q(he,j.pre),q(he,j.post),H,J)}catch(e){i(e,X(M))}A.terminal&&(h.terminal=!0,p=Math.max(p,A.priority))}return h.scope=m&&!0===m.scope,h.transcludeOnThisElement=k,h.templateOnThisElement=x,h.transclude=T,f.hasElementTranscludeDirective=C,h}function ie(e,t,n,i){var o;if(_(t)){var a=t.match(C),s=t.substring(a[0].length),c=a[1]||a[3],u="?"===a[2];if("^^"===c?n=n.parent():(o=i&&i[s],o=o&&o.instance),!o){var l="$"+s+"Controller";o=c?n.inheritedData(l):n.data(l)}if(!o&&!u)throw co("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(di(t)){o=[];for(var f=0,d=t.length;f<d;f++)o[f]=ie(e,t[f],n,i)}else b(t)&&(o={},r(t,function(t,r){o[r]=ie(e,t,n,i)}));return o||null}function oe(e,t,n,r,i,o,a){var s=ge();for(var u in r){var l=r[u],f={$scope:l===a||l.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},d=l.controller;"@"===d&&(d=t[l.name]);var h=c(d,f,!0,l.controllerAs);s[l.name]=h,e.data("$"+l.name+"Controller",h.instance)}return s}function ae(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=d(e[r],{$$isolateScope:t,$$newScope:n})}function se(e,n,r,i,o,s,c){if(n===o)return null;var u=null;if(f.hasOwnProperty(n))for(var l,h=t.get(n+v),p=0,m=h.length;p<m;p++)if(l=h[p],(g(i)||i>l.priority)&&-1!==l.restrict.indexOf(r)){if(s&&(l=d(l,{$$start:s,$$end:c})),!l.$$bindings){var y=l.$$bindings=a(l,l.name);b(y.isolateScope)&&(l.$$isolateBindings=y.isolateScope)}e.push(l),u=l}return u}function ce(e){if(f.hasOwnProperty(e))for(var n,r=t.get(e+v),i=0,o=r.length;i<o;i++)if(n=r[i],n.multiElement)return!0;return!1}function ue(e,t){var n=t.$attr,i=e.$attr;r(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))}),r(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function fe(e,t,n,a,s,c,u,l){var f=[],p,m,v=t[0],g=e.shift(),y=d(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),w=S(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,_=g.templateNamespace;return t.empty(),o(w).then(function(i){var o,d,h,k;if(i=Pe(i),g.replace){if(h=Ee(i)?[]:Mt(ve(_,pi(i))),o=h[0],1!==h.length||o.nodeType!==ki)throw co("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,w);d={$attr:{}},be(a,t,o);var x=Z(o,[],d);b(g.scope)&&ae(x,!0),e=x.concat(e),ue(n,d)}else o=v,t.html(i);for(e.unshift(y),p=re(e,o,n,s,t,g,c,u,l),r(a,function(e,n){e===o&&(a[n]=t[0])}),m=K(t[0].childNodes,s);f.length;){var S=f.shift(),C=f.shift(),M=f.shift(),E=f.shift(),A=t[0];if(!S.$$destroyed){if(C!==v){var I=C.className;l.hasElementTranscludeDirective&&g.replace||(A=Re(o)),be(M,ei(C),A),H(ei(A),I)}k=p.transcludeOnThisElement?Y(S,p.transclude,E):E,p(m,S,A,a,k)}}f=null}).catch(function(e){e instanceof Error&&i(e)}).catch(h),function e(t,n,r,i,o){var a=o;n.$$destroyed||(f?f.push(n,r,i,a):(p.transcludeOnThisElement&&(a=Y(n,p.transclude,o)),p(m,n,r,i,a)))}}function he(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function pe(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw co("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,X(r))}function me(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function e(t){var n=t.parent(),i=!!n.length;return i&&W.$$addBindingClass(n),function e(t,n){var o=n.parent();i||W.$$addBindingClass(o),W.$$addBindingInfo(o,r.expressions),t.$watch(r,function e(t){n[0].nodeValue=t})}}})}function ve(t,n){switch(t=Gr(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function ye(e,t){if("srcdoc"===t)return m.HTML;var n=N(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return m.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return m.RESOURCE_URL}function $e(e,t,r,i,o){var a=ye(e,i),s=!o,c=x[i]||o,u=n(r,s,a,c);if(u){if("multiple"===i&&"select"===N(e))throw co("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",X(e));if(M.test(i))throw co("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function e(t,o,s){var l=s.$$observers||(s.$$observers=ge()),f=s[i];f!==r&&(u=f&&n(f,!0,a,c),r=f),u&&(s[i]=u(t),(l[i]||(l[i]=[])).$$inter=!0,(s.$$observers&&s.$$observers[i].$$scope||t).$watch(u,function e(t,n){"class"===i&&t!==n?s.$updateClass(t,n):s.$set(i,t)}))}}}})}}function be(t,n,r){var i=n[0],o=n.length,a=i.parentNode,s,c;if(t)for(s=0,c=t.length;s<c;s++)if(t[s]===i){t[s++]=r;for(var u=s,l=u+o-1,f=t.length;u<f;u++,l++)l<f?t[u]=t[l]:delete t[u];t.length-=o-1,t.context===i&&(t.context=r);break}a&&a.replaceChild(r,i);var d=e.document.createDocumentFragment();for(s=0;s<o;s++)d.appendChild(n[s]);for(ei.hasData(i)&&(ei.data(r,ei.data(i)),ei(i).off("$destroy")),ei.cleanData(d.querySelectorAll("*")),s=1;s<o;s++)delete n[s];n[0]=r,n.length=1}function we(e,t){return u(function(){return e.apply(null,arguments)},e,t)}function _e(e,t,n,r,o,a){try{e(t,n,r,o,a)}catch(e){i(e,X(n))}}function ke(e,t,i,o,a){function c(t,n,r){!S(i.$onChanges)||n===r||n!==n&&r!==r||(Ie||(e.$$postDigest(F),Ie=[]),d||(d={},Ie.push(u)),d[t]&&(r=d[t].previousValue),d[t]=new _t(r,n))}function u(){i.$onChanges(d),d=void 0}var l=[],f={},d;return r(o,function r(o,u){var d=o.attrName,p=o.optional,m=o.mode,v,g,y,b,w;switch(m){case"@":p||Kr.call(t,d)||(i[u]=t[d]=void 0),w=t.$observe(d,function(e){if(_(e)||D(e)){var t=i[u];c(u,e,t),i[u]=e}}),t.$$observers[d].$$scope=e,v=t[d],_(v)?i[u]=n(v)(e):D(v)&&(i[u]=v),f[u]=new _t(uo,i[u]),l.push(w);break;case"=":if(!Kr.call(t,d)){if(p)break;t[d]=void 0}if(p&&!t[d])break;g=s(t[d]),b=g.literal?V:function e(t,n){return t===n||t!==t&&n!==n},y=g.assign||function(){throw v=i[u]=g(e),co("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[d],d,a.name)},v=i[u]=g(e);var k=function t(n){return b(n,i[u])||(b(n,v)?y(e,n=i[u]):i[u]=n),v=n};k.$stateful=!0,w=o.collection?e.$watchCollection(t[d],k):e.$watch(s(t[d],k),null,g.literal),l.push(w);break;case"<":if(!Kr.call(t,d)){if(p)break;t[d]=void 0}if(p&&!t[d])break;g=s(t[d]);var x=g.literal,S=i[u]=g(e);f[u]=new _t(uo,i[u]),w=e.$watch(g,function e(t,n){if(n===t){if(n===S||x&&V(n,S))return;n=S}c(u,t,n),i[u]=t},x),l.push(w);break;case"&":if((g=t.hasOwnProperty(d)?s(t[d]):h)===h&&p)break;i[u]=function(t){return g(e,t)};break}}),{initialChanges:f,removeWatches:l.length&&function e(){for(var t=0,n=l.length;t<n;++t)l[t]()}}}var xe=/^\w/,Se=e.document.createElement("div"),Ce=T,Me=j,Ae=P,Ie;L.prototype={$normalize:kt,$addClass:function(e){e&&e.length>0&&A.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&A.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Ct(e,t);n&&n.length&&A.addClass(this.$$element,n);var r=Ct(t,e);r&&r.length&&A.removeClass(this.$$element,r)},$set:function(e,t,n,o){var a=this.$$element[0],s=Xe(a,e),c=Qe(e),u=e,l;if(s?(this.$$element.prop(e,t),o=s):c&&(this[c]=t,u=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e])||(this.$attr[e]=o=le(e,"-")),"a"===(l=N(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===l&&"src"===e)this[e]=t=R(t,"src"===e);else if("img"===l&&"srcset"===e&&y(t)){for(var f="",d=pi(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(d)?h:/(,)/,m=d.split(p),v=Math.floor(m.length/2),b=0;b<v;b++){var w=2*b;f+=R(pi(m[w]),!0),f+=" "+pi(m[w+1])}var _=pi(m[2*b]).split(/\s/);f+=R(pi(_[0]),!0),2===_.length&&(f+=" "+pi(_[1])),this[e]=t=f}!1!==n&&(null===t||g(t)?this.$$element.removeAttr(o):xe.test(o)?this.$$element.attr(o,t):U(this.$$element[0],o,t));var k=this.$$observers;k&&r(k[u],function(e){try{e(t)}catch(e){i(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ge()),i=r[e]||(r[e]=[]);return i.push(t),l.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||g(n[e])||t(n[e])}),function(){B(i,t)}}};var Oe=n.startSymbol(),De=n.endSymbol(),Pe="{{"===Oe&&"}}"===De?p:function e(t){return t.replace(/\{\{/g,Oe).replace(/}}/g,De)},Te=/^ngAttr[A-Z]/,je=/^(.+)Start$/;return W.$$addBindingInfo=I?function e(t,n){var r=t.data("$binding")||[];di(n)?r=r.concat(n):r.push(n),t.data("$binding",r)}:h,W.$$addBindingClass=I?function e(t){H(t,"ng-binding")}:h,W.$$addScopeInfo=I?function e(t,n,r,i){var o=r?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(o,n)}:h,W.$$addScopeClass=I?function e(t,n){H(t,n?"ng-isolate-scope":"ng-scope")}:h,W.$$createComment=function(t,n){var r="";return I&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},W}]}function _t(e,t){this.previousValue=e,this.currentValue=t}function kt(e){return e.replace(lo,"").replace(fo,Ce)}function xt(e,t,n,r){}function St(e,t,n,r,i){}function Ct(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Mt(e){e=ei(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===Ci||n.nodeType===Si&&""===n.nodeValue.trim())&&ri.call(e,t,1)}return e}function Et(e,t){if(t&&_(t))return t;if(_(e)){var n=po.exec(e);if(n)return n[3]}}function At(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){pe(t,"controller"),b(t)?u(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!b(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function t(a,s,c,l){var f,d,h,p;if(c=!0===c,l&&_(l)&&(p=l),_(a)){if(!(d=a.match(po)))throw ho("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",a);if(h=d[1],p=p||d[3],!(a=e.hasOwnProperty(h)?e[h]:me(s.$scope,h,!0)||(n?me(i,h,!0):void 0)))throw ho("ctrlreg","The controller with the name '{0}' is not registered.",h);he(a,h,!0)}if(c){var m=(di(a)?a[a.length-1]:a).prototype;return f=Object.create(m||null),p&&o(s,p,f,h||a.name),u(function e(){var t=r.invoke(a,f,s,h);return t!==f&&(b(t)||S(t))&&(f=t,p&&o(s,p,f,h||a.name)),f},{instance:f,identifier:p})}return f=r.instantiate(a,s,h),p&&o(s,p,f,h||a.name),f}}]}function It(){this.$get=["$window",function(e){return ei(e.document)}]}function Ot(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function Dt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Pt(e){return b(e)?x(e)?e.toISOString():J(e):e}function Tt(){this.$get=function(){return function e(t){if(!t)return"";var n=[];return i(t,function(e,t){null===e||g(e)||(di(e)?r(e,function(e){n.push(re(t)+"="+re(Pt(e)))}):n.push(re(t)+"="+re(Pt(e))))}),n.join("&")}}}function jt(){this.$get=function(){return function e(t){function n(e,t,a){null===e||g(e)||(di(e)?r(e,function(e,r){n(e,t+"["+(b(e)?r:"")+"]")}):b(e)&&!x(e)?i(e,function(e,r){n(e,t+(a?"":"[")+r+(a?"":"]"))}):o.push(re(t)+"="+re(Pt(e))))}if(!t)return"";var o=[];return n(t,"",!0),o.join("&")}}}function Rt(e,t){if(_(e)){var n=e.replace(bo,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(vo)||Ft(n))&&(e=K(n))}}return e}function Ft(e){var t=e.match(yo);return t&&$o[t[0]].test(e)}function Nt(e){function t(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}var n=ge(),i;return _(e)?r(e.split("\n"),function(e){i=e.indexOf(":"),t(Gr(pi(e.substr(0,i))),pi(e.substr(i+1)))}):b(e)&&r(e,function(e,n){t(Gr(n),pi(e))}),n}function Lt(e){var t;return function(n){if(t||(t=Nt(e)),n){var r=t[Gr(n)];return void 0===r&&(r=null),r}return t}}function Bt(e,t,n,i){return S(i)?i(e,t,n):(r(i,function(r){e=r(e,t,n)}),e)}function Ut(e){return 200<=e&&e<300}function Vt(){var e=this.defaults={transformResponse:[Rt],transformRequest:[function(e){return!b(e)||A(e)||O(e)||I(e)?e:J(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:be(go),put:be(go),patch:be(go)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},n=!1;this.useApplyAsync=function(e){return y(e)?(n=!!e,this):n};var i=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,c,l,f,d,p){function m(n){function i(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(){o.$$completeOutstandingRequest(h)}function s(e,t){var n,i={};return r(e,function(e,r){S(e)?null!=(n=e(t))&&(i[r]=n):i[r]=e}),i}function c(t){var n=e.headers,r=u({},t.headers),i,o,a;n=u({},n.common,n[Gr(t.method)]);e:for(i in n){o=Gr(i);for(a in r)if(Gr(a)===o)continue e;r[i]=n[i]}return s(r,be(t))}function l(t){var n=t.headers,i=Bt(t.data,Lt(n),void 0,t.transformRequest);return g(i)&&r(n,function(e,t){"content-type"===Gr(t)&&delete n[t]}),g(t.withCredentials)&&!g(e.withCredentials)&&(t.withCredentials=e.withCredentials),k(t,i).then(m,m)}function m(e){var t=u({},e);return t.data=Bt(e.data,e.headers,e.status,v.transformResponse),Ut(e.status)?t:f.reject(t)}if(!b(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!_(p.valueOf(n.url)))throw t("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var v=u({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);v.headers=c(n),v.method=Yr(v.method),v.paramSerializer=_(v.paramSerializer)?d.get(v.paramSerializer):v.paramSerializer,o.$$incOutstandingRequestCount();var y=[],w=[],x=f.resolve(v);return r(E,function(e){(e.request||e.requestError)&&y.unshift(e.request,e.requestError),(e.response||e.responseError)&&w.push(e.response,e.responseError)}),x=i(x,y),x=x.then(l),x=i(x,w),x=x.finally(a)}function v(e){r(arguments,function(e){m[e]=function(t,n){return m(u({},n||{},{method:e,url:t}))}})}function w(e){r(arguments,function(e){m[e]=function(t,n,r){return m(u({},r||{},{method:e,url:t,data:n}))}})}function k(t,i){function o(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?l.$applyAsync(r):l.$$phase?r():l.$apply(r)}}),t}}function c(e,t,r,i){function o(){u(t,e,r,i)}k&&(Ut(e)?k.put(I,[e,t,Nt(r),i]):k.remove(I)),n?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function u(e,n,r,i){n=n>=-1?n:0,(Ut(n)?v.resolve:v.reject)({data:e,status:n,headers:Lt(r),config:t,statusText:i})}function d(e){u(e.data,e.status,be(e.headers()),e.statusText)}function h(){var e=m.pendingRequests.indexOf(t);-1!==e&&m.pendingRequests.splice(e,1)}var v=f.defer(),w=v.promise,k,S,E=t.headers,A="jsonp"===Gr(t.method),I=t.url;if(A?I=p.getTrustedResourceUrl(I):_(I)||(I=p.valueOf(I)),I=x(I,t.paramSerializer(t.params)),A&&(I=C(I,t.jsonpCallbackParam)),m.pendingRequests.push(t),w.then(h,h),!t.cache&&!e.cache||!1===t.cache||"GET"!==t.method&&"JSONP"!==t.method||(k=b(t.cache)?t.cache:b(e.cache)?e.cache:M),k&&(S=k.get(I),y(S)?P(S)?S.then(d,d):di(S)?u(S[1],S[0],be(S[2]),S[3]):u(S,200,{},"OK"):k.put(I,w)),g(S)){var O=Un(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;O&&(E[t.xsrfHeaderName||e.xsrfHeaderName]=O),a(t.method,I,i,c,E,t.timeout,t.withCredentials,t.responseType,o(t.eventHandlers),o(t.uploadEventHandlers))}return w}function x(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}function C(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw wo("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(new RegExp("[&?]"+t+"=").test(e))throw wo("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}var M=c("$http");e.paramSerializer=_(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var E=[];return r(i,function(e){E.unshift(_(e)?d.get(e):d.invoke(e))}),m.pendingRequests=[],v("get","delete","head","jsonp"),w("post","put","patch"),m.defaults=e,m}]}function Ht(){this.$get=function(){return function t(){return new e.XMLHttpRequest}}}function zt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return qt(e,r,e.defer,t,n[0])}]}function qt(e,t,n,i,o){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){r.removeEventListener("load",a),r.removeEventListener("error",a),o.body.removeChild(r),r=null;var s=-1,c="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},r.addEventListener("load",a),r.addEventListener("error",a),o.body.appendChild(r),a}return function(o,s,c,u,l,f,d,h,p,m){function v(){_&&_(),k&&k.abort()}function b(e,t,r,i,o){y(S)&&n.cancel(S),_=k=null,e(t,r,i,o)}if(s=s||e.url(),"jsonp"===Gr(o))var w=i.createCallback(s),_=a(s,w,function(e,t){var n=200===e&&i.getResponse(w);b(u,e,n,"",t),i.removeCallback(w)});else{var k=t(o,s);k.open(o,s,!0),r(l,function(e,t){y(e)&&k.setRequestHeader(t,e)}),k.onload=function e(){var t=k.statusText||"",n="response"in k?k.response:k.responseText,r=1223===k.status?204:k.status;0===r&&(r=n?200:"file"===Bn(s).protocol?404:0),b(u,r,n,k.getAllResponseHeaders(),t)};var x=function(){b(u,-1,null,null,"")};if(k.onerror=x,k.onabort=x,k.ontimeout=x,r(p,function(e,t){k.addEventListener(t,e)}),r(m,function(e,t){k.upload.addEventListener(t,e)}),d&&(k.withCredentials=!0),h)try{k.responseType=h}catch(e){if("json"!==h)throw e}k.send(g(c)?null:c)}if(f>0)var S=n(v,f);else P(f)&&f.then(v)}}function Wt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(d,e).replace(h,t)}function s(e,t,n,r){var i=e.$watch(function e(t){return i(),r(t)},t,n);return i}function c(o,c,d,h){function p(e){try{return e=O(e),h&&!y(e)?e:ye(e)}catch(e){r(_o.interr(o,e))}}if(!o.length||-1===o.indexOf(e)){var v;if(!c){v=m(a(o)),v.exp=o,v.expressions=[],v.$$watchDelegate=s}return v}h=!!h;for(var b,w,_=0,k=[],x=[],C=o.length,M,E=[],A=[];_<C;){if(-1===(b=o.indexOf(e,_))||-1===(w=o.indexOf(t,b+l))){_!==C&&E.push(a(o.substring(_)));break}_!==b&&E.push(a(o.substring(_,b))),M=o.substring(b+l,w),k.push(M),x.push(n(M,p)),_=w+f,A.push(E.length),E.push("")}if(d&&E.length>1&&_o.throwNoconcat(o),!c||k.length){var I=function(e){for(var t=0,n=k.length;t<n;t++){if(h&&g(e[t]))return;E[A[t]]=e[t]}return E.join("")},O=function(e){return d?i.getTrusted(d,e):i.valueOf(e)};return u(function e(t){var n=0,i=k.length,a=new Array(i);try{for(;n<i;n++)a[n]=x[n](t);return I(a)}catch(e){r(_o.interr(o,e))}},{exp:o,expressions:k,$$watchDelegate:function(e,t){var n;return e.$watchGroup(x,function r(i,o){var a=I(i);S(t)&&t.call(this,a,i!==o?n:a,e),n=a})}})}}var l=e.length,f=t.length,d=new RegExp(e.replace(/./g,o),"g"),h=new RegExp(t.replace(/./g,o),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function Jt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,c,u){function l(){f?o.apply(null,d):o(m)}var f=arguments.length>4,d=f?z(arguments,4):[],h=t.setInterval,p=t.clearInterval,m=0,v=y(u)&&!u,g=(v?r:n).defer(),b=g.promise;return c=y(c)?c:0,b.$$intervalId=h(function t(){v?i.defer(l):e.$evalAsync(l),g.notify(m++),c>0&&m>=c&&(g.resolve(m),p(b.$$intervalId),delete a[b.$$intervalId]),v||e.$apply()},s),a[b.$$intervalId]=g,b}var a={};return o.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].promise.catch(h),a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},o}]}function Kt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ne(t[n]);return t.join("/")}function Gt(e,t){var n=Bn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||So[n.protocol]||null}function Yt(e,t){if(Mo.test(e))throw Co("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Bn(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=ee(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Zt(e,t){return e.slice(0,t.length)===t}function Xt(e,t){if(Zt(t,e))return t.substr(e.length)}function Qt(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function en(e){return e.replace(/(#.+)|#$/,"$1")}function tn(e){return e.substr(0,Qt(e).lastIndexOf("/")+1)}function nn(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function rn(e,t,n){this.$$html5=!0,n=n||"",Gt(e,this),this.$$parse=function(e){var n=Xt(t,e);if(!_(n))throw Co("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Yt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),n=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Kt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return y(o=Xt(e,r))?(a=o,s=n&&y(o=Xt(n,o))?t+(Xt("/",o)||o):e+a):y(o=Xt(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function on(e,t,n){Gt(e,this),this.$$parse=function(r){function i(e,t,n){var r=/^\/[A-Z]:(\/.*)/,i;return Zt(t,n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var o=Xt(e,r)||Xt(t,r),a;g(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",g(o)&&(e=r,this.replace())):(a=Xt(n,o),g(a)&&(a=o)),Yt(a,this),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Kt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Qt(e)===Qt(t)&&(this.$$parse(t),!0)}}function an(e,t,n){this.$$html5=!0,on.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Qt(r)?o=r:(a=Xt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Kt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function sn(e){return function(){return this[e]}}function cn(e,t){return function(n){return g(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function un(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return y(t)?(e=t,this):e},this.html5Mode=function(e){return D(e)?(t.enabled=e,this):b(e)?(D(e.enabled)&&(t.enabled=e.enabled),D(e.requireBase)&&(t.requireBase=e.requireBase),(D(e.rewriteLinks)||_(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=u.url(),o=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(e){throw u.url(i),u.$$state=o,e}}function c(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,l,f=r.baseHref(),d=r.url(),h;if(t.enabled){if(!f&&t.requireBase)throw Co("nobase","$location in HTML5 mode requires a <base> tag to be present!");h=nn(d)+(f||"/"),l=i.history?rn:an}else h=Qt(d),l=on;var p=tn(h);u=new l(h,p,"#"+e),u.$$parseLinkUrl(d,d),u.$$state=r.state();var m=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=ei(e.target);"a"!==N(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!_(i)||!g(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");b(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=Bn(c.animVal).href),m.test(c)||!c||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(e.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),en(u.absUrl())!==en(d)&&r.url(u.absUrl(),!0);var v=!0;return r.onUrlChange(function(e,t){if(!Zt(e,p))return void(a.location.href=e);n.$evalAsync(function(){var r=u.absUrl(),i=u.$$state,o;e=en(e),u.$$parse(e),u.$$state=t,o=n.$broadcast("$locationChangeStart",e,r,t,i).defaultPrevented,u.absUrl()===e&&(o?(u.$$parse(r),u.$$state=i,s(r,!1,i)):(v=!1,c(r,i)))}),n.$$phase||n.$digest()}),n.$watch(function e(){var t=en(r.url()),o=en(u.absUrl()),a=r.state(),l=u.$$replace,f=t!==o||u.$$html5&&i.history&&a!==u.$$state;(v||f)&&(v=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,a).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=a):(f&&s(e,l,a===u.$$state?null:u.$$state),c(t,a)))})),u.$$replace=!1}),u}]}function ln(){var e=!0,t=this;this.debugEnabled=function(t){return y(t)?(e=t,this):e},this.$get=["$window",function(n){function i(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=n.console||{},o=t[e]||t.log||h,a=!1;try{a=!!o.apply}catch(e){}return a?function(){
var e=[];return r(arguments,function(t){e.push(i(t))}),o.apply(t,e)}:function(e,t){o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var n=o("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function fn(e){return e+""}function dn(e,t){return void 0!==e?e:t}function hn(e,t){return void 0===e?t:void 0===t?e:e+t}function pn(e,t){return!e(t).$stateful}function mn(e,t){var n,i,o;switch(e.type){case To.Program:n=!0,r(e.body,function(e){mn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case To.Literal:e.constant=!0,e.toWatch=[];break;case To.UnaryExpression:mn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case To.BinaryExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case To.LogicalExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case To.ConditionalExpression:mn(e.test,t),mn(e.alternate,t),mn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case To.Identifier:e.constant=!1,e.toWatch=[e];break;case To.MemberExpression:mn(e.object,t),e.computed&&mn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case To.CallExpression:o=!!e.filter&&pn(t,e.callee.name),n=o,i=[],r(e.arguments,function(e){mn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=o?i:[e];break;case To.AssignmentExpression:mn(e.left,t),mn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case To.ArrayExpression:n=!0,i=[],r(e.elements,function(e){mn(e,t),n=n&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=n,e.toWatch=i;break;case To.ObjectExpression:n=!0,i=[],r(e.properties,function(e){mn(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||i.push.apply(i,e.value.toWatch)}),e.constant=n,e.toWatch=i;break;case To.ThisExpression:e.constant=!1,e.toWatch=[];break;case To.LocalsExpression:e.constant=!1,e.toWatch=[];break}}function vn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function gn(e){return e.type===To.Identifier||e.type===To.MemberExpression}function yn(e){if(1===e.body.length&&gn(e.body[0].expression))return{type:To.AssignmentExpression,left:e.body[0].expression,right:{type:To.NGValueParameter},operator:"="}}function $n(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===To.Literal||e.body[0].expression.type===To.ArrayExpression||e.body[0].expression.type===To.ObjectExpression)}function bn(e){return e.constant}function wn(e,t){this.astBuilder=e,this.$filter=t}function _n(e,t){this.astBuilder=e,this.$filter=t}function kn(e){return S(e.valueOf)?e.valueOf():Io.call(e)}function xn(){var e=ge(),t={true:!0,false:!1,null:null,undefined:void 0},n,i;this.addLiteral=function(e,n){t[e]=n},this.setIdentifierFns=function(e,t){return n=e,i=t,this},this.$get=["$filter",function(o){function a(t,n){var r,i,a;switch(typeof t){case"string":if(t=t.trim(),a=t,!(r=e[a])){":"===t.charAt(0)&&":"===t.charAt(1)&&(i=!0,t=t.substring(2));var s=new Po(m);r=new jo(s,o,m).parse(t),r.constant?r.$$watchDelegate=f:i?r.$$watchDelegate=r.literal?l:u:r.inputs&&(r.$$watchDelegate=c),e[a]=r}return d(r,n);case"function":return d(t,n);default:return d(h,n)}}function s(e,t){return null==e||null==t?e===t:("object"!=typeof e||"object"!=typeof(e=kn(e)))&&(e===t||e!==e&&t!==t)}function c(e,t,n,r,i){var o=r.inputs,a;if(1===o.length){var c=s;return o=o[0],e.$watch(function e(t){var n=o(t);return s(n,c)||(a=r(t,void 0,void 0,[n]),c=n&&kn(n)),a},t,n,i)}for(var u=[],l=[],f=0,d=o.length;f<d;f++)u[f]=s,l[f]=null;return e.$watch(function e(t){for(var n=!1,i=0,c=o.length;i<c;i++){var f=o[i](t);(n||(n=!s(f,u[i])))&&(l[i]=f,u[i]=f&&kn(f))}return n&&(a=r(t,void 0,void 0,l)),a},t,n,i)}function u(e,t,n,r,i){function o(e){return r(e)}function a(e,n,r){u=e,S(t)&&t(e,n,r),y(e)&&r.$$postDigest(function(){y(u)&&s()})}var s,u;return s=r.inputs?c(e,a,n,r,i):e.$watch(o,a,n)}function l(e,t,n,i){function o(e){var t=!0;return r(e,function(e){y(e)||(t=!1)}),t}var a,s;return a=e.$watch(function e(t){return i(t)},function e(n,r,i){s=n,S(t)&&t(n,r,i),o(n)&&i.$$postDigest(function(){o(s)&&a()})},n)}function f(e,t,n,r){var i=e.$watch(function e(t){return i(),r(t)},t,n);return i}function d(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==l&&n!==u,o=i?function n(i,o,a,s){var c=r&&s?s[0]:e(i,o,a,s);return t(c,i,o)}:function n(r,i,o,a){var s=e(r,i,o,a),c=t(s,r,i);return y(s)?c:s};return r=!e.inputs,e.$$watchDelegate&&e.$$watchDelegate!==c?(o.$$watchDelegate=e.$$watchDelegate,o.inputs=e.inputs):t.$stateful||(o.$$watchDelegate=c,o.inputs=e.inputs?e.inputs:[e]),o}var p=vi().noUnsafeEval,m={csp:p,literals:U(t),isIdentifierStart:S(n)&&n,isIdentifierContinue:S(i)&&i};return a}]}function Sn(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return Mn(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return y(t)?(e=t,this):e}}function Cn(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return Mn(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return y(t)?(e=t,this):e}}function Mn(e,n,i){function o(){return new a}function a(){var e=this.promise=new s;this.resolve=function(t){d(e,t)},this.reject=function(t){p(e,t)},this.notify=function(t){v(e,t)}}function s(){this.$$state={status:0}}function c(t){var n,r,o;o=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var a=0,s=o.length;a<s;++a){t.pur=!0,r=o[a][0],n=o[a][t.status];try{S(n)?d(r,n(t.value)):1===t.status?d(r,t.value):p(r,t.value)}catch(e){p(r,e)}}}finally{--E,i&&0===E&&e(l)}}function l(){for(;!E&&A.length;){var e=A.shift();if(!e.pur){e.pur=!0;var t="Possibly unhandled rejection: "+_e(e.value);e.value instanceof Error?n(e.value,t):n(t)}}}function f(t){!i||t.pending||2!==t.status||t.pur||(0===E&&0===A.length&&e(l),A.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++E,e(function(){c(t)}))}function d(e,t){e.$$state.status||(t===e?m(e,M("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):h(e,t))}function h(e,t){function n(t){a||(a=!0,h(e,t))}function r(t){a||(a=!0,m(e,t))}function i(t){v(e,t)}var o,a=!1;try{(b(t)||S(t))&&(o=t.then),S(o)?(e.$$state.status=-1,o.call(t,n,r,i)):(e.$$state.value=t,e.$$state.status=1,f(e.$$state))}catch(e){r(e)}}function p(e,t){e.$$state.status||m(e,t)}function m(e,t){e.$$state.value=t,e.$$state.status=2,f(e.$$state)}function v(t,r){var i=t.$$state.pending;t.$$state.status<=0&&i&&i.length&&e(function(){for(var e,t,o=0,a=i.length;o<a;o++){t=i[o][0],e=i[o][3];try{v(t,S(e)?e(r):r)}catch(e){n(e)}}})}function y(e){var t=new s;return p(t,e),t}function w(e,t,n){var r=null;try{S(n)&&(r=n())}catch(e){return y(e)}return P(r)?r.then(function(){return t(e)},y):t(e)}function _(e,t,n,r){var i=new s;return d(i,e),i.then(t,n,r)}function k(e){var t=new s,n=0,i=di(e)?[]:{};return r(e,function(e,r){n++,_(e).then(function(e){i[r]=e,--n||d(t,i)},function(e){p(t,e)})}),0===n&&d(t,i),t}function x(e){var t=o();return r(e,function(e){_(e).then(t.resolve,t.reject)}),t.promise}function C(e){function t(e){d(r,e)}function n(e){p(r,e)}if(!S(e))throw M("norslvr","Expected resolverFn, got '{0}'",e);var r=new s;return e(t,n),r}var M=t("$q",TypeError),E=0,A=[];u(s.prototype,{then:function(e,t,n){if(g(e)&&g(t)&&g(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&f(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return w(t,I,e)},function(t){return w(t,y,e)},t)}});var I=_;return C.prototype=s.prototype,C.defer=o,C.reject=y,C.when=_,C.resolve=I,C.all=k,C.race=x,C}function En(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function An(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,o=t("$rootScope"),s=null,c=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,u,l){function f(e){e.currentScope.$$destroyed=!0}function d(e){9===Qr&&(e.$$childHead&&d(e.$$childHead),e.$$nextSibling&&d(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function p(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(C.$$phase)throw o("inprog","{0} already in progress",C.$$phase);C.$$phase=e}function v(){C.$$phase=null}function y(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function w(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function _(){}function k(){for(;A.length;)try{A.shift()()}catch(e){t(e)}c=null}function x(){null===c&&(c=l.defer(function(){C.$apply(k)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",f),r},$watch:function(e,t,n,r){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,a=o.$$watchers,c={fn:t,last:_,get:i,exp:r||e,eq:!!n};return s=null,S(t)||(c.fn=h),a||(a=o.$$watchers=[],a.$$digestWatchIndex=-1),a.unshift(c),a.$$digestWatchIndex++,y(this,1),function e(){var t=B(a,c);t>=0&&(y(o,-1),t<a.$$digestWatchIndex&&a.$$digestWatchIndex--),s=null}},$watchGroup:function(e,t){function n(){c=!1,u?(u=!1,t(o,o,s)):t(o,i,s)}var i=new Array(e.length),o=new Array(e.length),a=[],s=this,c=!1,u=!0;if(!e.length){var l=!0;return s.$evalAsync(function(){l&&t(o,o,s)}),function e(){l=!1}}return 1===e.length?this.$watch(e[0],function e(n,r,a){o[0]=n,i[0]=r,t(o,n===r?o:i,a)}):(r(e,function(e,t){var r=s.$watch(e,function e(r,a){o[t]=r,i[t]=a,c||(c=!0,s.$evalAsync(n))});a.push(r)}),function e(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function r(e){a=e;var t,r,i,o,c;if(!g(a)){if(b(a))if(n(a)){s!==h&&(s=h,v=s.length=0,f++),t=a.length,v!==t&&(f++,s.length=v=t);for(var u=0;u<t;u++)c=s[u],o=a[u],(i=c!==c&&o!==o)||c===o||(f++,s[u]=o)}else{s!==p&&(s=p={},v=0,f++),t=0;for(r in a)Kr.call(a,r)&&(t++,o=a[r],c=s[r],r in s?(i=c!==c&&o!==o)||c===o||(f++,s[r]=o):(v++,s[r]=o,f++));if(v>t){f++;for(r in s)Kr.call(a,r)||(v--,delete s[r])}}else s!==a&&(s=a,f++);return f}}function i(){if(m?(m=!1,t(a,a,o)):t(a,c,o),l)if(b(a))if(n(a)){c=new Array(a.length);for(var e=0;e<a.length;e++)c[e]=a[e]}else{c={};for(var r in a)Kr.call(a,r)&&(c[r]=a[r])}else c=a}r.$stateful=!0;var o=this,a,s,c,l=t.length>1,f=0,d=u(e,r),h=[],p={},m=!0,v=0;return this.$watch(d,i)},$digest:function(){var e,n,r,a,u,f,d,h=i,p,g,y=this,b=[],w,x;m("$digest"),l.$$checkUrlChange(),this===C&&null!==c&&(l.defer.cancel(c),k()),s=null;do{d=!1,g=y;for(var A=0;A<M.length;A++){try{x=M[A],x.scope.$eval(x.expression,x.locals)}catch(e){t(e)}s=null}M.length=0;e:do{if(f=g.$$watchers)for(f.$$digestWatchIndex=f.length;f.$$digestWatchIndex--;)try{if(e=f[f.$$digestWatchIndex])if(u=e.get,(n=u(g))===(r=e.last)||(e.eq?V(n,r):fi(n)&&fi(r))){if(e===s){d=!1;break e}}else d=!0,s=e,e.last=e.eq?U(n,null):n,a=e.fn,a(n,r===_?n:r,g),h<5&&(w=4-h,b[w]||(b[w]=[]),b[w].push({msg:S(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(e){t(e)}if(!(p=g.$$watchersCount&&g.$$childHead||g!==y&&g.$$nextSibling))for(;g!==y&&!(p=g.$$nextSibling);)g=g.$parent}while(g=p);if((d||M.length)&&!h--)throw v(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,b)}while(d||M.length);for(v();I<E.length;)try{E[I++]()}catch(e){t(e)}E.length=I=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===C&&l.$$applicationDestroyed(),y(this,-this.$$watchersCount);for(var t in this.$$listenerCount)w(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$$nextSibling=null,d(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){C.$$phase||M.length||l.defer(function(){M.length&&C.$digest()}),M.push({scope:this,expression:u(e),locals:t})},$$postDigest:function(e){E.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{v()}}catch(e){t(e)}finally{try{C.$digest()}catch(e){throw t(e),e}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&A.push(t),e=u(e),x()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,w(i,1,e))}},$emit:function(e,n){var r=[],i,o=this,a=!1,s={name:e,targetScope:o,stopPropagation:function(){a=!0},preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1},c=H([s],arguments,1),u,l;do{for(i=o.$$listeners[e]||r,s.currentScope=o,u=0,l=i.length;u<l;u++)if(i[u])try{i[u].apply(null,c)}catch(e){t(e)}else i.splice(u,1),u--,l--;if(a)return s.currentScope=null,s;o=o.$parent}while(o);return s.currentScope=null,s},$broadcast:function(e,n){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s=H([a],arguments,1),c,u,l;i=o;){for(a.currentScope=i,c=i.$$listeners[e]||[],u=0,l=c.length;u<l;u++)if(c[u])try{c[u].apply(null,s)}catch(e){t(e)}else c.splice(u,1),u--,l--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var C=new p,M=C.$$asyncQueue=[],E=C.$$postDigestQueue=[],A=C.$$applyAsyncQueue=[],I=0;return C}]}function In(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return y(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return y(e)?(t=e,this):t},this.$get=function(){return function n(r,i){var o=i?t:e,a;return a=Bn(r).href,""===a||a.match(o)?r:"unsafe:"+a}}}function On(e){return e.replace(No,Ce)}function Dn(e){if("self"===e)return e;if(_(e)){if(e.indexOf("***")>-1)throw Ro("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=mi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(C(e))return new RegExp("^"+e.source+"$");throw Ro("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Pn(e){var t=[];return y(e)&&r(e,function(e){t.push(Dn(e))}),t}function Tn(){this.SCE_CONTEXTS=Fo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Pn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Pn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Un(t):!!e.exec(t.href)}function i(n){var i=Bn(n.toString()),o,a,s=!1;for(o=0,a=e.length;o<a;o++)if(r(e[o],i)){s=!0;break}if(s)for(o=0,a=t.length;o<a;o++)if(r(t[o],i)){s=!1;break}return s}function o(e){var t=function e(t){this.$$unwrapTrustedValue=function(){return t}};return e&&(t.prototype=new e),t.prototype.valueOf=function e(){return this.$$unwrapTrustedValue()},t.prototype.toString=function e(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=f.hasOwnProperty(e)?f[e]:null;if(!n)throw Ro("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||g(t)||""===t)return t;if("string"!=typeof t)throw Ro("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof l?e.$$unwrapTrustedValue():e}function c(e,t){if(null===t||g(t)||""===t)return t;var n=f.hasOwnProperty(e)?f[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Fo.RESOURCE_URL){if(i(t))return t;throw Ro("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Fo.HTML)return u(t);throw Ro("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function e(t){throw Ro("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var l=o(),f={};return f[Fo.HTML]=o(l),f[Fo.CSS]=o(l),f[Fo.URL]=o(l),f[Fo.JS]=o(l),f[Fo.RESOURCE_URL]=o(f[Fo.URL]),{trustAs:a,getTrusted:c,valueOf:s}}]}function jn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&Qr<8)throw Ro("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=be(Fo);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=p),i.parseAs=function e(n,r){var o=t(r);return o.literal&&o.constant?o:t(r,function(e){return i.getTrusted(n,e)})};var o=i.parseAs,a=i.getTrusted,s=i.trustAs;return r(Fo,function(e,t){var n=Gr(t);i[On("parse_as_"+n)]=function(t){return o(e,t)},i[On("get_trusted_"+n)]=function(t){return a(e,t)},i[On("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function Rn(){this.$get=["$window","$document",function(e,t){var n={},r=e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),i=!r&&e.history&&e.history.pushState,o=f((/android (\d+)/.exec(Gr((e.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=s.body&&s.body.style,u=!1,l=!1;return c&&(u=!!("transition"in c||"webkitTransition"in c),l=!!("animation"in c||"webkitAnimation"in c)),{history:!(!i||o<4||a),hasEvent:function(e){if("input"===e&&Qr)return!1;if(g(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:vi(),transitions:u,animations:l,android:o}}]}function Fn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,o){function a(s,c){function l(e){return c||(e=Lo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}a.totalPendingRequests++,_(s)&&!g(n.get(s))||(s=o.getTrustedResourceUrl(s));var f=r.defaults&&r.defaults.transformResponse;return di(f)?f=f.filter(function(e){return e!==Rt}):f===Rt&&(f=null),r.get(s,u({cache:n,transformResponse:f},e)).finally(function(){a.totalPendingRequests--}).then(function(e){return n.put(s,e.data),e.data},l)}return a.totalPendingRequests=0,a}]}function Nn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),o=[];return r(i,function(e){var i=ci.element(e).data("$binding");i&&r(i,function(r){if(n){new RegExp("(^|\\s)"+mi(t)+"(\\s|\\||$)").test(r)&&o.push(e)}else-1!==r.indexOf(t)&&o.push(e)})}),o},i.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function Ln(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,c){S(o)||(c=s,s=o,o=h);var u=z(arguments,3),l=y(c)&&!c,f=(l?r:n).defer(),d=f.promise,p;return p=t.defer(function(){try{f.resolve(o.apply(null,u))}catch(e){f.reject(e),i(e)}finally{delete a[d.$$timeoutId]}l||e.$apply()},s),d.$$timeoutId=p,a[p]=f,d}var a={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].promise.catch(h),a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function Bn(e){var t=e;return Qr&&(Bo.setAttribute("href",t),t=Bo.href),Bo.setAttribute("href",t),{href:Bo.href,protocol:Bo.protocol?Bo.protocol.replace(/:$/,""):"",host:Bo.host,search:Bo.search?Bo.search.replace(/^\?/,""):"",hash:Bo.hash?Bo.hash.replace(/^#/,""):"",hostname:Bo.hostname,port:Bo.port,pathname:"/"===Bo.pathname.charAt(0)?Bo.pathname:"/"+Bo.pathname}}function Un(e){var t=_(e)?Bn(e):e;return t.protocol===Uo.protocol&&t.host===Uo.host}function Vn(){this.$get=m(e)}function Hn(e){function t(e){try{return e.cookie||""}catch(e){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,c,u,l=t(r);if(l!==o)for(o=l,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],(c=a.indexOf("="))>0&&(u=n(a.substring(0,c)),g(i[u])&&(i[u]=n(a.substring(c+1))));return i}}function zn(){this.$get=Hn}function qn(e){function t(i,o){if(b(i)){var a={};return r(i,function(e,n){a[n]=t(n,e)}),a}return e.factory(i+n,o)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Yn),t("date",fr),t("filter",Wn),t("json",dr),t("limitTo",hr),t("lowercase",Ko),t("number",Zn),t("orderBy",mr),t("uppercase",Go)}function Wn(){return function(e,r,i,o){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a=Gn(r),s,c;switch(a){case"function":s=r;break;case"boolean":case"null":case"number":case"string":c=!0;case"object":s=Jn(r,i,o,c);break;default:return e}return Array.prototype.filter.call(e,s)}}function Jn(e,t,n,r){var i=b(e)&&n in e,o;return!0===t?t=V:S(t)||(t=function(e,t){return!g(e)&&(null===e||null===t?e===t:!(b(t)||b(e)&&!v(e))&&(e=Gr(""+e),t=Gr(""+t),-1!==e.indexOf(t)))}),o=function(o){return i&&!b(o)?Kn(o,e[n],t,n,!1):Kn(o,e,t,n,r)}}function Kn(e,t,n,r,i,o){var a=Gn(e),s=Gn(t);if("string"===s&&"!"===t.charAt(0))return!Kn(e,t.substring(1),n,r,i);if(di(e))return e.some(function(e){return Kn(e,t,n,r,i)});switch(a){case"object":var c;if(i){for(c in e)if("$"!==c.charAt(0)&&Kn(e[c],t,n,r,!0))return!0;return!o&&Kn(e,t,n,r,!1)}if("object"===s){for(c in t){var u=t[c];if(!S(u)&&!g(u)){var l=c===r;if(!Kn(l?e:e[c],u,n,r,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Gn(e){return null===e?"null":typeof e}function Yn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return g(n)&&(n=t.CURRENCY_SYM),g(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:er(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Zn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:er(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Xn(e){var t=0,n,r,i,o,a;for((r=e.indexOf(Ho))>-1&&(e=e.replace(Ho,"")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;e.charAt(i)===zo;i++);if(i===(a=e.length))n=[0],r=1;else{for(a--;e.charAt(a)===zo;)a--;for(r-=i,n=[],o=0;i<=a;i++,o++)n[o]=+e.charAt(i)}return r>Vo&&(n=n.splice(0,Vo-1),t=r-1,r=1),{d:n,e:t,i:r}}function Qn(e,t,n,r){var i=e.d,o=i.length-e.i;t=g(t)?Math.min(Math.max(n,o),r):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var c=a;c<i.length;c++)i[c]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var u=1;u<a;u++)i[u]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var f=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);f&&(i.unshift(f),e.i++)}function er(e,t,n,r,i){if(!_(e)&&!k(e)||isNaN(e))return"";var o=!isFinite(e),a=!1,s=Math.abs(e)+"",c="",u;if(o)c="";else{u=Xn(s),Qn(u,i,t.minFrac,t.maxFrac);var l=u.d,f=u.i,d=u.e,h=[];for(a=l.reduce(function(e,t){return e&&!t},!0);f<0;)l.unshift(0),f++;f>0?h=l.splice(f,l.length):(h=l,l=[0]);var p=[];for(l.length>=t.lgSize&&p.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)p.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&p.unshift(l.join("")),c=p.join(n),h.length&&(c+=r+h.join("")),d&&(c+="e+"+d)}return e<0&&!a?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function tr(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=zo+e;return n&&(e=e.substr(e.length-t)),i+e}function nr(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),tr(a,t,r,i)}}function rr(e,t,n){return function(r,i){var o=r["get"+e]();return i[Yr((n?"STANDALONE":"")+(t?"SHORT":"")+e)][o]}}function ir(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=tr(Math[r>0?"floor":"ceil"](r/60),2)+tr(Math.abs(r%60),2)}function or(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function ar(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function sr(e){return function(t){var n=or(t.getFullYear()),r=ar(t),i=+r-+n;return tr(1+Math.round(i/6048e5),e)}}function cr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function ur(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function lr(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function fr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=f(t[9]+t[10]),o=f(t[9]+t[11])),a.call(r,f(t[1]),f(t[2])-1,f(t[3]));var c=f(t[4]||0)-i,u=f(t[5]||0)-o,l=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,c,u,l,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,o){var a="",s=[],c,u;if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,_(n)&&(n=Jo.test(n)?f(n):t(n)),k(n)&&(n=new Date(n)),!x(n)||!isFinite(n.getTime()))return n;for(;i;)u=Wo.exec(i),u?(s=H(s,u,1),i=s.pop()):(s.push(i),i=null);var l=n.getTimezoneOffset();return o&&(l=G(o,l),n=Z(n,o,!0)),r(s,function(t){c=qo[t],a+=c?c(n,e.DATETIME_FORMATS,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function dr(){return function(e,t){return g(t)&&(t=2),J(e,t)}}function hr(){return function(e,t,r){return t=Math.abs(Number(t))===1/0?Number(t):f(t),fi(t)?e:(k(e)&&(e=e.toString()),n(e)?(r=!r||isNaN(r)?0:f(r),r=r<0?Math.max(0,e.length+r):r,t>=0?pr(e,r,r+t):0===r?pr(e,t,e.length):pr(e,Math.max(0,r+t),r)):e)}}function pr(e,t,n){return _(e)?e.slice(t,n):ni.call(e,t,n)}function mr(e){function r(t){return t.map(function(t){var n=1,r=p;if(S(t))r=t;else if(_(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return S(e.valueOf)&&(e=e.valueOf(),i(e))?e:(v(e)&&(e=e.toString(),i(e)),e)}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(b(o)&&(o=e.index),b(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}return function(e,i,o,c){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:f.map(function(n){return a(n.get(e),t)})}}function l(e,t){for(var n=0,r=f.length;n<r;n++){var i=h(e.predicateValues[n],t.predicateValues[n]);if(i)return i*f[n].descending*d}return h(e.tieBreaker,t.tieBreaker)*d}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);di(i)||(i=[i]),0===i.length&&(i=["+"]);var f=r(i),d=o?-1:1,h=S(c)?c:s,p=Array.prototype.map.call(e,u);return p.sort(l),e=p.map(function(e){return e.value})}}function vr(e){return S(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function gr(e,t){e.$name=t}function yr(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Xo,this.$$element=e,this.$$animate=r,$r(this)}function $r(e){e.$$classCache={},e.$$classCache[Ra]=!(e.$$classCache[ja]=e.$$element.hasClass(ja))}function br(e){function t(e,t,n,r){e[t]||(e[t]={}),a(e[t],n,r)}function n(e,t,n,r){e[t]&&s(e[t],n,r),wr(e[t])&&(e[t]=void 0)}function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+le(t,"-"):"",r(e,ja+t,!0===n),r(e,Ra+t,!1===n)}var o=e.clazz,a=e.set,s=e.unset;o.prototype.$setValidity=function(e,o,c){g(o)?t(this,"$pending",e,c):n(this,"$pending",e,c),D(o)?o?(s(this.$error,e,c),a(this.$$success,e,c)):(a(this.$error,e,c),s(this.$$success,e,c)):(s(this.$error,e,c),s(this.$$success,e,c)),this.$pending?(r(this,Qo,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,Qo,!1),this.$valid=wr(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var u;u=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null),i(this,e,u),this.$$parentForm.$setValidity(e,u,this)}}function wr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function _r(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function kr(e,t,n,r,i,o){xr(e,t,n,r,i,o),_r(r)}function xr(e,t,n,r,i,o){var a=Gr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,u()})}var c,u=function(e){if(c&&(o.defer.cancel(c),c=null),!s){var i=t.val(),u=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=pi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var l=function(e,t,n){c||(c=o.defer(function(){c=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||l(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",l)}t.on("change",u),pa[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(ha,function(e){if(!c){var t=this[Jr],n=t.badInput,r=t.typeMismatch;c=o.defer(function(){c=null,t.badInput===n&&t.typeMismatch===r||u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Sr(e,t){if(x(e))return e;if(_(e)){la.lastIndex=0;var n=la.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,c=0,u=or(r),l=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,o,a,s,c)}}return NaN}function Cr(e,t){return function(n,i){var o,a;if(x(n))return n;if(_(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ia.test(n))return new Date(n);if(e.lastIndex=0,
o=e.exec(n))return o.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(o,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Mr(e,t,n,r){return function i(o,a,s,c,u,l,f){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function h(e){return y(e)&&!x(e)?n(e)||void 0:e}Er(o,a,s,c),xr(o,a,s,c,u,l);var p=c&&c.$options.getOption("timezone"),m;if(c.$$parserName=e,c.$parsers.push(function(e){if(c.$isEmpty(e))return null;if(t.test(e)){var r=n(e,m);return p&&(r=Z(r,p)),r}}),c.$formatters.push(function(e){if(e&&!x(e))throw Ha("datefmt","Expected `{0}` to be a date",e);return d(e)?(m=e,m&&p&&(m=Z(m,p,!0)),f("date")(e,r,p)):(m=null,"")}),y(s.min)||s.ngMin){var v;c.$validators.min=function(e){return!d(e)||g(v)||n(e)>=v},s.$observe("min",function(e){v=h(e),c.$validate()})}if(y(s.max)||s.ngMax){var b;c.$validators.max=function(e){return!d(e)||g(b)||n(e)<=b},s.$observe("max",function(e){b=h(e),c.$validate()})}}}function Er(e,t,n,r){var i=t[0];(r.$$hasNativeValidators=b(i.validity))&&r.$parsers.push(function(e){var n=t.prop(Jr)||{};return n.badInput||n.typeMismatch?void 0:e})}function Ar(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:sa.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!k(t))throw Ha("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function Ir(e){return y(e)&&!k(e)&&(e=parseFloat(e)),fi(e)?void 0:e}function Or(e){return(0|e)===e}function Dr(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Pr(e,t,n){var r=Number(e);if(!Or(r)||!Or(t)||!Or(n)){var i=Math.max(Dr(r),Dr(t),Dr(n)),o=Math.pow(10,i);r*=o,t*=o,n*=o}return(r-t)%n==0}function Tr(e,t,n,r,i,o){Er(e,t,n,r),Ar(r),xr(e,t,n,r,i,o);var a,s;if((y(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||g(a)||e>=a},n.$observe("min",function(e){a=Ir(e),r.$validate()})),(y(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||g(s)||e<=s},n.$observe("max",function(e){s=Ir(e),r.$validate()})),y(n.step)||n.ngStep){var c;r.$validators.step=function(e,t){return r.$isEmpty(t)||g(c)||Pr(t,a||0,c)},n.$observe("step",function(e){c=Ir(e),r.$validate()})}}function jr(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(f=Ir(e),!fi(r.$modelValue))if(l){var n=t.val();f>n&&(n=f,t.val(n)),r.$setViewValue(n)}else r.$validate()}function c(e){if(d=Ir(e),!fi(r.$modelValue))if(l){var n=t.val();d<n&&(t.val(d),n=d<f?f:d),r.$setViewValue(n)}else r.$validate()}function u(e){h=Ir(e),fi(r.$modelValue)||(l&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}Er(e,t,n,r),Ar(r),xr(e,t,n,r,i,o);var l=r.$$hasNativeValidators&&"range"===t[0].type,f=l?0:void 0,d=l?100:void 0,h=l?1:void 0,p=t[0].validity,m=y(n.min),v=y(n.max),b=y(n.step),w=r.$render;r.$render=l&&y(p.rangeUnderflow)&&y(p.rangeOverflow)?function e(){w(),r.$setViewValue(t.val())}:w,m&&(r.$validators.min=l?function e(){return!0}:function e(t,n){return r.$isEmpty(n)||g(f)||n>=f},a("min",s)),v&&(r.$validators.max=l?function e(){return!0}:function e(t,n){return r.$isEmpty(n)||g(d)||n<=d},a("max",c)),b&&(r.$validators.step=l?function e(){return!p.stepMismatch}:function e(t,n){return r.$isEmpty(n)||g(h)||Pr(n,f||0,h)},a("step",u))}function Rr(e,t,n,r,i,o){xr(e,t,n,r,i,o),_r(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||oa.test(n)}}function Fr(e,t,n,r,i,o){xr(e,t,n,r,i,o),_r(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||aa.test(n)}}function Nr(e,t,n,r){var i=!n.ngTrim||"false"!==pi(n.ngTrim);g(n.name)&&t.attr("name",a());var o=function(e){var o;t[0].checked&&(o=n.value,i&&(o=pi(o)),r.$setViewValue(o,e&&e.type))};t.on("click",o),r.$render=function(){var e=n.value;i&&(e=pi(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Lr(e,t,n,r,i){var o;if(y(r)){if(o=e(r),!o.constant)throw Ha("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function Br(e,t,n,r,i,o,a,s){var c=Lr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Lr(s,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push(function(e){return V(e,c)}),r.$parsers.push(function(e){return e?c:u})}function Ur(e,t){function n(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function i(e){return e&&e.split(" ")}function o(e){var t=e;return di(e)?t=e.map(o).join(" "):b(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function a(e){var t=e;if(di(e))t=e.map(a);else if(b(e)){var n=!1;t=Object.keys(e).filter(function(t){var r=e[t];return!n&&g(r)&&(n=!0),r}),n&&t.push(void 0)}return t}e="ngClass"+e;var s;return["$parse",function(c){return{restrict:"AC",link:function(u,l,f){function d(e){e=m(i(e),1),f.$addClass(e)}function h(e){e=m(i(e),-1),f.$removeClass(e)}function p(e,t){var r=i(e),o=i(t),a=n(r,o),s=n(o,r),c=m(a,-1),u=m(s,1);f.$addClass(u),f.$removeClass(c)}function m(e,t){var n=[];return r(e,function(e){(t>0||S[e])&&(S[e]=(S[e]||0)+t,S[e]===+(t>0)&&n.push(e))}),n.join(" ")}function v(e){e===t?d(M):h(M),C=e}function g(e){var t=o(e);t!==M&&y(t)}function y(e){C===t&&p(M,e),M=e}var b=f[e].trim(),w=":"===b.charAt(0)&&":"===b.charAt(1),_=w?a:o,k=c(b,_),x=w?g:y,S=l.data("$classCounts"),C=!0,M;S||(S=ge(),l.data("$classCounts",S)),"ngClass"!==e&&(s||(s=c("$index",function e(t){return 1&t})),u.$watch(s,v)),u.$watch(k,x,w)}}}]}function Vr(e,t,n,r,i,o,a,s,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=Xo,this.$options=qa,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,this.$$scope=e,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,$r(this),Hr(this)}function Hr(e){e.$$scope.$watch(function t(){var n=e.$$ngModelGet(e.$$scope);if(n!==e.$modelValue&&(e.$modelValue===e.$modelValue||n===n)){e.$modelValue=e.$$rawModelValue=n,e.$$parserValid=void 0;for(var r=e.$formatters,i=r.length,o=n;i--;)o=r[i](o);e.$viewValue!==o&&(e.$$updateEmptyClasses(o),e.$viewValue=e.$$lastCommittedViewValue=o,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,h))}return n})}function zr(e){this.$$options=e}function qr(e,t){r(t,function(t,n){y(e[n])||(e[n]=t)})}var Wr=/^\/(.+)\/([a-z]*)$/,Jr="validity",Kr=Object.prototype.hasOwnProperty,Gr=function(e){return _(e)?e.toLowerCase():e},Yr=function(e){return _(e)?e.toUpperCase():e},Zr=function(e){return _(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Xr=function(e){return _(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Gr=Zr,Yr=Xr);var Qr,ei,ti,ni=[].slice,ri=[].splice,ii=[].push,oi=Object.prototype.toString,ai=Object.getPrototypeOf,si=t("ng"),ci=e.angular||(e.angular={}),ui,li=0;Qr=e.document.documentMode;var fi=Number.isNaN||function e(t){return t!==t};h.$inject=[],p.$inject=[];var di=Array.isArray,hi=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,pi=function(e){return _(e)?e.trim():e},mi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},vi=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!y(vi.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");vi.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else vi.rules={noUnsafeEval:t(),noInlineStyle:!1}}return vi.rules},gi=function(){if(y(gi.name_))return gi.name_;var t,n,r=$i.length,i,o;for(n=0;n<r;++n)if(i=$i[n],t=e.document.querySelector("["+i.replace(":","\\:")+"jq]")){o=t.getAttribute(i+"jq");break}return gi.name_=o},yi=/:/g,$i=["ng-","data-ng-","ng:","x-ng-"],bi=oe(e.document),wi=/[A-Z]/g,_i=!1,ki=1,xi=2,Si=3,Ci=8,Mi=9,Ei=11,Ai={full:"1.6.1",major:1,minor:6,dot:1,codeName:"promise-rectification"};je.expando="ng339";var Ii=je.cache={},Oi=1;je._data=function(e){return this.cache[e[this.expando]]||{}};var Di=/-([a-z])/g,Pi=/^-ms-/,Ti={mouseleave:"mouseout",mouseenter:"mouseover"},ji=t("jqLite"),Ri=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Fi=/<|&#?\w+;/,Ni=/<([\w:-]+)/,Li=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Bi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Bi.optgroup=Bi.option,Bi.tbody=Bi.tfoot=Bi.colgroup=Bi.caption=Bi.thead,Bi.th=Bi.td;var Ui=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Vi=je.prototype={ready:Ze,toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return ei(e>=0?this[e]:this[this.length+e])},length:0,push:ii,sort:[].sort,splice:[].splice},Hi={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Hi[Gr(e)]=e});var zi={};r("input,select,option,textarea,button,form,details".split(","),function(e){zi[e]=!0});var qi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};r({data:Ue,removeData:Le,hasData:Ie,cleanData:Oe},function(e,t){je[t]=e}),r({data:Ue,inheritedData:Je,scope:function(e){return ei.data(e,"$scope")||Je(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ei.data(e,"$isolateScope")||ei.data(e,"$isolateScopeNoTemplate")},controller:We,injector:function(e){return Je(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ve,css:function(e,t,n){if(t=Se(t),!y(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==Si&&2!==i&&i!==Ci&&e.getAttribute){var o=Gr(t),a=Hi[o];if(!y(n))return r=e.getAttribute(t),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)}},prop:function(e,t,n){if(!y(n))return e[t];e[t]=n},text:function(){function e(e,t){if(g(t)){var n=e.nodeType;return n===ki||n===Si?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(g(t)){if(e.multiple&&"select"===N(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(g(t))return e.innerHTML;Fe(e,!0),e.innerHTML=t},empty:Ke},function(e,t){je.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ke&&g(2===e.length&&e!==Ve&&e!==We?t:n)){if(b(t)){for(r=0;r<o;r++)if(e===Ue)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=g(a)?Math.min(o,1):o,c=0;c<s;c++){var u=e(this[c],t,n);a=a?a+u:u}return a}for(r=0;r<o;r++)e(this[r],t,n);return this}}),r({removeData:Le,on:function e(t,n,r,i){if(y(i))throw ji("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ae(t)){var o=Be(t,!0),a=o.events,s=o.handle;s||(s=o.handle=et(t,a));for(var c=n.indexOf(" ")>=0?n.split(" "):[n],u=c.length,l=function(e,n,i){var o=a[e];o||(o=a[e]=[],o.specialHandlerWrapper=n,"$destroy"===e||i||t.addEventListener(e,s)),o.push(r)};u--;)n=c[u],Ti[n]?(l(Ti[n],nt),l(n,void 0,!0)):l(n)}},off:Ne,one:function(e,t,n){e=ei(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;Fe(e),r(new je(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===ki&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===ki||n===Ei){t=new je(t);for(var r=0,i=t.length;r<i;r++){var o=t[r];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===ki){var n=e.firstChild;r(new je(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Te(e,ei(t).eq(0).clone()[0])},remove:Ge,detach:function(e){Ge(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r){t=new je(t);for(var i=0,o=t.length;i<o;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}}},addClass:ze,removeClass:He,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;g(r)&&(r=!Ve(e,t)),(r?ze:He)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ei?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Re,triggerHandler:function(e,t,n){var i,o,a,s=t.type||t,c=Be(e),l=c&&c.events,f=l&&l[s];f&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:h,type:s,target:e},t.type&&(i=u(i,t)),o=be(f),a=n?[i].concat(n):[i],r(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){je.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;o<a;o++)g(i)?(i=e(this[o],t,n,r),y(i)&&(i=ei(i))):qe(i,e(this[o],t,n,r));return y(i)?i:this}}),je.prototype.bind=je.prototype.on,je.prototype.unbind=je.prototype.off,ot.prototype={put:function(e,t){this[it(e,this.nextUid)]=t},get:function(e){return this[it(e,this.nextUid)]},remove:function(e){var t=this[e=it(e,this.nextUid)];return delete this[e],t}};var Wi=[function(){this.$get=[function(){return ot}]}],Ji=/^([^(]+?)=>/,Ki=/^[^(]*\(\s*([^)]*)\)/m,Gi=/,/,Yi=/^\s*(_?)(\S+?)\1\s*$/,Zi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Xi=t("$injector");lt.$$annotate=ut;var Qi=t("$animate"),eo=1,to="ng-animate",no=function(){this.$get=h},ro=function(){var e=new ot,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function o(e,t,n){var i=!1;return t&&(t=_(t)?t.split(" "):di(t)?t:[],r(t,function(t){t&&(i=!0,e[t]=n)})),i}function a(){r(t,function(t){var n=e.get(t);if(n){var i=pt(t.attr("class")),o="",a="";r(n,function(e,t){e!==!!i[t]&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),r(t,function(e){o&&ze(e,o),a&&He(e,a)}),e.remove(t)}}),t.length=0}function s(n,r,s){var c=e.get(n)||{},u=o(c,r,!0),l=o(c,s,!1);(u||l)&&(e.put(n,c),t.push(n),1===t.length&&i.$$postDigest(a))}return{enabled:h,on:h,off:h,pin:h,push:function(e,t,r,i){i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},io=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Qi("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){if(new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString()))throw Qi("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=ht(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&ei(r),i=i&&ei(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",mt(o))},move:function(n,r,i,o){return r=r&&ei(r),i=i&&ei(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",mt(o))},leave:function(t,n){return e.push(t,"leave",mt(n),function(){t.remove()})},addClass:function(t,n,r){return r=mt(r),r.addClass=dt(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=mt(r),r.removeClass=dt(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=mt(i),i.addClass=dt(i.addClass,n),i.removeClass=dt(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=mt(o),o.from=o.from?u(o.from,n):n,o.to=o.to?u(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=dt(o.tempClasses,i),e.push(t,"animate",o)}}}]}],oo=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},ao=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,i,o){function a(e){this.setHost(e);var t=n(),r=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){i()?r(e):t(e)},this._state=0}var s=0,c=1,u=2;return a.chain=function(e,t){function n(){if(r===e.length)return void t(!0);e[r](function(e){if(!1===e)return void t(!1);r++,n()})}var r=0;n()},a.all=function(e,t){function n(n){o=o&&n,++i===e.length&&t(o)}var i=0,o=!0;r(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:h,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(e){2!==this._state&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},a}]},so=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||c.complete(),s=!0}),c}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=U(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,c=new n;return{start:i,end:i}}}]},co=t("$compile"),uo=new bt;wt.$inject=["$provide","$$sanitizeUriProvider"],_t.prototype.isFirstChange=function(){return this.previousValue===uo};var lo=/^((?:x|data)[:\-_])/i,fo=/[:\-_]+(.)/g,ho=t("$controller"),po=/^(\S+)(\s+as\s+([\w$]+))?$/,mo=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof ei&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},vo="application/json",go={"Content-Type":vo+";charset=utf-8"},yo=/^\[|^\{(?!\{)/,$o={"[":/]$/,"{":/}$/},bo=/^\)]\}',?\n/,wo=t("$http"),_o=ci.$interpolateMinErr=t("$interpolate");_o.throwNoconcat=function(e){throw _o("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},_o.interr=function(e,t){return _o("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var ko=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(e){var i="_"+(n.$$counter++).toString(36),o="angular.callbacks."+i,a=t(i);return r[o]=n[i]=a,o},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},xo=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,So={http:80,https:443,ftp:21},Co=t("$location"),Mo=/^\s*[\\\/]{2,}/,Eo={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:sn("$$absUrl"),url:function(e){if(g(e))return this.$$url;var t=xo.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:sn("$$protocol"),host:sn("$$host"),port:sn("$$port"),path:cn("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(_(e)||k(e))e=e.toString(),this.$$search=ee(e);else{if(!b(e))throw Co("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:g(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:cn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([an,on,rn],function(e){e.prototype=Object.create(Eo),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==rn||!this.$$html5)throw Co("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=g(t)?null:t,this}});var Ao=t("$parse"),Io={}.constructor.prototype.valueOf,Oo=ge();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Oo[e]=!0});var Do={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Po=function e(t){this.options=t};Po.prototype={constructor:Po,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Oo[t],o=Oo[n],a=Oo[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=y(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Ao("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Gr(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=Do[o]||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var To=function e(t,n){this.lexer=t,this.options=n};To.Program="Program",To.ExpressionStatement="ExpressionStatement",To.AssignmentExpression="AssignmentExpression",To.ConditionalExpression="ConditionalExpression",To.LogicalExpression="LogicalExpression",To.BinaryExpression="BinaryExpression",To.UnaryExpression="UnaryExpression",To.CallExpression="CallExpression",To.MemberExpression="MemberExpression",To.Identifier="Identifier",To.Literal="Literal",To.ArrayExpression="ArrayExpression",To.Property="Property",To.ObjectExpression="ObjectExpression",To.ThisExpression="ThisExpression",To.LocalsExpression="LocalsExpression",To.NGValueParameter="NGValueParameter",To.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:To.Program,body:e}},expressionStatement:function(){return{type:To.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!gn(e))throw Ao("lval","Trying to assign a value to a non l-value");e={type:To.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e=this.logicalOR(),t,n;return this.expect("?")&&(t=this.expression(),this.consume(":"))?(n=this.expression(),{type:To.ConditionalExpression,test:e,alternate:t,consequent:n}):e},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:To.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:To.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e=this.relational(),t;t=this.expect("==","!=","===","!==");)e={type:To.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var e=this.additive(),t;t=this.expect("<",">","<=",">=");)e={type:To.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var e=this.multiplicative(),t;t=this.expect("+","-");)e={type:To.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var e=this.unary(),t;t=this.expect("*","/","%");)e={type:To.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:To.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=U(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:To.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:To.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:To.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:To.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:To.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:To.Identifier,name:e.text}},constant:function(){return{type:To.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:To.ArrayExpression,elements:e}},object:function(){var e=[],t;if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:To.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:To.ObjectExpression,properties:e}},throwError:function(e,t){throw Ao("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Ao("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Ao("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:To.ThisExpression},$locals:{type:To.LocalsExpression}}},wn.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},mn(n,t.$filter);var i="",o;if(this.stage="assign",o=yn(n)){this.state.computing="assign";var a=this.nextId();this.recurse(o,a),this.return_(a),
i="fn.assign="+this.generateFunction("assign","s,v,l")}var s=vn(n.body);t.stage="inputs",r(s,function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push(r),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(n);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",c)(this.$filter,fn,dn,hn);return this.state=this.stage=void 0,u.literal=$n(n),u.constant=bn(n),u},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,o,a){var s,c,u=this,l,f,d;if(i=i||h,!a&&y(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,o,!0));switch(e.type){case To.Program:r(e.body,function(t,n){u.recurse(t.expression,void 0,void 0,function(e){c=e}),n!==e.body.length-1?u.current().body.push(c,";"):u.return_(c)});break;case To.Literal:f=this.escape(e.value),this.assign(t,f),i(t||f);break;case To.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){c=e}),f=e.operator+"("+this.ifDefined(c,0)+")",this.assign(t,f),i(f);break;case To.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){c=e}),f="+"===e.operator?this.plus(s,c):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(c,0):"("+s+")"+e.operator+"("+c+")",this.assign(t,f),i(f);break;case To.LogicalExpression:t=t||this.nextId(),u.recurse(e.left,t),u.if_("&&"===e.operator?t:u.not(t),u.lazyRecurse(e.right,t)),i(t);break;case To.ConditionalExpression:t=t||this.nextId(),u.recurse(e.test,t),u.if_(t,u.lazyRecurse(e.alternate,t),u.lazyRecurse(e.consequent,t)),i(t);break;case To.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===u.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),u.if_("inputs"===u.stage||u.not(u.getHasOwnProperty("l",e.name)),function(){u.if_("inputs"===u.stage||"s",function(){o&&1!==o&&u.if_(u.isNull(u.nonComputedMember("s",e.name)),u.lazyAssign(u.nonComputedMember("s",e.name),"{}")),u.assign(t,u.nonComputedMember("s",e.name))})},t&&u.lazyAssign(t,u.nonComputedMember("l",e.name))),i(t);break;case To.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),u.recurse(e.object,s,void 0,function(){u.if_(u.notNull(s),function(){e.computed?(c=u.nextId(),u.recurse(e.property,c),u.getStringValue(c),o&&1!==o&&u.if_(u.not(u.computedMember(s,c)),u.lazyAssign(u.computedMember(s,c),"{}")),f=u.computedMember(s,c),u.assign(t,f),n&&(n.computed=!0,n.name=c)):(o&&1!==o&&u.if_(u.isNull(u.nonComputedMember(s,e.property.name)),u.lazyAssign(u.nonComputedMember(s,e.property.name),"{}")),f=u.nonComputedMember(s,e.property.name),u.assign(t,f),n&&(n.computed=!1,n.name=e.property.name))},function(){u.assign(t,"undefined")}),i(t)},!!o);break;case To.CallExpression:t=t||this.nextId(),e.filter?(c=u.filter(e.callee.name),l=[],r(e.arguments,function(e){var t=u.nextId();u.recurse(e,t),l.push(t)}),f=c+"("+l.join(",")+")",u.assign(t,f),i(t)):(c=u.nextId(),s={},l=[],u.recurse(e.callee,c,s,function(){u.if_(u.notNull(c),function(){r(e.arguments,function(t){u.recurse(t,e.constant?void 0:u.nextId(),void 0,function(e){l.push(e)})}),f=s.name?u.member(s.context,s.name,s.computed)+"("+l.join(",")+")":c+"("+l.join(",")+")",u.assign(t,f)},function(){u.assign(t,"undefined")}),i(t)}));break;case To.AssignmentExpression:c=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){u.if_(u.notNull(s.context),function(){u.recurse(e.right,c),f=u.member(s.context,s.name,s.computed)+e.operator+c,u.assign(t,f),i(t||f)})},1);break;case To.ArrayExpression:l=[],r(e.elements,function(t){u.recurse(t,e.constant?void 0:u.nextId(),void 0,function(e){l.push(e)})}),f="["+l.join(",")+"]",this.assign(t,f),i(t||f);break;case To.ObjectExpression:l=[],d=!1,r(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),r(e.properties,function(e){e.computed?(s=u.nextId(),u.recurse(e.key,s)):s=e.key.type===To.Identifier?e.key.name:""+e.key.value,c=u.nextId(),u.recurse(e.value,c),u.assign(u.member(t,s,e.computed),c)})):(r(e.properties,function(t){u.recurse(t.value,e.constant?void 0:u.nextId(),void 0,function(e){l.push(u.escape(t.key.type===To.Identifier?t.key.name:""+t.key.value)+":"+e)})}),f="{"+l.join(",")+"}",this.assign(t,f)),i(t||f);break;case To.ThisExpression:this.assign(t,"s"),i(t||"s");break;case To.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case To.NGValueParameter:this.assign(t,"v"),i(t||"v");break}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(_(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(k(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Ao("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},_n.prototype={compile:function(e){var t=this,n=this.astBuilder.ast(e);mn(n,t.$filter);var i,o;(i=yn(n))&&(o=this.recurse(i));var a=vn(n.body),s;a&&(s=[],r(a,function(e,n){var r=t.recurse(e);e.input=r,s.push(r),e.watchId=n}));var c=[];r(n.body,function(e){c.push(t.recurse(e.expression))});var u=0===n.body.length?h:1===n.body.length?c[0]:function(e,t){var n;return r(c,function(r){n=r(e,t)}),n};return o&&(u.assign=function(e,t,n){return o(e,n,t)}),s&&(u.inputs=s),u.literal=$n(n),u.constant=bn(n),u},recurse:function(e,t,n){var i,o,a=this,s;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case To.Literal:return this.value(e.value,t);case To.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case To.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case To.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case To.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case To.Identifier:return a.identifier(e.name,t,n);case To.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,n):this.nonComputedMember(i,o,t,n);case To.CallExpression:return s=[],r(e.arguments,function(e){s.push(a.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,n,r,i){for(var a=[],c=0;c<s.length;++c)a.push(s[c](e,n,r,i));var u=o.apply(void 0,a,i);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,i){var a=o(e,n,r,i),c;if(null!=a.value){for(var u=[],l=0;l<s.length;++l)u.push(s[l](e,n,r,i));c=a.value.apply(a.context,u)}return t?{value:c}:c};case To.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,r,a){var s=i(e,n,r,a),c=o(e,n,r,a);return s.context[s.name]=c,t?{value:c}:c};case To.ArrayExpression:return s=[],r(e.elements,function(e){s.push(a.recurse(e))}),function(e,n,r,i){for(var o=[],a=0;a<s.length;++a)o.push(s[a](e,n,r,i));return t?{value:o}:o};case To.ObjectExpression:return s=[],r(e.properties,function(e){e.computed?s.push({key:a.recurse(e.key),computed:!0,value:a.recurse(e.value)}):s.push({key:e.key.type===To.Identifier?e.key.name:""+e.key.value,computed:!1,value:a.recurse(e.value)})}),function(e,n,r,i){for(var o={},a=0;a<s.length;++a)s[a].computed?o[s[a].key(e,n,r,i)]=s[a].value(e,n,r,i):o[s[a].key]=s[a].value(e,n,r,i);return t?{value:o}:o};case To.ThisExpression:return function(e){return t?{value:e}:e};case To.LocalsExpression:return function(e,n){return t?{value:n}:n};case To.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=y(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=hn(s,c);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),c=t(r,i,o,a),u=(y(s)?s:0)-(y(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,o,a){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var c=s?s[e]:void 0;return t?{context:s,name:e,value:c}:c}},computedMember:function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s),u,l;return null!=c&&(u=t(i,o,a,s),u=fn(u),r&&1!==r&&c&&!c[u]&&(c[u]={}),l=c[u]),n?{context:c,name:u,value:l}:l}},nonComputedMember:function(e,t,n,r){return function(i,o,a,s){var c=e(i,o,a,s);r&&1!==r&&c&&null==c[t]&&(c[t]={});var u=null!=c?c[t]:void 0;return n?{context:c,name:t,value:u}:u}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}};var jo=function e(t,n,r){this.lexer=t,this.$filter=n,this.options=r,this.ast=new To(t,r),this.astCompiler=r.csp?new _n(this.ast,n):new wn(this.ast,n)};jo.prototype={constructor:jo,parse:function(e){return this.astCompiler.compile(e)}};var Ro=t("$sce"),Fo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},No=/_([a-z])/g,Lo=t("$compile"),Bo=e.document.createElement("a"),Uo=Bn(e.location.href);Hn.$inject=["$document"],qn.$inject=["$provide"];var Vo=22,Ho=".",zo="0";Yn.$inject=["$locale"],Zn.$inject=["$locale"];var qo={yyyy:nr("FullYear",4,0,!1,!0),yy:nr("FullYear",2,0,!0,!0),y:nr("FullYear",1,0,!1,!0),MMMM:rr("Month"),MMM:rr("Month",!0),MM:nr("Month",2,1),M:nr("Month",1,1),LLLL:rr("Month",!1,!0),dd:nr("Date",2),d:nr("Date",1),HH:nr("Hours",2),H:nr("Hours",1),hh:nr("Hours",2,-12),h:nr("Hours",1,-12),mm:nr("Minutes",2),m:nr("Minutes",1),ss:nr("Seconds",2),s:nr("Seconds",1),sss:nr("Milliseconds",3),EEEE:rr("Day"),EEE:rr("Day",!0),a:cr,Z:ir,ww:sr(2),w:sr(1),G:ur,GG:ur,GGG:ur,GGGG:lr},Wo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Jo=/^-?\d+$/;fr.$inject=["$locale"];var Ko=m(Gr),Go=m(Yr);mr.$inject=["$parse"];var Yo=m({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===oi.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Zo={};r(Hi,function(e,t){function n(e,n,i){e.$watch(i[r],function e(n){i.$set(t,!!n)})}if("multiple"!==e){var r=kt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),Zo[r]=function(){return{restrict:"A",priority:100,link:i}}}}),r(qi,function(e,t){Zo[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Wr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function e(n){r.$set(t,n)})}}}}),r(["src","srcset","href"],function(e){var t=kt("ng-"+e);Zo[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===oi.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){if(!t)return void("href"===e&&i.$set(a,null));i.$set(a,t),Qr&&o&&r.prop(o,i[a])})}}}});var Xo={$addControl:h,$$renameControl:gr,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},Qo="ng-pending",ea="ng-submitted";yr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],yr.prototype={$rollbackViewValue:function(){r(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){pe(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],r(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),r(this.$error,function(t,n){this.$setValidity(n,null,e)},this),r(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),B(this.$$controls,e),e.$$parentForm=Xo},$setDirty:function(){this.$$animate.removeClass(this.$$element,Fa),this.$$animate.addClass(this.$$element,Na),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Fa,Na+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,r(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},br({clazz:yr,set:function(e,t,n){var r=e[t];if(r){-1===r.indexOf(n)&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(B(r,n),0===r.length&&delete e[t])}});var ta=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||h}return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:yr,compile:function n(i,o){i.addClass(Fa).addClass(ja);var a=o.name?"name":!(!e||!o.ngForm)&&"ngForm";return{pre:function e(n,i,o,s){var c=s[0];if(!("action"in o)){var l=function(e){n.$apply(function(){c.$commitViewValue(),c.$setSubmitted()}),e.preventDefault()};i[0].addEventListener("submit",l),i.on("$destroy",function(){t(function(){i[0].removeEventListener("submit",l)},0,!1)})}(s[1]||c.$$parentForm).$addControl(c);var f=a?r(c.$name):h;a&&(f(n,c),o.$observe(a,function(e){c.$name!==e&&(f(n,void 0),c.$$parentForm.$$renameControl(c,e),(f=r(c.$name))(n,c))})),i.on("$destroy",function(){c.$$parentForm.$removeControl(c),f(n,void 0),u(c,Xo)})}}}}}]},na=ta(),ra=ta(!0),ia=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,oa=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,aa=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,sa=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ca=/^(\d{4,})-(\d{2})-(\d{2})$/,ua=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,la=/^(\d{4,})-W(\d\d)$/,fa=/^(\d{4,})-(\d\d)$/,da=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ha="keydown wheel mousedown",pa=ge();r("date,datetime-local,month,time,week".split(","),function(e){pa[e]=!0});var ma={text:kr,date:Mr("date",ca,Cr(ca,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Mr("datetimelocal",ua,Cr(ua,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Mr("time",da,Cr(da,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Mr("week",la,Sr,"yyyy-Www"),month:Mr("month",fa,Cr(fa,["yyyy","MM"]),"yyyy-MM"),number:Tr,url:Rr,email:Fr,radio:Nr,range:jr,checkbox:Br,hidden:h,button:h,submit:h,reset:h,file:h},va=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ma[Gr(a.type)]||ma.text)(i,o,a,s[0],t,e,n,r)}}}}],ga=/^(true|false|\d+)$/,ya=function(){function e(e,t,n){e.prop("value",n),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return ga.test(n.ngValue)?function t(n,r,i){e(r,i,n.$eval(i.ngValue))}:function t(n,r,i){n.$watch(i.ngValue,function t(n){e(r,i,n)})}}}},$a=["$compile",function(e){return{restrict:"AC",compile:function t(n){return e.$$addBindingClass(n),function t(n,r,i){e.$$addBindingInfo(r,i.ngBind),r=r[0],n.$watch(i.ngBind,function e(t){r.textContent=ye(t)})}}}}],ba=["$interpolate","$compile",function(e,t){return{compile:function n(r){return t.$$addBindingClass(r),function n(r,i,o){var a=e(i.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(i,a.expressions),i=i[0],o.$observe("ngBindTemplate",function(e){i.textContent=g(e)?"":e})}}}}],wa=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function r(i,o){var a=t(o.ngBindHtml),s=t(o.ngBindHtml,function t(n){return e.valueOf(n)});return n.$$addBindingClass(i),function t(r,i,o){n.$$addBindingInfo(i,o.ngBindHtml),r.$watch(s,function t(){var n=a(r);i.html(e.getTrustedHtml(n)||"")})}}}}],_a=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ka=Ur("",!0),xa=Ur("Odd",0),Sa=Ur("Even",1),Ca=vr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ma=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ea={},Aa={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=kt("ng-"+e);Ea[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t],null,!0);return function t(n,i){i.on(e,function(t){var i=function(){a(n,{$event:t})};Aa[e]&&r.$$phase?n.$evalAsync(i):n.$apply(i)})}}}}]});var Ia=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,c,u;n.$watch(i.ngIf,function n(o){o?c||a(function(n,o){c=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=ve(s.clone),e.leave(u).done(function(e){!1!==e&&(u=null)}),s=null))})}}}],Oa=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ci.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var f=0,d,h,p,m=function(){h&&(h.remove(),h=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).done(function(e){!1!==e&&(h=null)}),h=p,p=null)};r.$watch(o,function o(c){var h=function(e){!1===e||!y(s)||s&&!r.$eval(s)||t()},v=++f;c?(e(c,!0).then(function(e){if(!r.$$destroyed&&v===f){var t=r.$new();u.template=e;var o=l(t,function(e){m(),n.enter(e,null,i).done(h)});d=t,p=o,d.$emit("$includeContentLoaded",c),r.$eval(a)}},function(){r.$$destroyed||v===f&&(m(),r.$emit("$includeContentError",c))}),r.$emit("$includeContentRequested",c)):(m(),u.template=null)})}}}}],Da=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(oi.call(r[0]).match(/SVG/))return r.empty(),void t(De(o.template,e.document).childNodes)(n,function e(t){r.append(t)},{futureParentElement:r});r.html(o.template),t(r.contents())(n)}}}],Pa=vr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ta=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var o=n.ngList||", ",a="false"!==n.ngTrim,s=a?pi(o):o,c=function(e){if(!g(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(a?pi(e):e)}),t}};i.$parsers.push(c),i.$formatters.push(function(e){if(di(e))return e.join(o)}),i.$isEmpty=function(e){return!e||!e.length}}}},ja="ng-valid",Ra="ng-invalid",Fa="ng-pristine",Na="ng-dirty",La="ng-untouched",Ba="ng-touched",Ua="ng-empty",Va="ng-not-empty",Ha=t("ngModel");Vr.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Vr.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return S(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){S(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Ha("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,X(this.$$element))},$render:h,$isEmpty:function(e){return g(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Na),this.$$animate.addClass(this.$$element,Fa)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Fa),this.$$animate.addClass(this.$$element,Na),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!fi(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){i||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function i(){var e=l.$$parserName||"parse";return g(l.$$parserValid)?(s(e,null),!0):(l.$$parserValid||(r(l.$validators,function(e,t){s(t,null)}),r(l.$asyncValidators,function(e,t){s(t,null)})),s(e,l.$$parserValid),l.$$parserValid)}function o(){var n=!0;return r(l.$validators,function(r,i){var o=Boolean(r(e,t));n=n&&o,s(i,o)}),!!n||(r(l.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],i=!0;r(l.$asyncValidators,function(r,o){var a=r(e,t);if(!P(a))throw Ha("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),n.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),n.length?l.$$q.all(n).then(function(){c(i)},h):c(!0)}function s(e,t){u===l.$$currentValidationRunId&&l.$setValidity(e,t)}function c(e){u===l.$$currentValidationRunId&&n(e)}this.$$currentValidationRunId++;var u=this.$$currentValidationRunId,l=this;return i()&&o()?void a():void c(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){r.$modelValue!==o&&r.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,n=t,r=this;if(this.$$parserValid=!g(n)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(n=this.$parsers[i](n),g(n)){this.$$parserValid=!1;break}fi(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var o=this.$modelValue,a=this.$options.getOption("allowInvalid");this.$$rawModelValue=n,a&&(this.$modelValue=n,e()),this.$$runValidators(n,this.$$lastCommittedViewValue,function(t){a||(r.$modelValue=t?n:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),r(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");k(t[e])?t=t[e]:k(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})}},br({clazz:Vr,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var za=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vr,priority:1,compile:function t(n){return n.addClass(Fa).addClass("ng-untouched").addClass(ja),{pre:function e(t,n,r,i){var o=i[0],a=i[1]||o.$$parentForm,s=i[2];s&&(o.$options=s.$options),o.$$initGetterSetters(),a.$addControl(o),r.$observe("name",function(e){o.$name!==e&&o.$$parentForm.$$renameControl(o,e)}),t.$on("$destroy",function(){o.$$parentForm.$removeControl(o)})},post:function t(n,r,i,o){function a(){s.$setTouched()}var s=o[0];s.$options.getOption("updateOn")&&r.on(s.$options.getOption("updateOn"),function(e){s.$$debounceViewValueCommit(e&&e.type)}),r.on("blur",function(){s.$touched||(e.$$phase?n.$evalAsync(a):n.$apply(a))})}}}}}],qa,Wa=/(\s+|^)default(\s+|$)/;zr.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=u({},e),r(e,function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=pi(n.replace(Wa,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],qr(e,this.$$options)),qr(e,qa.$$options),new zr(e)}},qa=new zr({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Ja=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:qa,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},Ka=vr({terminal:!0,priority:1e3}),Ga=t("ngOptions"),Ya=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Za=["$compile","$document","$parse",function(t,i,o){function a(e,t,r){function i(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!u&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(Ya);if(!s)throw Ga("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,X(t));var c=s[5]||s[7],u=s[6],l=/ as /.test(s[0])&&s[1],f=s[9],d=o(s[2]?s[1]:c),h=l&&o(l),p=h||d,m=f&&o(f),v=f?function(e,t){return m(r,t)}:function e(t){return it(t)},g=function(e,t){return v(e,x(e,t))},y=o(s[2]||s[1]),b=o(s[3]||""),w=o(s[4]||""),_=o(s[8]),k={},x=u?function(e,t){return k[u]=t,k[c]=e,k}:function(e){return k[c]=e,k};return{trackBy:f,getTrackByValue:g,getWatchables:o(_,function(e){var t=[];e=e||[];for(var n=a(e),i=n.length,o=0;o<i;o++){var c=e===n?o:n[o],u=e[c],l=x(u,c),f=v(u,l);if(t.push(f),s[2]||s[1]){var d=y(r,l);t.push(d)}if(s[4]){var h=w(r,l);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},n=_(r)||[],o=a(n),s=o.length,c=0;c<s;c++){var u=n===o?c:o[c],l=n[u],d=x(l,u),h=p(r,d),m=v(h,d),k=y(r,d),S=b(r,d),C=w(r,d),M=new i(m,h,k,S,C);e.push(M),t[m]=M}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[g(e)]},getViewValueFromOption:function(e){return f?U(e.viewValue):e.viewValue}}}}}function s(e,n,o,s){function l(e,t){var n=c.cloneNode(!1);t.appendChild(n),d(e,n)}function f(e){var t=k.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function d(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function h(){var e=k&&p.readValue();if(k)for(var t=k.items.length-1;t>=0;t--){var r=k.items[t];Ge(y(r.group)?r.element.parentNode:r.element)}k=x.getOptions();var i={};if(_&&n.prepend(p.emptyOption),k.items.forEach(function e(t){var n;y(t.group)?(n=i[t.group],n||(n=u.cloneNode(!1),S.appendChild(n),n.label=null===t.group?"null":t.group,i[t.group]=n),l(t,n)):l(t,S)}),n[0].appendChild(S),m.$render(),!m.$isEmpty(e)){var o=p.readValue();(x.trackBy||v?V(e,o):e===o)||(m.$setViewValue(o),m.$render())}}for(var p=s[0],m=s[1],v=o.multiple,g=0,b=n.children(),w=b.length;g<w;g++)if(""===b[g].value){p.hasEmptyOption=!0,p.emptyOption=b.eq(g);break}var _=!!p.emptyOption;ei(c.cloneNode(!1)).val("?");var k,x=a(o.ngOptions,n,e),S=i[0].createDocumentFragment();p.generateUnknownOptionValue=function(e){return"?"},v?(p.writeValue=function e(t){
var n=t&&t.map(f)||[];k.items.forEach(function(e){e.element.selected&&!L(n,e)&&(e.element.selected=!1)})},p.readValue=function e(){var t=n.val()||[],i=[];return r(t,function(e){var t=k.selectValueMap[e];t&&!t.disabled&&i.push(k.getViewValueFromOption(t))}),i},x.trackBy&&e.$watchCollection(function(){if(di(m.$viewValue))return m.$viewValue.map(function(e){return x.getTrackByValue(e)})},function(){m.$render()})):(p.writeValue=function e(t){var r=k.selectValueMap[n.val()],i=k.getOptionFromViewValue(t);r&&r.element.removeAttribute("selected"),i?(n[0].value!==i.selectValue&&(p.removeUnknownOption(),p.unselectEmptyOption(),n[0].value=i.selectValue,i.element.selected=!0),i.element.setAttribute("selected","selected")):_?p.selectEmptyOption():p.unknownOption.parent().length?p.updateUnknownOption(t):p.renderUnknownOption(t)},p.readValue=function e(){var t=k.selectValueMap[n.val()];return t&&!t.disabled?(p.unselectEmptyOption(),p.removeUnknownOption(),k.getViewValueFromOption(t)):null},x.trackBy&&e.$watch(function(){return x.getTrackByValue(m.$viewValue)},function(){m.$render()})),_&&(p.emptyOption.remove(),t(p.emptyOption)(e),p.emptyOption[0].nodeType===Ci?(p.hasEmptyOption=!1,p.registerOption=function(e,t){""===t.val()&&(p.hasEmptyOption=!0,p.emptyOption=t,p.emptyOption.removeClass("ng-scope"),m.$render(),t.on("$destroy",function(){p.hasEmptyOption=!1,p.emptyOption=void 0}))}):p.emptyOption.removeClass("ng-scope")),n.empty(),h(),e.$watchCollection(x.getWatchables,h)}var c=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function e(t,n,r,i){i[0].registerOption=h},post:s}}}],Xa=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,c){function u(e){s.text(e||"")}var l=c.count,f=c.$attr.when&&s.attr(c.$attr.when),d=c.offset||0,p=a.$eval(f)||{},m={},v=t.startSymbol(),y=t.endSymbol(),b=v+l+"-"+d+y,w=ci.noop,_;r(c,function(e,t){var n=o.exec(t);if(n){var r=(n[1]?"-":"")+Gr(n[2]);p[r]=s.attr(c.$attr[t])}}),r(p,function(e,n){m[n]=t(e.replace(i,b))}),a.$watch(l,function t(r){var i=parseFloat(r),o=fi(i);if(o||i in p||(i=e.pluralCat(i-d)),!(i===_||o&&fi(_))){w();var s=m[i];g(s)?(null!=r&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+f),w=h,u()):w=a.$watch(s,u),_=i}})}}}],Qa=["$parse","$animate","$compile",function(e,i,o){var a="$$NG_REMOVED",s=t("ngRepeat"),c=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},u=function(e){return e.clone[0]},l=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function t(f,d){var h=d.ngRepeat,p=o.$$createComment("end ngRepeat",h),m=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var v=m[1],g=m[2],y=m[3],b=m[4];if(!(m=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var w=m[3]||m[1],_=m[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var k,x,S,C,M={$id:it};return b?k=e(b):(S=function(e,t){return it(t)},C=function(e){return e}),function e(t,o,f,d,m){k&&(x=function(e,n,r){return _&&(M[_]=e),M[w]=n,M.$index=r,k(t,M)});var v=ge();t.$watchCollection(g,function e(f){var d,g,b=o[0],k,M=ge(),E,A,I,O,D,P,T,j,R;if(y&&(t[y]=f),n(f))P=f,D=x||S;else{D=x||C,P=[];for(var F in f)Kr.call(f,F)&&"$"!==F.charAt(0)&&P.push(F)}for(E=P.length,j=new Array(E),d=0;d<E;d++)if(A=f===P?d:P[d],I=f[A],O=D(A,I,d),v[O])T=v[O],delete v[O],M[O]=T,j[d]=T;else{if(M[O])throw r(j,function(e){e&&e.scope&&(v[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,O,I);j[d]={id:O,scope:void 0,clone:void 0},M[O]=!0}for(var N in v){if(T=v[N],R=ve(T.clone),i.leave(R),R[0].parentNode)for(d=0,g=R.length;d<g;d++)R[d][a]=!0;T.scope.$destroy()}for(d=0;d<E;d++)if(A=f===P?d:P[d],I=f[A],T=j[d],T.scope){k=b;do{k=k.nextSibling}while(k&&k[a]);u(T)!==k&&i.move(ve(T.clone),null,b),b=l(T),c(T.scope,d,w,I,_,A,E)}else m(function e(t,n){T.scope=n;var r=p.cloneNode(!1);t[t.length++]=r,i.enter(t,null,b),b=r,T.clone=t,M[T.id]=T,c(T.scope,d,w,I,_,A,E)});v=M})}}}}],es="ng-hide",ts="ng-hide-animate",ns=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function t(r){e[r?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],rs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function t(r){e[r?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],is=vr(function(e,t,n){e.$watch(n.ngStyle,function e(n,i){i&&n!==i&&r(i,function(e,n){t.css(n,"")}),n&&t.css(n)},!0)}),os=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function e(){this.cases={}}],link:function(n,i,o,a){var s=o.ngSwitch||o.on,c=[],u=[],l=[],f=[],d=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(s,function n(i){for(var o,s;l.length;)e.cancel(l.pop());for(o=0,s=f.length;o<s;++o){var h=ve(u[o].clone);f[o].$destroy();(l[o]=e.leave(h)).done(d(l,o))}u.length=0,f.length=0,(c=a.cases["!"+i]||a.cases["?"])&&r(c,function(n){n.transclude(function(r,i){f.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),e.enter(r,o.parent(),o)})})})}}}],as=vr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,o){r(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:o,element:t})})}}),ss=vr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),cs=t("ngTransclude"),us=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function t(n){var r=e(n.contents());return n.empty(),function e(t,n,i,o,a){function s(e,t){e.length&&u(e)?n.append(e):(c(),t.$destroy())}function c(){r(t,function(e){n.append(e)})}function u(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==Si||r.nodeValue.trim())return!0}}if(!a)throw cs("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",X(n));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var l=i.ngTransclude||i.ngTranscludeSlot;a(s,null,l),l&&!a.isSlotFilled(l)&&c()}}}}],ls=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],fs={$setViewValue:h,$render:h},ds=["$element","$scope",function(t,n){function r(){c||(c=!0,n.$$postDigest(function(){c=!1,a.ngModelCtrl.$render()}))}function i(e){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,a.ngModelCtrl.$setViewValue(a.readValue()),e&&a.ngModelCtrl.$render())}))}function o(e){e.prop("selected",!0),e.attr("selected",!0)}var a=this,s=new ot;a.selectValueMap={},a.ngModelCtrl=fs,a.multiple=!1,a.unknownOption=ei(e.document.createElement("option")),a.hasEmptyOption=!1,a.emptyOption=void 0,a.renderUnknownOption=function(e){var n=a.generateUnknownOptionValue(e);a.unknownOption.val(n),t.prepend(a.unknownOption),o(a.unknownOption),t.val(n)},a.updateUnknownOption=function(e){var n=a.generateUnknownOptionValue(e);a.unknownOption.val(n),o(a.unknownOption),t.val(n)},a.generateUnknownOptionValue=function(e){return"? "+it(e)+" ?"},a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.selectEmptyOption=function(){a.emptyOption&&(t.val(""),o(a.emptyOption))},a.unselectEmptyOption=function(){a.hasEmptyOption&&a.emptyOption.removeAttr("selected")},n.$on("$destroy",function(){a.renderUnknownOption=h}),a.readValue=function e(){var n=t.val(),r=n in a.selectValueMap?a.selectValueMap[n]:n;return a.hasOption(r)?r:null},a.writeValue=function e(n){var r=t[0].options[t[0].selectedIndex];if(r&&r.removeAttribute("selected"),a.hasOption(n)){a.removeUnknownOption();var i=it(n);t.val(i in a.selectValueMap?i:n);var s=t[0].options[t[0].selectedIndex];o(ei(s))}else null==n&&a.emptyOption?(a.removeUnknownOption(),a.selectEmptyOption()):a.unknownOption.parent().length?a.updateUnknownOption(n):a.renderUnknownOption(n)},a.addOption=function(e,t){if(t[0].nodeType!==Ci){pe(e,'"option value"'),""===e&&(a.hasEmptyOption=!0,a.emptyOption=t);var n=s.get(e)||0;s.put(e,n+1),r()}},a.removeOption=function(e){var t=s.get(e);t&&(1===t?(s.remove(e),""===e&&(a.hasEmptyOption=!1,a.emptyOption=void 0)):s.put(e,t-1))},a.hasOption=function(e){return!!s.get(e)};var c=!1,u=!1;a.registerOption=function(e,t,n,r,o){if(n.$attr.ngValue){var s,c=NaN;n.$observe("value",function e(n){var r,o=t.prop("selected");y(c)&&(a.removeOption(s),delete a.selectValueMap[c],r=!0),c=it(n),s=n,a.selectValueMap[c]=n,a.addOption(n,t),t.attr("value",c),r&&o&&i()})}else r?n.$observe("value",function e(n){a.readValue();var r,o=t.prop("selected");y(s)&&(a.removeOption(s),r=!0),s=n,a.addOption(n,t),r&&o&&i()}):o?e.$watch(o,function e(r,o){n.$set("value",r);var s=t.prop("selected");o!==r&&a.removeOption(o),a.addOption(r,t),o&&s&&i()}):a.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(a.multiple?i(!0):(a.ngModelCtrl.$setViewValue(null),a.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=a.readValue(),t=n.value;a.removeOption(t),a.ngModelCtrl.$render(),(a.multiple&&e&&-1!==e.indexOf(t)||e===t)&&i(!0)})}}],hs=function(){function e(e,t,n,i){var o=i[0],a=i[1];if(!a)return void(o.registerOption=h);if(o.ngModelCtrl=a,t.on("change",function(){o.removeUnknownOption(),e.$apply(function(){a.$setViewValue(o.readValue())})}),n.multiple){o.multiple=!0,o.readValue=function e(){var n=[];return r(t.find("option"),function(e){if(e.selected&&!e.disabled){var t=e.value;n.push(t in o.selectValueMap?o.selectValueMap[t]:t)}}),n},o.writeValue=function e(n){var i=new ot(n);r(t.find("option"),function(e){e.selected=y(i.get(e.value))||y(i.get(o.selectValueMap[e.value]))})};var s,c=NaN;e.$watch(function e(){c!==a.$viewValue||V(s,a.$viewValue)||(s=be(a.$viewValue),a.$render()),c=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:ds,priority:1,link:{pre:e,post:t}}},ps=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return y(n.ngValue)||(y(n.value)?r=e(n.value,!0):(i=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,n,r,i)}}}}],ms=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},vs=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(_(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,X(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||g(o)||o.test(t)}}}}},gs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=f(e);i=fi(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},ys=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};if(e.angular.bootstrap)return void(e.console&&console.log("WARNING: Tried to load angular more than once."));fe(),ke(ci),ci.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r);return{v:r,f:(e*i|0)%i}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),ei(function(){ae(e.document,se)})}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function i(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function o(e,t){return!!(null==e?0:e.length)&&d(e,t,0)>-1}function a(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function s(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function c(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function u(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function f(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function d(e,t,n){return t===t?S(e,t,n):f(e,p,n)}function h(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function p(e){return e!==e}function m(e){return function(t){return null==t?_n:t[e]}}function v(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function g(e){return function(t){return e(t)}}function y(e,t){return s(t,function(t){return e[t]})}function b(e,t){return e.has(t)}function w(e,t){return null==e?_n:e[t]}function _(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function k(e,t){return function(n){return e(t(n))}}function x(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function S(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function C(){}function M(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(){this.__data__=_i?_i(null):{},this.size=0}function A(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function $(e){var t=this.__data__;if(_i){var n=t[e];return n===Cn?_n:n}return Kr.call(t,e)?t[e]:_n}function I(e){var t=this.__data__;return _i?t[e]!==_n:Kr.call(t,e)}function O(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_i&&t===_n?Cn:t,this}function D(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function P(){this.__data__=[],this.size=0}function T(e){var t=this.__data__,n=ne(t,e);return!(n<0||(n==t.length-1?t.pop():ai.call(t,n,1),--this.size,0))}function j(e){var t=this.__data__,n=ne(t,e);return n<0?_n:t[n][1]}function R(e){return ne(this.__data__,e)>-1}function F(e,t){var n=this.__data__,r=ne(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function N(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function L(){this.size=0,this.__data__={hash:new M,map:new(yi||D),string:new M}}function B(e){var t=ft(this,e).delete(e);return this.size-=t?1:0,t}function U(e){return ft(this,e).get(e)}function V(e){return ft(this,e).has(e)}function H(e,t){var n=ft(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function z(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new N;++t<n;)this.add(e[t])}function q(e){return this.__data__.set(e,Cn),this}function W(e){return this.__data__.has(e)}function J(e){this.size=(this.__data__=new D(e)).size}function K(){this.__data__=new D,this.size=0}function G(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Y(e){return this.__data__.get(e)}function Z(e){return this.__data__.has(e)}function X(e,t){var n=this.__data__;if(n instanceof D){var r=n.__data__;if(!yi||r.length<xn-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new N(r)}return n.set(e,t),this.size=n.size,this}function Q(e,t){var n=zi(e),r=!n&&Hi(e),i=!n&&!r&&qi(e),o=!n&&!r&&!i&&Wi(e),a=n||r||i||o,s=a?v(e.length,String):[],c=s.length;for(var u in e)!t&&!Kr.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bt(u,c))||s.push(u);return s}function ee(e,t,n){(n===_n||Kt(e[t],n))&&(n!==_n||t in e)||oe(e,t,n)}function te(e,t,n){var r=e[t];Kr.call(e,t)&&Kt(r,n)&&(n!==_n||t in e)||oe(e,t,n)}function ne(e,t){for(var n=e.length;n--;)if(Kt(e[n][0],t))return n;return-1}function re(e,t){return e&&Ye(t,dn(t),e)}function ie(e,t){return e&&Ye(t,hn(t),e)}function oe(e,t,n){"__proto__"==t&&ui?ui(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ae(e,t,n,i,o,a){var s,c=t&En,u=t&An,l=t&In;if(n&&(s=o?n(e,i,o,a):n(e)),s!==_n)return s;if(!Qt(e))return e;var f=zi(e);if(f){if(s=vt(e),!c)return Ge(e,s)}else{var d=Ni(e),h=d==Jn||d==Kn;if(qi(e))return Ue(e,c);if(d==Xn||d==Un||h&&!o){if(s=u||h?{}:gt(e),!c)return u?Xe(e,ie(s,e)):Ze(e,re(s,e))}else{if(!Dr[d])return o?e:{};s=yt(e,d,ae,c)}}a||(a=new J);var p=a.get(e);if(p)return p;a.set(e,s);var m=l?u?ut:ct:u?hn:dn,v=f?_n:m(e);return r(v||e,function(r,i){v&&(i=r,r=e[i]),te(s,i,ae(r,t,n,i,e,a))}),s}function se(e,t){var n=[];return Di(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function ce(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=$t),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?ce(s,t-1,n,r,i):c(i,s):r||(i[i.length]=s)}return i}function ue(e,t){return e&&Pi(e,t,dn)}function le(e,t){t=Be(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Tt(t[n++])];return n&&n==r?e:_n}function fe(e,t,n){var r=t(e);return zi(e)?r:c(r,n(e))}function de(e){return null==e?e===_n?or:Zn:ci&&ci in Object(e)?pt(e):It(e)}function he(e,t){return null!=e&&t in Object(e)}function pe(e){return en(e)&&de(e)==Un}function me(e,t,n,r,i){return e===t||(null==e||null==t||!en(e)&&!en(t)?e!==e&&t!==t:ve(e,t,n,r,me,i))}function ve(e,t,n,r,i,o){var a=zi(e),s=zi(t),c=a?Vn:Ni(e),u=s?Vn:Ni(t);c=c==Un?Xn:c,u=u==Un?Xn:u;var l=c==Xn,f=u==Xn,d=c==u;if(d&&qi(e)){if(!qi(t))return!1;a=!0,l=!1}if(d&&!l)return o||(o=new J),a||Wi(e)?it(e,t,n,r,i,o):ot(e,t,c,n,r,i,o);if(!(n&On)){var h=l&&Kr.call(e,"__wrapped__"),p=f&&Kr.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,v=p?t.value():t;return o||(o=new J),i(m,v,n,r,o)}}return!!d&&(o||(o=new J),at(e,t,n,r,i,o))}function ge(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var c=s[0],u=e[c],l=s[1];if(a&&s[2]){if(u===_n&&!(c in e))return!1}else{var f=new J;if(r)var d=r(u,l,c,e,t,f);if(!(d===_n?me(l,u,On|Dn,r,f):d))return!1}}return!0}function ye(e){return!(!Qt(e)||xt(e))&&(Zt(e)?Xr:Er).test(jt(e))}function $e(e){return en(e)&&Xt(e.length)&&!!Or[de(e)]}function be(e){return"function"==typeof e?e:null==e?vn:"object"==typeof e?zi(e)?Se(e[0],e[1]):xe(e):$n(e)}function we(e){if(!St(e))return hi(e);var t=[];for(var n in Object(e))Kr.call(e,n)&&"constructor"!=n&&t.push(n);return t}function _e(e){if(!Qt(e))return At(e);var t=St(e),n=[];for(var r in e)("constructor"!=r||!t&&Kr.call(e,r))&&n.push(r);return n}function ke(e,t){var n=-1,r=Gt(e)?Array(e.length):[];return Di(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function xe(e){var t=dt(e);return 1==t.length&&t[0][2]?Mt(t[0][0],t[0][1]):function(n){return n===e||ge(n,e,t)}}function Se(e,t){return _t(e)&&Ct(t)?Mt(Tt(e),t):function(n){var r=ln(n,e);return r===_n&&r===t?fn(n,e):me(t,r,On|Dn)}}function Ce(e,t,n,r,i){e!==t&&Pi(t,function(o,a){if(Qt(o))i||(i=new J),Me(e,t,a,n,Ce,r,i);else{var s=r?r(e[a],o,a+"",e,t,i):_n;s===_n&&(s=o),ee(e,a,s)}},hn)}function Me(e,t,n,r,i,o,a){var s=e[n],c=t[n],u=a.get(c);if(u)return ee(e,n,u),_n;var l=o?o(s,c,n+"",e,t,a):_n,f=l===_n;if(f){var d=zi(c),h=!d&&qi(c),p=!d&&!h&&Wi(c);l=c,d||h||p?zi(s)?l=s:Yt(s)?l=Ge(s):h?(f=!1,l=Ue(c,!0)):p?(f=!1,l=Ke(c,!0)):l=[]:tn(c)||Hi(c)?(l=s,Hi(s)?l=cn(s):(!Qt(s)||r&&Zt(s))&&(l=gt(c))):f=!1}f&&(a.set(c,l),i(l,c,r,o,a),a.delete(c)),ee(e,n,l)}function Ee(e,t){return Ae(e,t,function(t,n){return fn(e,n)})}function Ae(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=le(e,a);n(s,a)&&Te(o,Be(a,e),s)}return o}function Ie(e){return function(t){return le(t,e)}}function Oe(e,t,n,r){var i=r?h:d,o=-1,a=t.length,c=e;for(e===t&&(t=Ge(t)),n&&(c=s(e,g(n)));++o<a;)for(var u=0,l=t[o],f=n?n(l):l;(u=i(c,f,u,r))>-1;)c!==e&&ai.call(c,u,1),ai.call(e,u,1);return e}function De(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;bt(i)?ai.call(e,i,1):Le(e,i)}}return e}function Pe(e,t){return Li(Ot(e,t,vn),e+"")}function Te(e,t,n,r){if(!Qt(e))return e;t=Be(t,e);for(var i=-1,o=t.length,a=o-1,s=e;null!=s&&++i<o;){var c=Tt(t[i]),u=n;if(i!=a){var l=s[c];(u=r?r(l,c,s):_n)===_n&&(u=Qt(l)?l:bt(t[i+1])?[]:{})}te(s,c,u),s=s[c]}return e}function je(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function Re(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,a=t!==t,s=null===t,c=rn(t),u=t===_n;i<o;){var l=li((i+o)/2),f=n(e[l]),d=f!==_n,h=null===f,p=f===f,m=rn(f);if(a)var v=r||p;else v=u?p&&(r||d):s?p&&d&&(r||!h):c?p&&d&&!h&&(r||!m):!h&&!m&&(r?f<=t:f<t);v?i=l+1:o=l}return mi(o,Bn)}function Fe(e){if("string"==typeof e)return e;if(zi(e))return s(e,Fe)+"";if(rn(e))return Ii?Ii.call(e):"";var t=e+"";return"0"==t&&1/e==-jn?"-0":t}function Ne(e,t,n){var r=-1,i=o,s=e.length,c=!0,u=[],l=u;if(n)c=!1,i=a;else if(s>=xn){var f=t?null:ji(e);if(f)return x(f);c=!1,i=b,l=new z}else l=t?[]:u;e:for(;++r<s;){var d=e[r],h=t?t(d):d;if(d=n||0!==d?d:0,c&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),u.push(d)}else i(l,h,n)||(l!==u&&l.push(h),u.push(d))}return u}function Le(e,t){return t=Be(t,e),null==(e=Dt(e,t))||delete e[Tt(Nt(t))]}function Be(e,t){return zi(e)?e:_t(e,t)?[e]:Bi(un(e))}function Ue(e,t){if(t)return e.slice();var n=e.length,r=ni?ni(n):new e.constructor(n);return e.copy(r),r}function Ve(e){var t=new e.constructor(e.byteLength);return new ti(t).set(new ti(e)),t}function He(e,t){return new e.constructor(t?Ve(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function ze(t,n,r){return u(n?r(_(t),En):_(t),e,new t.constructor)}function qe(e){var t=new e.constructor(e.source,Sr.exec(e));return t.lastIndex=e.lastIndex,t}function We(e,n,r){return u(n?r(x(e),En):x(e),t,new e.constructor)}function Je(e){return Ai?Object(Ai.call(e)):{}}function Ke(e,t){return new e.constructor(t?Ve(e.buffer):e.buffer,e.byteOffset,e.length)}function Ge(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Ye(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):_n;c===_n&&(c=e[s]),i?oe(n,s,c):te(n,s,c)}return n}function Ze(e,t){return Ye(e,Ri(e),t)}function Xe(e,t){return Ye(e,Fi(e),t)}function Qe(e){return Pe(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:_n,a=i>2?n[2]:_n;for(o=e.length>3&&"function"==typeof o?(i--,o):_n,a&&wt(n[0],n[1],a)&&(o=i<3?_n:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function et(e,t){return function(n,r){if(null==n)return n;if(!Gt(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function tt(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function nt(e){return function(t,n,r){var i=Object(t);if(!Gt(t)){var o=lt(n,3);t=dn(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:_n}}function rt(e){return tn(e)?_n:e}function it(e,t,n,r,i,o){var a=n&On,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var f=-1,d=!0,h=n&Dn?new z:_n;for(o.set(e,t),o.set(t,e);++f<s;){var p=e[f],m=t[f];if(r)var v=a?r(m,p,f,t,e,o):r(p,m,f,e,t,o);if(v!==_n){if(v)continue;d=!1;break}if(h){if(!l(t,function(e,t){if(!b(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)})){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ot(e,t,n,r,i,o,a){switch(n){case cr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sr:return!(e.byteLength!=t.byteLength||!o(new ti(e),new ti(t)));case zn:case qn:case Yn:return Kt(+e,+t);case Wn:return e.name==t.name&&e.message==t.message;case tr:case rr:return e==t+"";case Gn:var s=_;case nr:var c=r&On;if(s||(s=x),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=Dn,a.set(e,t);var l=it(s(e),s(t),r,i,o,a);return a.delete(e),l;case ir:if(Ai)return Ai.call(e)==Ai.call(t)}return!1}function at(e,t,n,r,i,o){var a=n&On,s=ct(e),c=s.length;if(c!=ct(t).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in t:Kr.call(t,l)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var d=!0;o.set(e,t),o.set(t,e);for(var h=a;++u<c;){l=s[u];var p=e[l],m=t[l];if(r)var v=a?r(m,p,l,t,e,o):r(p,m,l,e,t,o);if(!(v===_n?p===m||i(p,m,n,r,o):v)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(e),o.delete(t),d}function st(e){return Li(Ot(e,_n,Ft),e+"")}function ct(e){return fe(e,dn,Ri)}function ut(e){return fe(e,hn,Fi)}function lt(){var e=C.iteratee||gn;return e=e===gn?be:e,arguments.length?e(arguments[0],arguments[1]):e}function ft(e,t){var n=e.__data__;return kt(t)?n["string"==typeof t?"string":"hash"]:n.map}function dt(e){for(var t=dn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ct(i)]}return t}function ht(e,t){var n=w(e,t);return ye(n)?n:_n}function pt(e){var t=Kr.call(e,ci),n=e[ci];try{e[ci]=_n;var r=!0}catch(e){}var i=Yr.call(e);return r&&(t?e[ci]=n:delete e[ci]),i}function mt(e,t,n){t=Be(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var a=Tt(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Xt(i)&&bt(a,i)&&(zi(e)||Hi(e))}function vt(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Kr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function gt(e){return"function"!=typeof e.constructor||St(e)?{}:Oi(ri(e))}function yt(e,t,n,r){var i=e.constructor;switch(t){case sr:return Ve(e);case zn:case qn:return new i(+e);case cr:return He(e,r);case ur:case lr:case fr:case dr:case hr:case pr:case mr:case vr:case gr:return Ke(e,r);case Gn:return ze(e,r,n);case Yn:case rr:return new i(e);case tr:return qe(e);case nr:return We(e,r,n);case ir:return Je(e)}}function $t(e){return zi(e)||Hi(e)||!!(si&&e&&e[si])}function bt(e,t){return!!(t=null==t?Rn:t)&&("number"==typeof e||Ir.test(e))&&e>-1&&e%1==0&&e<t}function wt(e,t,n){if(!Qt(n))return!1;var r=typeof t;return!!("number"==r?Gt(n)&&bt(t,n.length):"string"==r&&t in n)&&Kt(n[t],e)}function _t(e,t){if(zi(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!rn(e))||$r.test(e)||!yr.test(e)||null!=t&&e in Object(t)}function kt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function xt(e){return!!Gr&&Gr in e}function St(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qr)}function Ct(e){return e===e&&!Qt(e)}function Mt(e,t){return function(n){return null!=n&&n[e]===t&&(t!==_n||e in Object(n))}}function Et(e){var t=Wt(e,function(e){return n.size===Mn&&n.clear(),e}),n=t.cache;return t}function At(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function It(e){return Yr.call(e)}function Ot(e,t,r){return t=pi(t===_n?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=pi(i.length-t,0),s=Array(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=i[o];return c[t]=r(s),n(e,this,c)}}function Dt(e,t){return t.length<2?e:le(e,je(t,0,-1))}function Pt(e){var t=0,n=0;return function(){var r=vi(),i=Tn-(r-n);if(n=r,i>0){if(++t>=Pn)return arguments[0]}else t=0;return e.apply(_n,arguments)}}function Tt(e){if("string"==typeof e||rn(e))return e;var t=e+"";return"0"==t&&1/e==-jn?"-0":t}function jt(e){if(null!=e){try{return Jr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Rt(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:an(n);return i<0&&(i=pi(r+i,0)),f(e,lt(t,3),i)}function Ft(e){return(null==e?0:e.length)?ce(e,1):[]}function Nt(e){var t=null==e?0:e.length;return t?e[t-1]:_n}function Lt(e,t){return e&&e.length&&t&&t.length?Oe(e,t):e}function Bt(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=lt(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return De(e,i),n}function Ut(e,t,n){return Re(e,t,lt(n,2))}function Vt(e){return e&&e.length?Ne(e):[]}function Ht(e,t){return(zi(e)?i:se)(e,lt(t,3))}function zt(e,t,n,r){e=Gt(e)?e:pn(e),n=n&&!r?an(n):0;var i=e.length;return n<0&&(n=pi(i+n,0)),nn(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&d(e,t,n)>-1}function qt(e,t){return(zi(e)?s:ke)(e,lt(t,3))}function Wt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Sn);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Wt.Cache||N),n}function Jt(e){return ae(e,En|In)}function Kt(e,t){return e===t||e!==e&&t!==t}function Gt(e){return null!=e&&Xt(e.length)&&!Zt(e)}function Yt(e){return en(e)&&Gt(e)}function Zt(e){if(!Qt(e))return!1;var t=de(e);return t==Jn||t==Kn||t==Hn||t==er}function Xt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Rn}function Qt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function en(e){return null!=e&&"object"==typeof e}function tn(e){if(!en(e)||de(e)!=Xn)return!1;var t=ri(e);if(null===t)return!0;var n=Kr.call(t,"constructor")&&t.constructor
;return"function"==typeof n&&n instanceof n&&Jr.call(n)==Zr}function nn(e){return"string"==typeof e||!zi(e)&&en(e)&&de(e)==rr}function rn(e){return"symbol"==typeof e||en(e)&&de(e)==ir}function on(e){return e?(e=sn(e))===jn||e===-jn?(e<0?-1:1)*Fn:e===e?e:0:0===e?e:0}function an(e){var t=on(e),n=t%1;return t===t?n?t-n:t:0}function sn(e){if("number"==typeof e)return e;if(rn(e))return Nn;if(Qt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Qt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(kr,"");var n=Mr.test(e);return n||Ar.test(e)?Pr(e.slice(2),n?2:8):Cr.test(e)?Nn:+e}function cn(e){return Ye(e,hn(e))}function un(e){return null==e?"":Fe(e)}function ln(e,t,n){var r=null==e?_n:le(e,t);return r===_n?n:r}function fn(e,t){return null!=e&&mt(e,t,he)}function dn(e){return Gt(e)?Q(e):we(e)}function hn(e){return Gt(e)?Q(e,!0):_e(e)}function pn(e){return null==e?[]:y(e,dn(e))}function mn(e){return function(){return e}}function vn(e){return e}function gn(e){return be("function"==typeof e?e:ae(e,En))}function yn(){}function $n(e){return _t(e)?m(Tt(e)):Ie(e)}function bn(){return[]}function wn(){return!1}var _n,kn="4.17.4",xn=200,Sn="Expected a function",Cn="__lodash_hash_undefined__",Mn=500,En=1,An=2,In=4,On=1,Dn=2,Pn=800,Tn=16,jn=1/0,Rn=9007199254740991,Fn=1.7976931348623157e308,Nn=NaN,Ln=4294967295,Bn=Ln-1,Un="[object Arguments]",Vn="[object Array]",Hn="[object AsyncFunction]",zn="[object Boolean]",qn="[object Date]",Wn="[object Error]",Jn="[object Function]",Kn="[object GeneratorFunction]",Gn="[object Map]",Yn="[object Number]",Zn="[object Null]",Xn="[object Object]",Qn="[object Promise]",er="[object Proxy]",tr="[object RegExp]",nr="[object Set]",rr="[object String]",ir="[object Symbol]",or="[object Undefined]",ar="[object WeakMap]",sr="[object ArrayBuffer]",cr="[object DataView]",ur="[object Float32Array]",lr="[object Float64Array]",fr="[object Int8Array]",dr="[object Int16Array]",hr="[object Int32Array]",pr="[object Uint8Array]",mr="[object Uint8ClampedArray]",vr="[object Uint16Array]",gr="[object Uint32Array]",yr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$r=/^\w*$/,br=/^\./,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_r=/[\\^$.*+?()[\]{}|]/g,kr=/^\s+|\s+$/g,xr=/\\(\\)?/g,Sr=/\w*$/,Cr=/^[-+]0x[0-9a-f]+$/i,Mr=/^0b[01]+$/i,Er=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Ir=/^(?:0|[1-9]\d*)$/,Or={};Or[ur]=Or[lr]=Or[fr]=Or[dr]=Or[hr]=Or[pr]=Or[mr]=Or[vr]=Or[gr]=!0,Or[Un]=Or[Vn]=Or[sr]=Or[zn]=Or[cr]=Or[qn]=Or[Wn]=Or[Jn]=Or[Gn]=Or[Yn]=Or[Xn]=Or[tr]=Or[nr]=Or[rr]=Or[ar]=!1;var Dr={};Dr[Un]=Dr[Vn]=Dr[sr]=Dr[cr]=Dr[zn]=Dr[qn]=Dr[ur]=Dr[lr]=Dr[fr]=Dr[dr]=Dr[hr]=Dr[Gn]=Dr[Yn]=Dr[Xn]=Dr[tr]=Dr[nr]=Dr[rr]=Dr[ir]=Dr[pr]=Dr[mr]=Dr[vr]=Dr[gr]=!0,Dr[Wn]=Dr[Jn]=Dr[ar]=!1;var Pr=parseInt,Tr="object"==typeof global&&global&&global.Object===Object&&global,jr="object"==typeof self&&self&&self.Object===Object&&self,Rr=Tr||jr||Function("return this")(),Fr="object"==typeof exports&&exports&&!exports.nodeType&&exports,Nr=Fr&&"object"==typeof module&&module&&!module.nodeType&&module,Lr=Nr&&Nr.exports===Fr,Br=Lr&&Tr.process,Ur=function(){try{return Br&&Br.binding&&Br.binding("util")}catch(e){}}(),Vr=Ur&&Ur.isTypedArray,Hr=Array.prototype,zr=Function.prototype,qr=Object.prototype,Wr=Rr["__core-js_shared__"],Jr=zr.toString,Kr=qr.hasOwnProperty,Gr=function(){var e=/[^.]+$/.exec(Wr&&Wr.keys&&Wr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Yr=qr.toString,Zr=Jr.call(Object),Xr=RegExp("^"+Jr.call(Kr).replace(_r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qr=Lr?Rr.Buffer:_n,ei=Rr.Symbol,ti=Rr.Uint8Array,ni=Qr?Qr.allocUnsafe:_n,ri=k(Object.getPrototypeOf,Object),ii=Object.create,oi=qr.propertyIsEnumerable,ai=Hr.splice,si=ei?ei.isConcatSpreadable:_n,ci=ei?ei.toStringTag:_n,ui=function(){try{var e=ht(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),li=Math.floor,fi=Object.getOwnPropertySymbols,di=Qr?Qr.isBuffer:_n,hi=k(Object.keys,Object),pi=Math.max,mi=Math.min,vi=Date.now,gi=ht(Rr,"DataView"),yi=ht(Rr,"Map"),$i=ht(Rr,"Promise"),bi=ht(Rr,"Set"),wi=ht(Rr,"WeakMap"),_i=ht(Object,"create"),ki=jt(gi),xi=jt(yi),Si=jt($i),Ci=jt(bi),Mi=jt(wi),Ei=ei?ei.prototype:_n,Ai=Ei?Ei.valueOf:_n,Ii=Ei?Ei.toString:_n,Oi=function(){function e(){}return function(t){if(!Qt(t))return{};if(ii)return ii(t);e.prototype=t;var n=new e;return e.prototype=_n,n}}();M.prototype.clear=E,M.prototype.delete=A,M.prototype.get=$,M.prototype.has=I,M.prototype.set=O,D.prototype.clear=P,D.prototype.delete=T,D.prototype.get=j,D.prototype.has=R,D.prototype.set=F,N.prototype.clear=L,N.prototype.delete=B,N.prototype.get=U,N.prototype.has=V,N.prototype.set=H,z.prototype.add=z.prototype.push=q,z.prototype.has=W,J.prototype.clear=K,J.prototype.delete=G,J.prototype.get=Y,J.prototype.has=Z,J.prototype.set=X;var Di=et(ue),Pi=tt(),Ti=ui?function(e,t){return ui(e,"toString",{configurable:!0,enumerable:!1,value:mn(t),writable:!0})}:vn,ji=bi&&1/x(new bi([,-0]))[1]==jn?function(e){return new bi(e)}:yn,Ri=fi?function(e){return null==e?[]:(e=Object(e),i(fi(e),function(t){return oi.call(e,t)}))}:bn,Fi=fi?function(e){for(var t=[];e;)c(t,Ri(e)),e=ri(e);return t}:bn,Ni=de;(gi&&Ni(new gi(new ArrayBuffer(1)))!=cr||yi&&Ni(new yi)!=Gn||$i&&Ni($i.resolve())!=Qn||bi&&Ni(new bi)!=nr||wi&&Ni(new wi)!=ar)&&(Ni=function(e){var t=de(e),n=t==Xn?e.constructor:_n,r=n?jt(n):"";if(r)switch(r){case ki:return cr;case xi:return Gn;case Si:return Qn;case Ci:return nr;case Mi:return ar}return t});var Li=Pt(Ti),Bi=Et(function(e){var t=[];return br.test(e)&&t.push(""),e.replace(wr,function(e,n,r,i){t.push(r?i.replace(xr,"$1"):n||e)}),t}),Ui=Pe(Lt),Vi=nt(Rt);Wt.Cache=N;var Hi=pe(function(){return arguments}())?pe:function(e){return en(e)&&Kr.call(e,"callee")&&!oi.call(e,"callee")},zi=Array.isArray,qi=di||wn,Wi=Vr?g(Vr):$e,Ji=Qe(function(e,t,n){Ce(e,t,n)}),Ki=st(function(e,t){var n={};if(null==e)return n;var r=!1;t=s(t,function(t){return t=Be(t,e),r||(r=t.length>1),t}),Ye(e,ut(e),n),r&&(n=ae(n,En|An|In,rt));for(var i=t.length;i--;)Le(n,t[i]);return n}),Gi=st(function(e,t){return null==e?{}:Ee(e,t)});C.constant=mn,C.filter=Ht,C.flatten=Ft,C.iteratee=gn,C.keys=dn,C.keysIn=hn,C.map=qt,C.memoize=Wt,C.merge=Ji,C.omit=Ki,C.pick=Gi,C.property=$n,C.pull=Ui,C.pullAll=Lt,C.remove=Bt,C.toPlainObject=cn,C.uniq=Vt,C.values=pn,C.cloneDeep=Jt,C.eq=Kt,C.find=Vi,C.findIndex=Rt,C.get=ln,C.hasIn=fn,C.identity=vn,C.includes=zt,C.isArguments=Hi,C.isArray=zi,C.isArrayLike=Gt,C.isArrayLikeObject=Yt,C.isBuffer=qi,C.isFunction=Zt,C.isLength=Xt,C.isObject=Qt,C.isObjectLike=en,C.isPlainObject=tn,C.isString=nn,C.isSymbol=rn,C.isTypedArray=Wi,C.last=Nt,C.stubArray=bn,C.stubFalse=wn,C.noop=yn,C.sortedIndexBy=Ut,C.toFinite=on,C.toInteger=an,C.toNumber=sn,C.toString=un,C.VERSION=kn,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Rr._=C,define(function(){return C})):Nr?((Nr.exports=C)._=C,Fr._=C):Rr._=C}.call(this),function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":17}],2:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":18}],3:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":19}],4:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":20}],5:[function(e,t,n){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":21}],6:[function(e,t,n){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":22}],7:[function(e,t,n){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":23}],8:[function(e,t,n){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":24}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/promise"),o=r(i);n.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default(function(e,n){function r(i,a){try{var s=t[i](a),c=s.value}catch(e){return void n(e)}if(!s.done)return o.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}},{"../core-js/promise":6}],10:[function(e,t,n){"use strict";n.__esModule=!0,n.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/define-property"),o=r(i);n.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},{"../core-js/object/define-property":2}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/get-prototype-of"),o=r(i),a=e("../core-js/object/get-own-property-descriptor"),s=r(a);n.default=function e(t,n,r){null===t&&(t=Function.prototype);var i=(0,s.default)(t,n);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var c=i.get;if(void 0!==c)return c.call(r)}},{"../core-js/object/get-own-property-descriptor":3,"../core-js/object/get-prototype-of":4}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/object/set-prototype-of"),o=r(i),a=e("../core-js/object/create"),s=r(a),c=e("../helpers/typeof"),u=r(c);n.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":5,"../helpers/typeof":15}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../helpers/typeof"),o=r(i);n.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":15}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n.__esModule=!0;var i=e("../core-js/symbol/iterator"),o=r(i),a=e("../core-js/symbol"),s=r(a),c="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};n.default="function"==typeof s.default&&"symbol"===c(o.default)?function(e){return void 0===e?"undefined":c(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":c(e)}},{"../core-js/symbol":7,"../core-js/symbol/iterator":8}],16:[function(e,t,n){t.exports=e("regenerator-runtime")},{"regenerator-runtime":114}],17:[function(e,t,n){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function e(t,n){return r.create(t,n)}},{"../../modules/_core":32,"../../modules/es6.object.create":100}],18:[function(e,t,n){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function e(t,n,i){return r.defineProperty(t,n,i)}},{"../../modules/_core":32,"../../modules/es6.object.define-property":101}],19:[function(e,t,n){e("../../modules/es6.object.get-own-property-descriptor");var r=e("../../modules/_core").Object;t.exports=function e(t,n){return r.getOwnPropertyDescriptor(t,n)}},{"../../modules/_core":32,"../../modules/es6.object.get-own-property-descriptor":102}],20:[function(e,t,n){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":32,"../../modules/es6.object.get-prototype-of":103}],21:[function(e,t,n){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":32,"../../modules/es6.object.set-prototype-of":104}],22:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":32,"../modules/es6.object.to-string":105,"../modules/es6.promise":106,"../modules/es6.string.iterator":107,"../modules/es7.promise.finally":109,"../modules/es7.promise.try":110,"../modules/web.dom.iterable":113}],23:[function(e,t,n){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":32,"../../modules/es6.object.to-string":105,"../../modules/es6.symbol":108,"../../modules/es7.symbol.async-iterator":111,"../../modules/es7.symbol.observable":112}],24:[function(e,t,n){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":96,"../../modules/es6.string.iterator":107,"../../modules/web.dom.iterable":113}],25:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],26:[function(e,t,n){t.exports=function(){}},{}],27:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],28:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":51}],29:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-absolute-index");t.exports=function(e){return function(t,n,a){var s=r(t),c=i(s.length),u=o(a,c),l;if(e&&n!=n){for(;c>u;)if((l=s[u++])!=l)return!0}else for(;c>u;u++)if((e||u in s)&&s[u]===n)return e||u||0;return!e&&-1}}},{"./_to-absolute-index":87,"./_to-iobject":89,"./_to-length":90}],30:[function(e,t,n){var r=e("./_cof"),i=e("./_wks")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":31,"./_wks":97}],31:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],32:[function(e,t,n){var r=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},{}],33:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":25}],34:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],35:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":40}],36:[function(e,t,n){var r=e("./_is-object"),i=e("./_global").document,o=r(i)&&r(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":42,"./_is-object":51}],37:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],38:[function(e,t,n){var r=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=r(e),n=i.f;if(n)for(var a=n(e),s=o.f,c=0,u;a.length>c;)s.call(e,u=a[c++])&&t.push(u);return t}},{"./_object-gops":68,"./_object-keys":71,"./_object-pie":72}],39:[function(e,t,n){var r=e("./_global"),i=e("./_core"),o=e("./_ctx"),a=e("./_hide"),s=e("./_has"),c="prototype",u=function(e,t,n){var l=e&u.F,f=e&u.G,d=e&u.S,h=e&u.P,p=e&u.B,m=e&u.W,v=f?i:i[t]||(i[t]={}),g=v[c],y=f?r:d?r[t]:(r[t]||{})[c],b,w,_;f&&(n=t);for(b in n)(w=!l&&y&&void 0!==y[b])&&s(v,b)||(_=w?y[b]:n[b],v[b]=f&&"function"!=typeof y[b]?n[b]:p&&w?o(_,r):m&&y[b]==_?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(_):h&&"function"==typeof _?o(Function.call,_):_,h&&((v.virtual||(v.virtual={}))[b]=_,e&u.R&&g&&!g[b]&&a(g,b,_)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":32,"./_ctx":33,"./_global":42,"./_has":43,"./_hide":44}],40:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],41:[function(e,t,n){var r=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),c=e("./core.get-iterator-method"),u={},l={},n=t.exports=function(e,t,n,f,d){var h=d?function(){return e}:c(e),p=r(n,f,t?2:1),m=0,v,g,y,b;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(o(h)){for(v=s(e.length);v>m;m++)if((b=t?p(a(g=e[m])[0],g[1]):p(e[m]))===u||b===l)return b}else for(y=h.call(e);!(g=y.next()).done;)if((b=i(y,p,g.value,t))===u||b===l)return b};n.BREAK=u,n.RETURN=l},{"./_an-object":28,"./_ctx":33,"./_is-array-iter":49,"./_iter-call":52,"./_to-length":90,"./core.get-iterator-method":98}],42:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],43:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],44:[function(e,t,n){var r=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":35,"./_object-dp":63,"./_property-desc":76}],45:[function(e,t,n){var r=e("./_global").document;t.exports=r&&r.documentElement},{"./_global":42}],46:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":35,"./_dom-create":36,"./_fails":40}],47:[function(e,t,n){t.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],48:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":31}],49:[function(e,t,n){var r=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},{"./_iterators":57,"./_wks":97}],50:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function e(t){return"Array"==r(t)}},{"./_cof":31}],51:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],52:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},{"./_an-object":28}],53:[function(e,t,n){"use strict";var r=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},{"./_hide":44,"./_object-create":62,"./_property-desc":76,"./_set-to-string-tag":81,"./_wks":97}],54:[function(e,t,n){"use strict";var r=e("./_library"),i=e("./_export"),o=e("./_redefine"),a=e("./_hide"),s=e("./_iterators"),c=e("./_iter-create"),u=e("./_set-to-string-tag"),l=e("./_object-gpo"),f=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),h="keys",p="values",m=function(){return this};t.exports=function(e,t,n,v,g,y,b){c(n,t,v);var w=function(e){if(!d&&e in S)return S[e];switch(e){case h:return function t(){return new n(this,e)};case p:return function t(){return new n(this,e)}}return function t(){return new n(this,e)}},_=t+" Iterator",k=g==p,x=!1,S=e.prototype,C=S[f]||S["@@iterator"]||g&&S[g],M=C||w(g),E=g?k?w("entries"):M:void 0,A="Array"==t?S.entries||C:C,I,O,D;if(A&&(D=l(A.call(new e)))!==Object.prototype&&D.next&&(u(D,_,!0),r||"function"==typeof D[f]||a(D,f,m)),k&&C&&C.name!==p&&(x=!0,M=function e(){return C.call(this)}),r&&!b||!d&&!x&&S[f]||a(S,f,M),s[t]=M,s[_]=m,g)if(I={values:k?M:w(p),keys:y?M:w(h),entries:E},b)for(O in I)O in S||o(S,O,I[O]);else i(i.P+i.F*(d||x),t,I);return I}},{"./_export":39,"./_hide":44,"./_iter-create":53,"./_iterators":57,"./_library":58,"./_object-gpo":69,"./_redefine":78,"./_set-to-string-tag":81,"./_wks":97}],55:[function(e,t,n){var r=e("./_wks")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},{"./_wks":97}],56:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],57:[function(e,t,n){t.exports={}},{}],58:[function(e,t,n){t.exports=!0},{}],59:[function(e,t,n){var r=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,c=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return u&&p.NEED&&c(e)&&!o(e,r)&&l(e),e},p=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},{"./_fails":40,"./_has":43,"./_is-object":51,"./_object-dp":63,"./_uid":93}],60:[function(e,t,n){var r=e("./_global"),i=e("./_task").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==e("./_cof")(a);t.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var f=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},{"./_cof":31,"./_global":42,"./_task":86}],61:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=e("./_a-function");t.exports.f=function(e){return new r(e)}},{"./_a-function":25}],62:[function(e,t,n){var r=e("./_an-object"),i=e("./_object-dps"),o=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},c="prototype",u=function(){var t=e("./_dom-create")("iframe"),n=o.length,r="<",i=">",a;for(t.style.display="none",e("./_html").appendChild(t),t.src="javascript:",a=t.contentWindow.document,a.open(),a.write("<script>document.F=Object</script>"),a.close(),u=a.F;n--;)delete u[c][o[n]];return u()};t.exports=Object.create||function e(t,n){var o;return null!==t?(s[c]=r(t),o=new s,s[c]=null,o[a]=t):o=u(),void 0===n?o:i(o,n)}},{"./_an-object":28,"./_dom-create":36,"./_enum-bug-keys":37,"./_html":45,"./_object-dps":64,"./_shared-key":82}],63:[function(e,t,n){var r=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function e(t,n,s){if(r(t),n=o(n,!0),r(s),i)try{return a(t,n,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[n]=s.value),t}},{"./_an-object":28,"./_descriptors":35,"./_ie8-dom-define":46,"./_to-primitive":92}],64:[function(e,t,n){var r=e("./_object-dp"),i=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function e(t,n){i(t);for(var a=o(n),s=a.length,c=0,u;s>c;)r.f(t,u=a[c++],n[u]);return t}},{"./_an-object":28,"./_descriptors":35,"./_object-dp":63,"./_object-keys":71}],65:[function(e,t,n){var r=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),c=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?u:function e(t,n){if(t=o(t),n=a(n,!0),c)try{return u(t,n)}catch(e){}if(s(t,n))return i(!r.f.call(t,n),t[n])}},{"./_descriptors":35,"./_has":43,"./_ie8-dom-define":46,"./_object-pie":72,"./_property-desc":76,"./_to-iobject":89,"./_to-primitive":92}],66:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};t.exports.f=function e(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},{"./_object-gopn":67,"./_to-iobject":89}],67:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function e(t){return r(t,i)}},{"./_enum-bug-keys":37,"./_object-keys-internal":70}],68:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],69:[function(e,t,n){var r=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":43,"./_shared-key":82,"./_to-object":91}],70:[function(e,t,n){var r=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n=i(e),s=0,c=[],u;for(u in n)u!=a&&r(n,u)&&c.push(u);for(;t.length>s;)r(n,u=t[s++])&&(~o(c,u)||c.push(u));return c}},{"./_array-includes":29,"./_has":43,"./_shared-key":82,"./_to-iobject":89}],71:[function(e,t,n){var r=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function e(t){return r(t,i)}},{"./_enum-bug-keys":37,"./_object-keys-internal":70}],72:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],73:[function(e,t,n){var r=e("./_export"),i=e("./_core"),o=e("./_fails");t.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},{"./_core":32,"./_export":39,"./_fails":40}],74:[function(e,t,n){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],75:[function(e,t,n){var r=e("./_an-object"),i=e("./_is-object"),o=e("./_new-promise-capability");t.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},{"./_an-object":28,"./_is-object":51,"./_new-promise-capability":61}],76:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],77:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},{"./_hide":44}],78:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":44}],79:[function(e,t,n){var r=e("./_is-object"),i=e("./_an-object"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(e){n=!0}return function e(t,i){return o(t,i),n?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:o}},{"./_an-object":28,"./_ctx":33,"./_is-object":51,"./_object-gopd":65}],80:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_core"),o=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":32,"./_descriptors":35,"./_global":42,"./_object-dp":63,"./_wks":97}],81:[function(e,t,n){var r=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"./_has":43,"./_object-dp":63,"./_wks":97}],82:[function(e,t,n){var r=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return r[e]||(r[e]=i(e))}},{"./_shared":83,"./_uid":93}],83:[function(e,t,n){var r=e("./_core"),i=e("./_global"),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:e("./_library")?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":32,"./_global":42,"./_library":58}],84:[function(e,t,n){var r=e("./_an-object"),i=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var n=r(e).constructor,a;return void 0===n||void 0==(a=r(n)[o])?t:i(a)}},{"./_a-function":25,"./_an-object":28,"./_wks":97}],85:[function(e,t,n){var r=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,n){var o=String(i(t)),a=r(n),s=o.length,c,u;return a<0||a>=s?e?"":void 0:(c=o.charCodeAt(a),c<55296||c>56319||a+1===s||(u=o.charCodeAt(a+1))<56320||u>57343?e?o.charAt(a):c:e?o.slice(a,a+2):u-56320+(c-55296<<10)+65536)}}},{"./_defined":34,"./_to-integer":88}],86:[function(e,t,n){var r=e("./_ctx"),i=e("./_invoke"),o=e("./_html"),a=e("./_dom-create"),s=e("./_global"),c=s.process,u=s.setImmediate,l=s.clearImmediate,f=s.MessageChannel,d=s.Dispatch,h=0,p={},m="onreadystatechange",v,g,y,b=function(){var e=+this;if(p.hasOwnProperty(e)){var t=p[e];delete p[e],t()}},w=function(e){b.call(e.data)};u&&l||(u=function e(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return p[++h]=function(){i("function"==typeof t?t:Function(t),n)},v(h),h},l=function e(t){delete p[t]},"process"==e("./_cof")(c)?v=function(e){c.nextTick(r(b,e,1))}:d&&d.now?v=function(e){d.now(r(b,e,1))}:f?(g=new f,y=g.port2,g.port1.onmessage=w,v=r(y.postMessage,y,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(v=function(e){s.postMessage(e+"","*")},s.addEventListener("message",w,!1)):v=m in a("script")?function(e){o.appendChild(a("script"))[m]=function(){o.removeChild(this),b.call(e)}}:function(e){setTimeout(r(b,e,1),0)}),t.exports={set:u,clear:l}},{"./_cof":31,"./_ctx":33,"./_dom-create":36,"./_global":42,"./_html":45,"./_invoke":47}],87:[function(e,t,n){var r=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},{"./_to-integer":88}],88:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:r)(e)}},{}],89:[function(e,t,n){
var r=e("./_iobject"),i=e("./_defined");t.exports=function(e){return r(i(e))}},{"./_defined":34,"./_iobject":48}],90:[function(e,t,n){var r=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(r(e),9007199254740991):0}},{"./_to-integer":88}],91:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":34}],92:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":51}],93:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+i).toString(36))}},{}],94:[function(e,t,n){var r=e("./_global"),i=r.navigator;t.exports=i&&i.userAgent||""},{"./_global":42}],95:[function(e,t,n){var r=e("./_global"),i=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":32,"./_global":42,"./_library":58,"./_object-dp":63,"./_wks-ext":96}],96:[function(e,t,n){n.f=e("./_wks")},{"./_wks":97}],97:[function(e,t,n){var r=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o;(t.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},{"./_global":42,"./_shared":83,"./_uid":93}],98:[function(e,t,n){var r=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},{"./_classof":30,"./_core":32,"./_iterators":57,"./_wks":97}],99:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":26,"./_iter-define":54,"./_iter-step":56,"./_iterators":57,"./_to-iobject":89}],100:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":39,"./_object-create":62}],101:[function(e,t,n){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":35,"./_export":39,"./_object-dp":63}],102:[function(e,t,n){var r=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function e(t,n){return i(r(t),n)}})},{"./_object-gopd":65,"./_object-sap":73,"./_to-iobject":89}],103:[function(e,t,n){var r=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function e(t){return i(r(t))}})},{"./_object-gpo":69,"./_object-sap":73,"./_to-object":91}],104:[function(e,t,n){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":39,"./_set-proto":79}],105:[function(e,t,n){},{}],106:[function(e,t,n){"use strict";var r=e("./_library"),i=e("./_global"),o=e("./_ctx"),a=e("./_classof"),s=e("./_export"),c=e("./_is-object"),u=e("./_a-function"),l=e("./_an-instance"),f=e("./_for-of"),d=e("./_species-constructor"),h=e("./_task").set,p=e("./_microtask")(),m=e("./_new-promise-capability"),v=e("./_perform"),g=e("./_user-agent"),y=e("./_promise-resolve"),b="Promise",w=i.TypeError,_=i.process,k=_&&_.versions,x=k&&k.v8||"",S=i[b],C="process"==a(_),M=function(){},E,A,I,O,D=A=m.f,P=!!function(){try{var t=S.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(M,M)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof n&&0!==x.indexOf("6.6")&&-1===g.indexOf("Chrome/66")}catch(e){}}(),T=function(e){var t;return!(!c(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;p(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n=i?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain,c,u,l;try{n?(i||(2==e._h&&N(e),e._h=1),!0===n?c=r:(s&&s.enter(),c=n(r),s&&(s.exit(),l=!0)),c===t.promise?a(w("Promise-chain cycle")):(u=T(c))?u.call(c,o,a):o(c)):a(r)}catch(e){s&&!l&&s.exit(),a(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){h.call(i,function(){var t=e._v,n=F(e),r,o,a;if(n&&(r=v(function(){C?_.emit("unhandledRejection",t,e):(o=i.onunhandledrejection)?o({promise:e,reason:t}):(a=i.console)&&a.error&&a.error("Unhandled promise rejection",t)}),e._h=C||F(e)?2:1),e._a=void 0,n&&r.e)throw r.v})},F=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){h.call(i,function(){var t;C?_.emit("rejectionHandled",e):(t=i.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},B=function(e){var t=this,n;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw w("Promise can't be resolved itself");(n=T(e))?p(function(){var r={_w:t,_d:!1};try{n.call(e,o(B,r,1),o(L,r,1))}catch(e){L.call(r,e)}}):(t._v=e,t._s=1,j(t,!1))}catch(e){L.call({_w:t,_d:!1},e)}}};P||(S=function e(t){l(this,S,b,"_h"),u(t),E.call(this);try{t(o(B,this,1),o(L,this,1))}catch(e){L.call(this,e)}},E=function e(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},E.prototype=e("./_redefine-all")(S.prototype,{then:function e(t,n){var r=D(d(this,S));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=C?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&j(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),I=function(){var e=new E;this.promise=e,this.resolve=o(B,e,1),this.reject=o(L,e,1)},m.f=D=function(e){return e===S||e===O?new I(e):A(e)}),s(s.G+s.W+s.F*!P,{Promise:S}),e("./_set-to-string-tag")(S,b),e("./_set-species")(b),O=e("./_core")[b],s(s.S+s.F*!P,b,{reject:function e(t){var n=D(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(r||!P),b,{resolve:function e(t){return y(r&&this===O?S:this,t)}}),s(s.S+s.F*!(P&&e("./_iter-detect")(function(e){S.all(e).catch(M)})),b,{all:function e(t){var n=this,r=D(n),i=r.resolve,o=r.reject,a=v(function(){var e=[],r=0,a=1;f(t,!1,function(t){var s=r++,c=!1;e.push(void 0),a++,n.resolve(t).then(function(t){c||(c=!0,e[s]=t,--a||i(e))},o)}),--a||i(e)});return a.e&&o(a.v),r.promise},race:function e(t){var n=this,r=D(n),i=r.reject,o=v(function(){f(t,!1,function(e){n.resolve(e).then(r.resolve,i)})});return o.e&&i(o.v),r.promise}})},{"./_a-function":25,"./_an-instance":27,"./_classof":30,"./_core":32,"./_ctx":33,"./_export":39,"./_for-of":41,"./_global":42,"./_is-object":51,"./_iter-detect":55,"./_library":58,"./_microtask":60,"./_new-promise-capability":61,"./_perform":74,"./_promise-resolve":75,"./_redefine-all":77,"./_set-species":80,"./_set-to-string-tag":81,"./_species-constructor":84,"./_task":86,"./_user-agent":94,"./_wks":97}],107:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,n;return t>=e.length?{value:void 0,done:!0}:(n=r(e,t),this._i+=n.length,{value:n,done:!1})})},{"./_iter-define":54,"./_string-at":85}],108:[function(e,t,n){"use strict";var r=e("./_global"),i=e("./_has"),o=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),c=e("./_meta").KEY,u=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),d=e("./_uid"),h=e("./_wks"),p=e("./_wks-ext"),m=e("./_wks-define"),v=e("./_enum-keys"),g=e("./_is-array"),y=e("./_an-object"),b=e("./_is-object"),w=e("./_to-iobject"),_=e("./_to-primitive"),k=e("./_property-desc"),x=e("./_object-create"),S=e("./_object-gopn-ext"),C=e("./_object-gopd"),M=e("./_object-dp"),E=e("./_object-keys"),A=C.f,I=M.f,O=S.f,D=r.Symbol,P=r.JSON,T=P&&P.stringify,j="prototype",R=h("_hidden"),F=h("toPrimitive"),N={}.propertyIsEnumerable,L=l("symbol-registry"),B=l("symbols"),U=l("op-symbols"),V=Object[j],H="function"==typeof D,z=r.QObject,q=!z||!z[j]||!z[j].findChild,W=o&&u(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=A(V,t);r&&delete V[t],I(e,t,n),r&&e!==V&&I(V,t,r)}:I,J=function(e){var t=B[e]=x(D[j]);return t._k=e,t},K=H&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},G=function e(t,n,r){return t===V&&G(U,n,r),y(t),n=_(n,!0),y(r),i(B,n)?(r.enumerable?(i(t,R)&&t[R][n]&&(t[R][n]=!1),r=x(r,{enumerable:k(0,!1)})):(i(t,R)||I(t,R,k(1,{})),t[R][n]=!0),W(t,n,r)):I(t,n,r)},Y=function e(t,n){y(t);for(var r=v(n=w(n)),i=0,o=r.length,a;o>i;)G(t,a=r[i++],n[a]);return t},Z=function e(t,n){return void 0===n?x(t):Y(x(t),n)},X=function e(t){var n=N.call(this,t=_(t,!0));return!(this===V&&i(B,t)&&!i(U,t))&&(!(n||!i(this,t)||!i(B,t)||i(this,R)&&this[R][t])||n)},Q=function e(t,n){if(t=w(t),n=_(n,!0),t!==V||!i(B,n)||i(U,n)){var r=A(t,n);return!r||!i(B,n)||i(t,R)&&t[R][n]||(r.enumerable=!0),r}},ee=function e(t){for(var n=O(w(t)),r=[],o=0,a;n.length>o;)i(B,a=n[o++])||a==R||a==c||r.push(a);return r},te=function e(t){for(var n=t===V,r=O(n?U:w(t)),o=[],a=0,s;r.length>a;)!i(B,s=r[a++])||n&&!i(V,s)||o.push(B[s]);return o};H||(D=function e(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),n=function(e){this===V&&n.call(U,e),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,k(1,e))};return o&&q&&W(V,t,{configurable:!0,set:n}),J(t)},s(D[j],"toString",function e(){return this._k}),C.f=Q,M.f=G,e("./_object-gopn").f=S.f=ee,e("./_object-pie").f=X,e("./_object-gops").f=te,o&&!e("./_library")&&s(V,"propertyIsEnumerable",X,!0),p.f=function(e){return J(h(e))}),a(a.G+a.W+a.F*!H,{Symbol:D});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)h(ne[re++]);for(var ie=E(h.store),oe=0;ie.length>oe;)m(ie[oe++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return i(L,e+="")?L[e]:L[e]=D(e)},keyFor:function e(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var n in L)if(L[n]===t)return n},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!H,"Object",{create:Z,defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),P&&a(a.S+a.F*(!H||u(function(){var e=D();return"[null]"!=T([e])||"{}"!=T({a:e})||"{}"!=T(Object(e))})),"JSON",{stringify:function e(t){for(var n=[t],r=1,i,o;arguments.length>r;)n.push(arguments[r++]);if(o=i=n[1],(b(i)||void 0!==t)&&!K(t))return g(i)||(i=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!K(t))return t}),n[1]=i,T.apply(P,n)}}),D[j][F]||e("./_hide")(D[j],F,D[j].valueOf),f(D,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":28,"./_descriptors":35,"./_enum-keys":38,"./_export":39,"./_fails":40,"./_global":42,"./_has":43,"./_hide":44,"./_is-array":50,"./_is-object":51,"./_library":58,"./_meta":59,"./_object-create":62,"./_object-dp":63,"./_object-gopd":65,"./_object-gopn":67,"./_object-gopn-ext":66,"./_object-gops":68,"./_object-keys":71,"./_object-pie":72,"./_property-desc":76,"./_redefine":78,"./_set-to-string-tag":81,"./_shared":83,"./_to-iobject":89,"./_to-primitive":92,"./_uid":93,"./_wks":97,"./_wks-define":95,"./_wks-ext":96}],109:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_core"),o=e("./_global"),a=e("./_species-constructor"),s=e("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},{"./_core":32,"./_export":39,"./_global":42,"./_promise-resolve":75,"./_species-constructor":84}],110:[function(e,t,n){"use strict";var r=e("./_export"),i=e("./_new-promise-capability"),o=e("./_perform");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},{"./_export":39,"./_new-promise-capability":61,"./_perform":74}],111:[function(e,t,n){e("./_wks-define")("asyncIterator")},{"./_wks-define":95}],112:[function(e,t,n){e("./_wks-define")("observable")},{"./_wks-define":95}],113:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),i=e("./_hide"),o=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=r[u],f=l&&l.prototype;f&&!f[a]&&i(f,a,u),o[u]=o.Array}},{"./_global":42,"./_hide":44,"./_iterators":57,"./_wks":97,"./es6.array.iterator":99}],114:[function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=e("./runtime"),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},{"./runtime":115}],115:[function(e,t,n){!function(e){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),s=new h(r||[]);return a._invoke=u(e,n,s),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function t(n,i,o,a){var s=r(e[n],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&g.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(u).then(function(e){c.value=e,o(c)},a)}a(s.arg)}function n(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function u(e,t,n){var i=C;return function o(a,s){if(i===E)throw new Error("Generator is already running");if(i===A){if("throw"===a)throw s;return m()}for(n.method=a,n.arg=s;;){var c=n.delegate;if(c){var u=l(c,n);if(u){if(u===I)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=A,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=E;var f=r(e,t,n);if("normal"===f.type){if(i=n.done?A:M,f.arg===I)continue;return{value:f.arg,done:n.done}}"throw"===f.type&&(i=A,n.method="throw",n.arg=f.arg)}}}function l(e,t){var n=e.iterator[t.method];if(n===y){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,I;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,I):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var v=Object.prototype,g=v.hasOwnProperty,y,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",k=b.toStringTag||"@@toStringTag",x="object"==typeof t,S=e.regeneratorRuntime;if(S)return void(x&&(t.exports=S));S=e.regeneratorRuntime=x?t.exports:{},S.wrap=n;var C="suspendedStart",M="suspendedYield",E="executing",A="completed",I={},O={};O[w]=function(){return this};var D=Object.getPrototypeOf,P=D&&D(D(p([])));P&&P!==v&&g.call(P,w)&&(O=P);var T=a.prototype=i.prototype=Object.create(O);o.prototype=T.constructor=a,a.constructor=o,a[k]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,k in e||(e[k]="GeneratorFunction")),e.prototype=Object.create(T),e},S.awrap=function(e){return{__await:e}},s(c.prototype),c.prototype[_]=function(){return this},S.AsyncIterator=c,S.async=function(e,t,r,i){var o=new c(n(e,t,r,i));return S.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(T),T[k]="Generator",T[w]=function(){return this},T.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),I}}}(function(){return this}()||Function("return this")())},{}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function o(e){e=e.split("?").slice(-1)[0];var t={};return e.replace(/([^=&]+)=([^&]*)/g,function(e,n,r){t[decodeURIComponent(n)]=decodeURIComponent(r)}),t}function a(){return window&&window.process&&window.process.type&&window.process.versions.electron}function s(){return window&&window.process&&window.process.type&&"darwin"==window.process.platform}function c(e,t,n){var r;return function(){var i=this,o=arguments,a=function t(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}var u=e("babel-runtime/regenerator"),l=r(u),f=e("babel-runtime/helpers/asyncToGenerator"),d=r(f),h=e("babel-runtime/helpers/possibleConstructorReturn"),p=r(h),m=e("babel-runtime/helpers/get"),v=r(m),g=e("babel-runtime/helpers/inherits"),y=r(g),b=e("babel-runtime/helpers/typeof"),w=r(b),k=e("babel-runtime/helpers/classCallCheck"),x=r(k),S=e("babel-runtime/helpers/createClass"),C=r(S),M=M||{};angular.module("app",[]),Array.prototype.containsPrimitiveSubset=function(e){var t=this;return!e.some(function(e){return-1===t.indexOf(e)})},Array.prototype.containsObjectSubset=function(e){var t=this;return!e.some(function(e){return!_.find(t,e)})},Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function e(t,n){function r(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return!1;for(var a=0|n,s=Math.max(a>=0?a:o-Math.abs(a),0);s<o;){if(r(i[s],t))return!0;s++}return!1}}),angular.module("app").config(["$locationProvider",function(e){a()?e.html5Mode(!1):window.history&&window.history.pushState&&e.html5Mode({enabled:!0,requireBase:!1})}]),angular.module("app").directive("editorSection",["$timeout","$sce",function(e,t){return{restrict:"E",scope:{save:"&",remove:"&",note:"=",updateTags:"&"},templateUrl:"editor.html",replace:!0,controller:"EditorCtrl",controllerAs:"ctrl",bindToController:!0,link:function e(t,n,r,i){t.$watch("ctrl.note",function(e,t){e&&i.noteDidChange(e,t)})}}}]).controller("EditorCtrl",["$sce","$timeout","authManager","$rootScope","actionsManager","syncManager","modelManager","themeManager","componentManager","storageManager",function(e,t,n,r,i,o,s,c,u,l){var f=this;this.spellcheck=!0,this.componentManager=u,r.$on("sync:taking-too-long",function(){this.syncTakingTooLong=!0}.bind(this)),r.$on("sync:completed",function(){this.syncTakingTooLong=!1}.bind(this)),r.$on("tag-changed",function(){this.loadTagsString()}.bind(this)),s.addItemSyncObserver("component-manager","Note",function(e,t,n,i){if(f.note){if(f.note.deleted)return void r.notifyDelete();if(Z.isMappingSourceRetrieved(i)){e.find(function(e){return e.uuid==f.note.uuid})&&f.loadTagsString()}}}),this.noteDidChange=function(e,t){this.setNote(e,t),this.reloadComponentContext()},this.setNote=function(e,n){var r=this;this.showExtensions=!1,this.showMenu=!1,this.loadTagsString();var i=function e(){r.noteReady=!0,t(function(){r.loadPreferences()})},o=this.editorForNote(e);o&&o!=this.selectedEditor?(this.noteReady=!1,t(function(){r.selectedEditor=o,i()})):o?i():(this.selectedEditor=null,i()),n&&n!=e&&(n.hasChanges?this.save()(n,null):n.dummy&&this.remove()(n))},s.addItemSyncObserver("component-manager","SN|Component",function(e,t,n,r){if(f.note){if(0!=e.filter(function(e){return e.isEditor()}).length){var i=f.editorForNote(f.note);f.selectedEditor=i}}}),this.editorForNote=function(e){var t=u.componentsForArea("editor-editor"),n=!0,r=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.isExplicitlyEnabledForItem(e))return s}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}if(!e.getAppDataItem("prefersPlainEditor"))return t.filter(function(e){return e.isDefaultEditor()})[0]},this.onEditorMenuClick=function(){this.showEditorMenu=!this.showEditorMenu,this.showMenu=!1,this.showExtensions=!1},this.closeAllMenus=function(){this.showEditorMenu=!1,this.showMenu=!1,this.showExtensions=!1},this.editorMenuOnSelect=function(e){var n=this;if(e&&"editor-editor"!=e.area)"editor-stack"==e.area&&this.toggleStackComponentForCurrentItem(e);else{this.showEditorMenu=!1;var r=e;this.selectedEditor&&r!==this.selectedEditor&&this.disassociateComponentWithCurrentNote(this.selectedEditor),r?(1==this.note.getAppDataItem("prefersPlainEditor")&&(this.note.setAppDataItem("prefersPlainEditor",!1),this.note.setDirty(!0)),this.associateComponentWithCurrentNote(r)):(this.note.getAppDataItem("prefersPlainEditor")||(this.note.setAppDataItem("prefersPlainEditor",!0),this.note.setDirty(!0)),t(function(){n.reloadFont()})),this.selectedEditor=r}o.sync("editorMenuOnSelect")}.bind(this),this.hasAvailableExtensions=function(){return i.extensionsInContextOfItem(this.note).length>0},this.focusEditor=function(e){setTimeout(function(){var e=document.getElementById("note-text-editor");e&&e.focus()},e)},this.clickedTextArea=function(){this.showMenu=!1};var d;this.saveNote=function(e){var n=this.note;n.dummy=!1,this.save()(n,function(e){e?(d&&t.cancel(d),d=t(function(){this.showAllChangesSavedStatus()}.bind(this),200)):(d&&t.cancel(d),d=t(function(){this.showErrorStatus()}.bind(this),200))}.bind(this))},this.saveTitle=function(e){e.target.blur(),this.saveNote(e),this.focusEditor()};var h;this.changesMade=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.note.dummy=!1;var n=e?0:275;this.note.hasChanges=!e,h&&t.cancel(h),d&&t.cancel(d),h=t(function(){this.showSavingStatus(),this.saveNote()}.bind(this),n)},this.showSavingStatus=function(){this.noteStatus=e.trustAsHtml("Saving...")},this.showAllChangesSavedStatus=function(){this.saveError=!1,this.syncTakingTooLong=!1;var t="All changes saved";n.offline()&&(t+=" (offline)"),this.noteStatus=e.trustAsHtml(t)},this.showErrorStatus=function(){this.saveError=!0,this.syncTakingTooLong=!1,this.noteStatus=e.trustAsHtml("<span class='error bold'>Sync Unreachable</span><br>All changes saved offline")},this.contentChanged=function(){this.changesMade()},this.nameChanged=function(){this.changesMade()},this.onNameFocus=function(){this.editingName=!0},this.onContentFocus=function(){r.$broadcast("editorFocused")},this.onNameBlur=function(){this.editingName=!1},this.selectedMenuItem=function(e,t){t&&(this.showMenu=!1),e.stopPropagation()},this.deleteNote=function(){var e="'"+this.note.title+"'";confirm("Are you sure you want to delete this note?")&&(this.remove()(this.note),this.showMenu=!1)},this.togglePin=function(){this.note.setAppDataItem("pinned",!this.note.pinned),this.changesMade()},this.toggleLockNote=function(){this.note.setAppDataItem("locked",!this.note.locked),this.changesMade()},this.toggleArchiveNote=function(){this.note.setAppDataItem("archived",!this.note.archived),this.changesMade(!0),r.$broadcast("noteArchived")},this.clickedEditNote=function(){this.focusEditor(100)},this.loadTagsString=function(){this.tagsString=this.note.tagsString()},this.addTag=function(e){var t=this.note.tags,n=t.map(function(e){return e.title});n.push(e.title),this.updateTags()(this.note,n),this.loadTagsString()},this.removeTag=function(e){var t=this.note.tags,n=t.map(function(e){return e.title}).filter(function(t){return t!==e.title});this.updateTags()(this.note,n),this.loadTagsString()},this.updateTagsFromTagsString=function(){if(this.tagsString!=this.note.tagsString()){var e=this.tagsString.split("#").filter(function(e){return e.length>0}).map(function(e){return e.trim()});this.note.dummy=!1,this.updateTags()(this.note,e)}},this.resizeControl={},this.onPanelResizeFinish=function(e,t,r){r?n.setUserPrefValue("editorWidth",null):void 0!==e&&null!==e&&n.setUserPrefValue("editorWidth",e),void 0!==t&&null!==t&&n.setUserPrefValue("editorLeft",t),n.syncUserPreferences()},r.$on("user-preferences-changed",function(){f.loadPreferences()}),this.loadPreferences=function(){if(this.monospaceFont=n.getUserPrefValue("monospaceFont","monospace"),this.spellcheck=n.getUserPrefValue("spellcheck",!0),document.getElementById("editor-content")){this.reloadFont();var e=n.getUserPrefValue("editorWidth",null);null!==e&&this.resizeControl.setWidth(e);var t=n.getUserPrefValue("editorLeft",null);null!==t&&this.resizeControl.setLeft(t)}},this.reloadFont=function(){var e=document.getElementById("note-text-editor");e&&(this.monospaceFont?a()?e.style.fontFamily="Menlo, Consolas, 'DejaVu Sans Mono', monospace":e.style.fontFamily="monospace":e.style.fontFamily="inherit")},this.toggleKey=function(e){var r=this;this[e]=!this[e],n.setUserPrefValue(e,this[e],!0),this.reloadFont(),"spellcheck"==e&&(this.noteReady=!1,t(function(){r.noteReady=!0,t(function(){r.reloadFont()})},0))},u.registerHandler({identifier:"editor",areas:["note-tags","editor-stack","editor-editor"],activationHandler:function e(t){"note-tags"===t.area?f.tagsComponent=t.active?t:null:"editor-editor"==t.area?f.selectedEditor?t.isExplicitlyEnabledForItem(f.note)&&(f.selectedEditor=t):t.active&&f.note&&(t.isExplicitlyEnabledForItem(f.note)||t.isDefaultEditor())?f.selectedEditor=t:f.selectedEditor=null:"editor-stack"==t.area&&f.reloadComponentContext()},contextRequestHandler:function e(t){return f.note},focusHandler:function e(t,n){t.isEditor()&&n&&f.closeAllMenus()},actionHandler:function e(n,r,i){if("set-size"===r){var o=function e(t,n){var r="string"==typeof n.width?n.width:i.width+"px",o="string"==typeof n.height?n.height:i.height+"px";t.setAttribute("style","width:"+r+"; height:"+o+"; ")};if("container"==i.type&&"note-tags"==n.area){o(document.getElementById("note-tags-component-container"),i)}}else if("associate-item"===r){if("Tag"==i.item.content_type){var a=s.findItem(i.item.uuid);f.addTag(a)}}else if("deassociate-item"===r){var a=s.findItem(i.item.uuid);f.removeTag(a)}else"save-items"!==r&&"save-success"!==r&&"save-error"!=r||i.items.map(function(e){return e.uuid}).includes(f.note.uuid)&&("save-items"==r?(f.componentSaveTimeout&&t.cancel(f.componentSaveTimeout),f.componentSaveTimeout=t(f.showSavingStatus.bind(f),10)):(f.componentStatusTimeout&&t.cancel(f.componentStatusTimeout),f.componentStatusTimeout="save-success"==r?t(f.showAllChangesSavedStatus.bind(f),400):t(f.showErrorStatus.bind(f),400)))}}),this.reloadComponentContext=function(){this.componentStack=u.componentsForArea("editor-stack");var e=!0,t=!1,n=void 0;try{for(var r=this.componentStack[Symbol.iterator](),i;!(e=(i=r.next()).done);e=!0){var o=i.value;o.active&&(o.hidden=!this.note||o.isExplicitlyDisabledForItem(this.note))}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}u.contextItemDidChangeInArea("note-tags"),u.contextItemDidChangeInArea("editor-stack"),u.contextItemDidChangeInArea("editor-editor")},this.toggleStackComponentForCurrentItem=function(e){e.hidden?(e.hidden=!1,e.active||u.activateComponent(e),this.associateComponentWithCurrentNote(e),u.contextItemDidChangeInArea("editor-stack")):(e.hidden=!0,this.disassociateComponentWithCurrentNote(e))},this.disassociateComponentWithCurrentNote=function(e){var t=this;e.associatedItemIds=e.associatedItemIds.filter(function(e){return e!==t.note.uuid}),e.disassociatedItemIds.includes(this.note.uuid)||e.disassociatedItemIds.push(this.note.uuid),e.setDirty(!0)},this.associateComponentWithCurrentNote=function(e){var t=this;e.disassociatedItemIds=e.disassociatedItemIds.filter(function(e){return e!==t.note.uuid}),e.associatedItemIds.includes(this.note.uuid)||e.associatedItemIds.push(this.note.uuid),e.setDirty(!0)},this.onSystemEditorLoad=function(){if(!this.loadedTabListener){this.loadedTabListener=!0;var e=this,t=function t(n){if(!n.shiftKey&&9==n.which){if(n.preventDefault(),!document.execCommand("insertText",!1,"\t")){var r=this.selectionStart,i=this.selectionEnd,o="    ";this.value=this.value.substring(0,r)+"    "+this.value.substring(i),this.selectionStart=this.selectionEnd=r+4}e.note.text=this.value,e.changesMade()}
},n=document.getElementById("note-text-editor");n.addEventListener("keydown",t),angular.element(n).on("$destroy",function(){window.removeEventListener("keydown",t),this.loadedTabListener=!1}.bind(this))}}}]),angular.module("app").directive("footer",["authManager",function(e){return{restrict:"E",scope:{},templateUrl:"footer.html",replace:!0,controller:"FooterCtrl",controllerAs:"ctrl",bindToController:!0,link:function e(t,n,r,i){t.$on("sync:updated_token",function(){i.syncUpdated(),i.findErrors(),i.updateOfflineStatus()}),t.$on("sync:error",function(){i.findErrors(),i.updateOfflineStatus()})}}}]).controller("FooterCtrl",["$rootScope","authManager","modelManager","$timeout","dbManager","syncManager","storageManager","passcodeManager","componentManager","singletonManager","nativeExtManager",function(e,t,n,r,i,o,a,s,c,u,l){var f=this;this.securityUpdateAvailable=t.checkForSecurityUpdate(),e.$on("security-update-status-changed",function(){f.securityUpdateAvailable=t.securityUpdateAvailable}),this.openSecurityUpdate=function(){t.presentPasswordWizard("upgrade-security")},e.$on("reload-ext-data",function(){if(!f.reloadInProgress){f.reloadInProgress=!0;var t=f.rooms.find(function(e){return e.package_info.identifier==l.extensionsManagerIdentifier});t&&(f.selectRoom(t),r(function(){f.selectRoom(t),f.reloadInProgress=!1,e.$broadcast("ext-reload-complete")},2e3))}}),this.getUser=function(){return t.user},this.updateOfflineStatus=function(){this.offline=t.offline()},this.updateOfflineStatus(),this.offline&&!s.hasPasscode()&&(this.showAccountMenu=!0),this.findErrors=function(){this.error=o.syncStatus.error},this.findErrors(),this.onAuthSuccess=function(){this.showAccountMenu=!1}.bind(this),this.accountMenuPressed=function(){this.showAccountMenu=!this.showAccountMenu,this.closeAllRooms()},this.closeAccountMenu=function(){f.showAccountMenu=!1},this.hasPasscode=function(){return s.hasPasscode()},this.lockApp=function(){e.lockApplication()},this.refreshData=function(){var e=this;this.isRefreshing=!0,o.sync(function(t){r(function(){this.isRefreshing=!1}.bind(e),200),t&&t.error?alert("There was an error syncing. Please try again. If all else fails, log out and log back in."):e.syncUpdated()},{force:!0},"refreshData")},this.syncUpdated=function(){this.lastSyncDate=new Date},e.$on("new-update-available",function(e){r(function(){this.onNewUpdateAvailable()}.bind(this))}.bind(this)),this.onNewUpdateAvailable=function(){this.newUpdateAvailable=!0},this.clickedNewUpdateAnnouncement=function(){this.newUpdateAvailable=!1,alert("A new update is ready to install. Please use the top-level 'Updates' menu to manage installation.")},this.componentManager=c,this.rooms=[],n.addItemSyncObserver("room-bar","SN|Component",function(e,t,n,r){var i=e.filter(function(e){return"rooms"==e.area});f.rooms=_.uniq(f.rooms.concat(i)).filter(function(e){return!e.deleted})}),c.registerHandler({identifier:"roomBar",areas:["rooms","modal"],activationHandler:function e(t){},actionHandler:function e(t,n,r){"set-size"==n&&t.setLastSize(r)},focusHandler:function e(t,n){t.isEditor()&&n&&(f.closeAllRooms(),f.closeAccountMenu())}}),e.$on("editorFocused",function(){f.closeAllRooms(),f.closeAccountMenu()}),this.onRoomDismiss=function(e){e.showRoom=!1},this.closeAllRooms=function(){var e=!0,t=!1,n=void 0;try{for(var r=this.rooms[Symbol.iterator](),i;!(e=(i=r.next()).done);e=!0){i.value.showRoom=!1}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}},this.selectRoom=function(e){e.showRoom=!e.showRoom}}]),angular.module("app").controller("HomeCtrl",["$scope","$location","$rootScope","$timeout","modelManager","dbManager","syncManager","authManager","themeManager","passcodeManager","storageManager","migrationManager",function(e,t,n,r,i,o,s,c,u,l,f,d){function h(){p(),m(),v(),g()}function p(){o.setLocked(!1),o.openDatabase(null,function(){s.clearSyncToken(),s.sync("openDatabase")})}function m(){c.loadInitialData(),s.loadLocalItems(function(t){e.allTag.didLoad=!0,e.$apply(),n.$broadcast("initial-data-loaded"),s.sync("initiateSync"),setInterval(function(){s.sync("timer")},3e4)})}function v(){var t=new L({all:!0,title:"All"});t.needsLoad=!0,e.allTag=t,e.tags=i.tags,e.allTag.notes=i.notes}function g(){var t=new L({archiveTag:!0,title:"Archived"});e.archiveTag=t,e.archiveTag.notes=i.notes}function y(e){return t.search()[e]}function b(){var e=y("server"),t=y("email"),n=y("pw");if(c.offline())c.login(e,t,n,!1,!1,{},function(e){window.location.reload()});else{if(s.serverURL===e&&c.user.email===t)return;c.signOut(),s.destroyLocalData(function(){window.location.reload()})}}f.initialize(l.hasPasscode(),c.isEphemeralSession());try{e.platform=function(){var e=navigator.platform.toLowerCase(),t="";return-1!==e.indexOf("mac")?t="mac":-1!==e.indexOf("win")&&(t="windows"),-1!==e.indexOf("linux")&&(t="linux"),t+(a()?"-desktop":"-web")}()}catch(e){}e.onUpdateAvailable=function(e){n.$broadcast("new-update-available",e)},n.sync=function(e){s.sync("$rootScope.sync - "+e)},n.lockApplication=function(){window.location.reload()},l.isLocked()?e.needsUnlock=!0:h(),e.onSuccessfulUnlock=function(){r(function(){e.needsUnlock=!1,h()})},e.updateTagsForNote=function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c=e.tags[Symbol.iterator](),u;!(r=(u=c.next()).done);r=!0){var l=u.value;-1===t.indexOf(l.title)&&n.push(l)}}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}var f=!0,d=!1,h=void 0;try{for(var p=n[Symbol.iterator](),m;!(f=(m=p.next()).done);f=!0){var v=m.value;e.removeItemAsRelationship(v),v.removeItemAsRelationship(e),v.setDirty(!0)}}catch(e){d=!0,h=e}finally{try{!f&&p.return&&p.return()}finally{if(d)throw h}}var g=[],y=!0,b=!1,w=void 0;try{for(var k=t[Symbol.iterator](),x;!(y=(x=k.next()).done);y=!0){var S=x.value;_.find(e.tags,{title:S})||g.push(i.findOrCreateTagByTitle(S))}}catch(e){b=!0,w=e}finally{try{!y&&k.return&&k.return()}finally{if(b)throw w}}var C=!0,M=!1,E=void 0;try{for(var A=g[Symbol.iterator](),I;!(C=(I=A.next()).done);C=!0){var l=I.value;i.createRelationshipBetweenItems(e,l)}}catch(e){M=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(M)throw E}}e.setDirty(!0),s.sync("updateTagsForNote")},e.tagsWillMakeSelection=function(e){},e.tagsSelectionMade=function(t){e.selectedNote&&e.selectedNote.dummy&&i.removeItemLocally(e.selectedNote),e.selectedTag=t},e.tagsAddNew=function(e){i.addItem(e)},e.tagsSave=function(t,r){if(!t.title||0==t.title.length)return void e.removeTag(t);t.setDirty(!0),s.sync(r,null,"tagsSave"),n.$broadcast("tag-changed"),i.resortTag(t)},e.removeTag=function(t){confirm("Are you sure you want to delete this tag? Note: deleting a tag will not delete its notes.")&&(i.setItemToBeDeleted(t),s.sync(function(){e.safeApply()},null,"removeTag"))},e.notesSelectionMade=function(t){e.selectedNote=t},e.notesAddNew=function(t){i.addItem(t),e.selectedTag.all||e.selectedTag.archiveTag||i.createRelationshipBetweenItems(e.selectedTag,t)},e.saveNote=function(t,n){t.setDirty(!0),s.sync(function(r){r&&r.error?(e.didShowErrorAlert||(e.didShowErrorAlert=!0,alert("There was an error saving your note. Please try again.")),n&&n(!1)):(t.hasChanges=!1,n&&n(!0))},null,"saveNote")},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?this.$eval(e):this.$apply(e)},n.notifyDelete=function(){r(function(){n.$broadcast("noteDeleted")}.bind(this),0)},e.deleteNote=function(t){if(i.setItemToBeDeleted(t),t==e.selectedNote&&(e.selectedNote=null),t.dummy)return i.removeItemLocally(t),void n.notifyDelete();s.sync(function(){c.offline()?setTimeout(function(){n.notifyDelete(),e.safeApply()},50):n.notifyDelete()},null,"deleteNote")},y("server")&&b()}]);var E=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="lock-screen.html",this.scope={onSuccess:"&"}}return(0,C.default)(e,[{key:"controller",value:["$scope","passcodeManager","authManager","syncManager",function e(t,n,r,i){"ngInject";t.formData={},t.submitPasscodeForm=function(){n.unlock(t.formData.passcode,function(e){if(!e)return void alert("Invalid passcode. Please try again.");t.onSuccess()()})},t.forgotPasscode=function(){t.formData.showRecovery=!0},t.beginDeleteData=function(){confirm("Are you sure you want to clear all local data?")&&(r.signOut(),i.destroyLocalData(function(){window.location.reload()}))}}]}]),e}();angular.module("app").directive("lockScreen",function(){return new E}),angular.module("app").directive("notesSection",function(){return{scope:{addNew:"&",selectionMade:"&",tag:"="},templateUrl:"notes.html",replace:!0,controller:"NotesCtrl",controllerAs:"ctrl",bindToController:!0,link:function e(t,n,r,i){t.$watch("ctrl.tag",function(e,n){e&&(e.needsLoad?t.$watch("ctrl.tag.didLoad",function(t){t&&(e.needsLoad=!1,i.tagDidChange(e,n))}):i.tagDidChange(e,n))})}}}).controller("NotesCtrl",["authManager","$timeout","$rootScope","modelManager","storageManager","desktopManager",function(e,t,n,r,i,o){var a=this;this.panelController={},n.$on("user-preferences-changed",function(){a.loadPreferences()}),this.loadPreferences=function(){var n=this,r=this.sortBy;this.sortBy=e.getUserPrefValue("sortBy","created_at"),"updated_at"==this.sortBy&&(this.sortBy="client_updated_at"),r&&r!=this.sortBy&&t(function(){n.selectFirstNote()}),this.sortDescending="title"!=this.sortBy,this.showArchived=e.getUserPrefValue("showArchived",!1),this.hidePinned=e.getUserPrefValue("hidePinned",!1),this.hideNotePreview=e.getUserPrefValue("hideNotePreview",!1),this.hideDate=e.getUserPrefValue("hideDate",!1),this.hideTags=e.getUserPrefValue("hideTags",!1);var i=e.getUserPrefValue("notesPanelWidth")},this.loadPreferences(),this.onPanelResize=function(t){e.setUserPrefValue("notesPanelWidth",t),e.syncUserPreferences()},angular.element(document).ready(function(){a.loadPreferences()}),n.$on("editorFocused",function(){this.showMenu=!1}.bind(this)),n.$on("noteDeleted",function(){t(this.onNoteRemoval.bind(this))}.bind(this)),n.$on("noteArchived",function(){t(this.onNoteRemoval.bind(this))}.bind(this)),this.onNoteRemoval=function(){var e=this.visibleNotes();this.selectedIndex<e.length?this.selectNote(e[Math.max(this.selectedIndex,0)]):this.selectNote(e[e.length-1])};var s=51;this.DefaultNotesToDisplayValue=2500,this.paginate=function(){this.notesToDisplay+=this.DefaultNotesToDisplayValue},this.resetPagination=function(){this.notesToDisplay=this.DefaultNotesToDisplayValue},this.resetPagination(),this.panelTitle=function(){return this.isFiltering()?this.tag.notes.filter(function(e){return e.visible}).length+" search results":this.tag?this.tag.title+" notes":void 0},this.optionsSubtitle=function(){var e="";return"created_at"==this.sortBy?e+=" Date Added":"client_updated_at"==this.sortBy?e+=" Date Modifed":"title"==this.sortBy&&(e+=" Title"),!this.showArchived||this.tag&&this.tag.archiveTag||(e+=" | + Archived"),this.hidePinned&&(e+=" |  Pinned"),e},this.toggleKey=function(t){this[t]=!this[t],e.setUserPrefValue(t,this[t]),e.syncUserPreferences()},this.tagDidChange=function(e,t){var n=document.getElementById("notes-scrollable");n&&(n.scrollTop=0,n.scrollLeft=0),this.resetPagination(),this.showMenu=!1,this.selectedNote&&this.selectedNote.dummy&&t&&_.remove(t.notes,this.selectedNote),this.noteFilter.text="",this.setNotes(e.notes)},this.setNotes=function(e){e.forEach(function(e){e.visible=!0});var t=0==e.length;this.selectFirstNote(t)},this.visibleNotes=function(){return this.sortedNotes.filter(function(e){return e.visible})},this.selectFirstNote=function(e){var t=this.visibleNotes();t.length>0?this.selectNote(t[0]):e&&this.createNewNote()},this.selectNote=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void this.createNewNote();this.selectedNote=e,e.conflict_of=null,this.selectionMade()(e),this.selectedIndex=Math.max(this.visibleNotes().indexOf(e),0),t&&this.isFiltering()&&o.searchText(this.noteFilter.text)},this.isFiltering=function(){return this.noteFilter.text&&this.noteFilter.text.length>0},this.createNewNote=function(){var e=new Date;e=e.toString().slice(4,15),this.sortedNotes.some(function(t){return t.created_at.toString().slice(4,15)==e})||(this.newNote=r.createItem({content_type:"Note",dummy:!0,text:""}),this.newNote.title="",this.selectNote(this.newNote),this.addNew()(this.newNote))},this.noteFilter={text:""},this.filterNotes=function(e){if(e.archived&&!this.showArchived&&!this.tag.archiveTag||e.pinned&&this.hidePinned)return e.visible=!1,e.visible;var t=this.noteFilter.text.toLowerCase();if(0==t.length)e.visible=!0;else if(t.indexOf("today")>-1){var n=new Date;"-"==t[5]?n.setDate(n.getDate()-parseInt(t.slice(6)||0)):"+"==t[5]&&n.setDate(n.getDate()+parseInt(t.slice(6)||0)),e.visible=e.created_at.toString().slice(4,10)==n.toString().slice(4,10)}else{var r=t.split(" "),i=r.every(function(t){return e.safeTitle().toLowerCase().indexOf(t)>=0}),o=r.every(function(t){return e.safeText().toLowerCase().indexOf(t)>=0});e.visible=i||o}return this.tag.archiveTag&&(e.visible=e.visible&&e.archived),e.visible}.bind(this),this.onFilterEnter=function(){o.searchText(this.noteFilter.text)},this.clearFilterText=function(){this.noteFilter.text="",this.onFilterEnter(),this.filterTextChanged(),this.resetPagination()},this.filterTextChanged=function(){t(function(){this.selectedNote.visible||this.selectFirstNote(!1)}.bind(this),100)},this.selectedMenuItem=function(e){this.showMenu=!1},this.selectedSortByCreated=function(){this.setSortBy("created_at"),this.sortDescending=!0},this.selectedSortByUpdated=function(){this.setSortBy("client_updated_at"),this.sortDescending=!0},this.selectedSortByTitle=function(){this.setSortBy("title"),this.sortDescending=!1},this.setSortBy=function(t){this.sortBy=t,e.setUserPrefValue("sortBy",this.sortBy),e.syncUserPreferences()},this.shouldShowTags=function(e){return!this.hideTags&&(!!this.tag.all||e.tags&&e.tags.length>1)}}]),angular.module("app").directive("tagsSection",function(){return{restrict:"E",scope:{addNew:"&",selectionMade:"&",willSelect:"&",save:"&",tags:"=",allTag:"=",archiveTag:"=",updateNoteTag:"&",removeTag:"&"},templateUrl:"tags.html",replace:!0,controller:"TagsCtrl",controllerAs:"ctrl",bindToController:!0,link:function e(t,n,r,i){t.$watch("ctrl.tags",function(e){e&&i.setTags(e)}),t.$watch("ctrl.allTag",function(e){e&&i.setAllTag(e)})}}}).controller("TagsCtrl",["$rootScope","modelManager","$timeout","componentManager","authManager",function(e,t,n,r,i){function o(e){return document.getElementById("tag-"+e.uuid)}var a=this,s=!0;this.panelController={},e.$on("user-preferences-changed",function(){a.loadPreferences()}),this.loadPreferences=function(){var e=i.getUserPrefValue("tagsPanelWidth")},this.loadPreferences(),this.onPanelResize=function(e){i.setUserPrefValue("tagsPanelWidth",e),i.syncUserPreferences()},this.componentManager=r,r.registerHandler({identifier:"tags",areas:["tags-list"],activationHandler:function(e){this.component=e}.bind(this),contextRequestHandler:function(e){return null}.bind(this),actionHandler:function(e,n,r){if("select-item"===n){var i=t.findItem(r.item.uuid);i&&this.selectTag(i)}else"clear-selection"===n&&this.selectTag(this.allTag)}.bind(this)}),this.setAllTag=function(e){this.selectTag(this.allTag)},this.setTags=function(e){s?(s=!1,this.selectTag(this.allTag)):e&&e.length>0&&this.selectTag(e[0])},this.selectTag=function(e){this.willSelect()(e),this.selectedTag=e,e.conflict_of=null,this.selectionMade()(e)},this.clickedAddNewTag=function(){this.editingTag||(this.newTag=t.createItem({content_type:"Tag"}),this.selectedTag=this.newTag,this.editingTag=this.newTag,this.addNew()(this.newTag))},this.tagTitleDidChange=function(e){this.editingTag=e},this.saveTag=function(e,r){var i=this;if(this.editingTag=null,e.target.blur(),!r.title||0==r.title.length)return void(c?(r.title=c,c=null):t.removeItemLocally(r));this.save()(r,function(e){n(function(){i.selectTag(r),i.newTag=null})})};var c="";this.selectedRenameTag=function(e,t){c=t.title,this.editingTag=t,n(function(){o(t).focus()})},this.selectedDeleteTag=function(e){this.removeTag()(e)},this.noteCount=function(e){return N.filterDummyNotes(e.notes).filter(function(e){return!e.archived}).length}}]);var A="org.standardnotes.sn",I,O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,x.default)(this,e),this.appData={},this.updateFromJSON(t),this.observers=[],this.uuid||(this.uuid=SFJS.crypto.generateUUIDSync())}return(0,C.default)(e,[{key:"updateFromJSON",value:function e(t){_.merge(this,t),this.created_at?(this.created_at=new Date(this.created_at),this.updated_at=new Date(this.updated_at)):(this.created_at=new Date,this.updated_at=new Date),this._client_updated_at=null,t.content?this.mapContentToLocalProperties(this.contentObject):1==t.deleted&&this.handleDeletedContent()}},{key:"refreshContentObject",value:function e(){this.content=this.structureParams()}},{key:"handleDeletedContent",value:function e(){}},{key:"setDirty",value:function e(t,n){this.dirty=t,this.dirtyCount||(this.dirtyCount=0),t?this.dirtyCount++:this.dirtyCount=0,t&&!n?this.client_updated_at=new Date:this.hasRawClientUpdatedAtValue()||(this.client_updated_at=new Date(this.updated_at)),t&&this.notifyObserversOfChange()}},{key:"markAllReferencesDirty",value:function e(t){this.allReferencedObjects().forEach(function(e){e.setDirty(!0,t)})}},{key:"addObserver",value:function e(t,n){_.find(this.observers,t)||this.observers.push({observer:t,callback:n})}},{key:"removeObserver",value:function e(t){_.remove(this.observers,{observer:t})}},{key:"notifyObserversOfChange",value:function e(){var t=!0,n=!1,r=void 0;try{for(var i=this.observers[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){o.value.callback(this)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"mapContentToLocalProperties",value:function e(t){t.appData&&(this.appData=t.appData),this.appData||(this.appData={})}},{key:"createContentJSONFromProperties",value:function e(){return this.structureParams()}},{key:"referenceParams",value:function e(){}},{key:"structureParams",value:function e(){return{references:this.referenceParams(),appData:this.appData}}},{key:"addItemAsRelationship",value:function e(t){}},{key:"removeItemAsRelationship",value:function e(t){}},{key:"isBeingRemovedLocally",value:function e(){}},{key:"removeAndDirtyAllRelationships",value:function e(){this.setDirty(!0)}},{key:"removeReferencesNotPresentIn",value:function e(t){}},{key:"mergeMetadataFromItem",value:function e(t){_.merge(this,_.omit(t,["content"]))}},{key:"informReferencesOfUUIDChange",value:function e(t,n){}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function e(t,n,r){}},{key:"allReferencedObjects",value:function e(){return[]}},{key:"doNotEncrypt",value:function e(){return!1}},{key:"setDomainDataItem",value:function e(t,n,r){var i=this.appData[r];i||(i={}),i[t]=n,this.appData[r]=i}},{key:"getDomainDataItem",value:function e(t,n){var r=this.appData[n];return r?r[t]:null}},{key:"setAppDataItem",value:function e(t,n){this.setDomainDataItem(t,n,A)}},{key:"getAppDataItem",value:function e(t){return this.getDomainDataItem(t,A)}},{key:"hasRawClientUpdatedAtValue",value:function e(){return null!=this.getAppDataItem("client_updated_at")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function e(){return[]}},{key:"isItemContentEqualWith",value:function e(t){var n=function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a=n[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){delete t[s.value]}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return t},r=n(this.structureParams(),this.keysToIgnoreWhenCheckingContentEquality()),i=n(t.structureParams(),t.keysToIgnoreWhenCheckingContentEquality());return JSON.stringify(r)===JSON.stringify(i)}},{key:"createdAtString",value:function e(){return this.dateToLocalizedString(this.created_at)}},{key:"updatedAtString",value:function e(){return this.dateToLocalizedString(this.client_updated_at)}},{key:"dateToLocalizedString",value:function e(t){if("undefined"!=typeof Intl&&Intl.DateTimeFormat){if(!I){var n=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;I=new Intl.DateTimeFormat(n,{year:"numeric",month:"2-digit",day:"2-digit"})}return I.format(t)}return t.toDateString()+" "+t.toLocaleTimeString()}},{key:"contentObject",get:function e(){if(!this.content)return{};if(null!==this.content&&"object"===(0,w.default)(this.content))return this.content;try{return JSON.parse(this.content)}catch(e){return console.log("Error parsing json",e,this),{}}}},{key:"pinned",get:function e(){return this.getAppDataItem("pinned")}},{key:"archived",get:function e(){return this.getAppDataItem("archived")}},{key:"locked",get:function e(){return this.getAppDataItem("locked")}},{key:"client_updated_at",get:function e(){if(!this._client_updated_at){var t=this.getAppDataItem("client_updated_at");this._client_updated_at=t?new Date(t):new Date(this.updated_at)}return this._client_updated_at},set:function e(t){this._client_updated_at=t,this.setAppDataItem("client_updated_at",t)}}],[{key:"sortItemsByDate",value:function e(t){t.sort(function(e,t){return new Date(t.created_at)-new Date(e.created_at)})}}]),e}(),D=function(e){function t(e){return(0,x.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.serverContent=n}},{key:"structureParams",value:function e(){return _.merge(this.serverContent,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this))}},{key:"toJSON",value:function e(){return{uuid:this.uuid}}},{key:"doNotEncrypt",value:function e(){return!0}},{key:"content_type",get:function e(){return"SF|MFA"}}]),t}(O),P=function(e){function t(e){return(0,x.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.url=n.url}},{key:"structureParams",value:function e(){if("object"!==(0,w.default)(this.content))try{this.content=JSON.parse(this.content)}catch(e){}var n=this.content||{};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"toJSON",value:function e(){return{uuid:this.uuid}}},{key:"doNotEncrypt",value:function e(){return!0}},{key:"content_type",get:function e(){return"SF|Extension"}}]),t}(O),T=function(e){function t(e){(0,x.default)(this,t),e.window=null;var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.componentData||(n.componentData={}),n.disassociatedItemIds||(n.disassociatedItemIds=[]),n.associatedItemIds||(n.associatedItemIds=[]),n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.url=n.url||n.hosted_url,this.local_url=n.local_url,this.hosted_url=n.hosted_url||n.url,this.offlineOnly=n.offlineOnly,n.valid_until&&(this.valid_until=new Date(n.valid_until)),this.name=n.name,this.autoupdateDisabled=n.autoupdateDisabled,this.package_info=n.package_info,this.area=n.area,this.permissions=n.permissions,this.permissions||(this.permissions=[]),this.active=n.active,this.componentData=n.componentData||{},this.disassociatedItemIds=n.disassociatedItemIds||[],this.associatedItemIds=n.associatedItemIds||[]}},{key:"handleDeletedContent",value:function e(){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleDeletedContent",this).call(this),this.active=!1}},{key:"structureParams",value:function e(){var n={url:this.url,hosted_url:this.hosted_url,local_url:this.local_url,valid_until:this.valid_until,offlineOnly:this.offlineOnly,name:this.name,area:this.area,package_info:this.package_info,permissions:this.permissions,active:this.active,autoupdateDisabled:this.autoupdateDisabled,componentData:this.componentData,disassociatedItemIds:this.disassociatedItemIds,associatedItemIds:this.associatedItemIds};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"toJSON",value:function e(){return{uuid:this.uuid}}},{key:"isEditor",value:function e(){return"editor-editor"==this.area}},{key:"isTheme",value:function e(){return"SN|Theme"==this.content_type||"themes"==this.area}},{key:"isDefaultEditor",value:function e(){return 1==this.getAppDataItem("defaultEditor")}},{key:"setLastSize",value:function e(t){this.setAppDataItem("lastSize",t)}},{key:"getLastSize",value:function e(){return this.getAppDataItem("lastSize")}},{key:"keysToIgnoreWhenCheckingContentEquality",value:function e(){return["active"].concat((0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"keysToIgnoreWhenCheckingContentEquality",this).call(this))}},{key:"isAssociative",value:function e(){return t.associativeAreas().includes(this.area)}},{key:"associateWithItem",value:function e(t){this.associatedItemIds.push(t.uuid)}},{key:"isExplicitlyEnabledForItem",value:function e(t){return-1!==this.associatedItemIds.indexOf(t.uuid)}},{key:"isExplicitlyDisabledForItem",value:function e(t){return-1!==this.disassociatedItemIds.indexOf(t.uuid)}},{key:"content_type",get:function e(){return"SN|Component"}}],[{key:"associativeAreas",value:function e(){return["editor-editor"]}}]),t}(O),j=function(e){function t(e){(0,x.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.notes||(n.notes=[]),n.data||(n.data={}),n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.url=n.url,this.name=n.name,this.data=n.data||{},this.default=n.default,this.systemEditor=n.systemEditor}},{key:"structureParams",value:function e(){var n={url:this.url,name:this.name,data:this.data,default:this.default,systemEditor:this.systemEditor};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"referenceParams",value:function e(){return _.map(this.notes,function(e){return{uuid:e.uuid,content_type:e.content_type}})}},{key:"addItemAsRelationship",value:function e(n){"Note"==n.content_type&&(_.find(this.notes,n)||this.notes.push(n)),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addItemAsRelationship",this).call(this,n)}},{key:"removeItemAsRelationship",value:function e(n){"Note"==n.content_type&&_.pull(this.notes,n),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeItemAsRelationship",this).call(this,n)}},{key:"removeAndDirtyAllRelationships",value:function e(){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeAndDirtyAllRelationships",this).call(this),this.notes=[]}},{key:"removeReferencesNotPresentIn",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeReferencesNotPresentIn",this).call(this,n);var r=n.map(function(e){return e.uuid});this.notes.forEach(function(e){r.includes(e.uuid)||_.pull(this.notes,e)}.bind(this))}},{key:"potentialItemOfInterestHasChangedItsUUID",value:function e(t,n,r){"Note"===t.content_type&&_.find(this.notes,{uuid:n})&&(_.pull(this.notes,{uuid:n}),this.notes.push(t))}},{key:"allReferencedObjects",value:function e(){return this.notes}},{key:"toJSON",value:function e(){return{uuid:this.uuid}}},{key:"setData",value:function e(t,n){return!(JSON.stringify(this.data[t])===JSON.stringify(n)||(this.data[t]=n,0))}},{key:"dataForKey",value:function e(t){return this.data[t]||{}}},{key:"content_type",get:function e(){return"SN|Editor"}}]),t}(O),R=function e(t){(0,x.default)(this,e),_.merge(this,t),this.running=!1,this.error=!1,this.lastExecuted&&(this.lastExecuted=new Date(this.lastExecuted))},F=function(e){function t(e){(0,x.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.actions&&(n.actions=e.actions.map(function(e){return new R(e)})),n.actions||(n.actions=[]),n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"actionsWithContextForItem",value:function e(t){return this.actions.filter(function(e){return e.context==t.content_type||"Item"==e.context})}},{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.description=n.description,this.supported_types=n.supported_types,n.actions&&(this.actions=n.actions.map(function(e){return new R(e)}))}},{key:"structureParams",value:function e(){var n={description:this.description,actions:this.actions.map(function(e){return _.omit(e,["subrows","subactions"])}),supported_types:this.supported_types};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"content_type",get:function e(){return"Extension"}}]),t}(T),N=function(e){function t(e){(0,x.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.text||(n.text=""),n.tags||(n.tags=[]),n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.title=n.title,this.text=n.text}},{key:"referenceParams",value:function e(){return _.map(this.tags,function(e){return{uuid:e.uuid,content_type:e.content_type}})}},{key:"structureParams",value:function e(){var n={title:this.title,text:this.text};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"addItemAsRelationship",value:function e(n){this.savedTagsString=null,"Tag"==n.content_type&&(_.find(this.tags,n)||this.tags.push(n)),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addItemAsRelationship",this).call(this,n)}},{key:"removeItemAsRelationship",value:function e(n){this.savedTagsString=null,"Tag"==n.content_type&&_.pull(this.tags,n),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeItemAsRelationship",this).call(this,n)}},{key:"removeAndDirtyAllRelationships",value:function e(){this.savedTagsString=null,this.tags.forEach(function(e){_.pull(e.notes,this),e.setDirty(!0)}.bind(this)),this.tags=[]}},{key:"removeReferencesNotPresentIn",value:function e(n){this.savedTagsString=null,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeReferencesNotPresentIn",this).call(this,n);var r=n.map(function(e){return e.uuid});this.tags.slice().forEach(function(e){r.includes(e.uuid)||(_.pull(e.notes,this),_.pull(this.tags,e))}.bind(this))}},{key:"isBeingRemovedLocally",value:function e(){this.tags.forEach(function(e){_.pull(e.notes,this)}.bind(this)),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isBeingRemovedLocally",this).call(this)}},{key:"informReferencesOfUUIDChange",value:function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a=this.tags[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;_.pull(c.notes,{uuid:t}),c.notes.push(this)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"allReferencedObjects",value:function e(){return this.tags}},{key:"safeText",value:function e(){return this.text||""}},{key:"safeTitle",value:function e(){return this.title||""}},{key:"toJSON",value:function e(){return{
uuid:this.uuid}}},{key:"tagsString",value:function e(){return this.savedTagsString=L.arrayToDisplayString(this.tags),this.savedTagsString}},{key:"content_type",get:function e(){return"Note"}}],[{key:"filterDummyNotes",value:function e(t){return t.filter(function(e){return 0==e.dummy||null==e.dummy})}}]),t}(O),L=function(e){function t(e){(0,x.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.notes||(n.notes=[]),n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.title=n.title}},{key:"referenceParams",value:function e(){return _.map(this.notes,function(e){return{uuid:e.uuid,content_type:e.content_type}})}},{key:"structureParams",value:function e(){var n={title:this.title};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"addItemAsRelationship",value:function e(n){"Note"==n.content_type&&(_.find(this.notes,n)||this.notes.unshift(n)),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addItemAsRelationship",this).call(this,n)}},{key:"removeItemAsRelationship",value:function e(n){"Note"==n.content_type&&_.pull(this.notes,n),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeItemAsRelationship",this).call(this,n)}},{key:"removeAndDirtyAllRelationships",value:function e(){this.notes.forEach(function(e){_.pull(e.tags,this),e.setDirty(!0)}.bind(this)),this.notes=[]}},{key:"removeReferencesNotPresentIn",value:function e(t){var n=t.map(function(e){return e.uuid});this.notes.slice().forEach(function(e){n.includes(e.uuid)||(_.pull(e.tags,this),_.pull(this.notes,e))}.bind(this))}},{key:"isBeingRemovedLocally",value:function e(){this.notes.forEach(function(e){_.pull(e.tags,this)}.bind(this)),(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isBeingRemovedLocally",this).call(this)}},{key:"informReferencesOfUUIDChange",value:function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a=this.notes[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;_.pull(c.tags,{uuid:t}),c.tags.push(this)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"allReferencedObjects",value:function e(){return this.notes}},{key:"content_type",get:function e(){return"Tag"}}],[{key:"arrayToDisplayString",value:function e(t){return t.sort(function(e,t){return e.title>t.title}).map(function(e,t){return"#"+e.title}).join(" ")}}]),t}(O),B=function(e){function t(e){(0,x.default)(this,t);var n=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.area="themes",n}return(0,y.default)(t,e),(0,C.default)(t,[{key:"content_type",get:function e(){return"SN|Theme"}}]),t}(T),U=function(e){function t(e){return(0,x.default)(this,t),(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return(0,y.default)(t,e),(0,C.default)(t,[{key:"mapContentToLocalProperties",value:function e(n){(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mapContentToLocalProperties",this).call(this,n),this.storage=n.storage}},{key:"structureParams",value:function e(){var n={storage:this.storage};return _.merge(n,(0,v.default)(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"structureParams",this).call(this)),n}},{key:"toJSON",value:function e(){return{uuid:this.uuid}}},{key:"content_type",get:function e(){return"SN|EncryptedStorage"}}]),t}(O),V=function(){function e(t,n,r){(0,x.default)(this,e),this.item=t,this.keys=n,this.version=r||SFJS.version()}return(0,C.default)(e,[{key:"paramsForExportFile",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){var n;return l.default.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:if(this.additionalFields=["updated_at"],this.forExportFile=!0,!t){r.next=6;break}return r.abrupt("return",this.__params());case 6:return r.next=8,this.__params();case 8:return n=r.sent,r.abrupt("return",_.omit(n,["deleted"]));case 10:case"end":return r.stop()}},e,this)}));return e}()},{key:"paramsForExtension",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.paramsForExportFile());case 1:case"end":return t.stop()}},e,this)}));return e}()},{key:"paramsForLocalStorage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return this.additionalFields=["updated_at","dirty","errorDecrypting"],this.forExportFile=!0,t.abrupt("return",this.__params());case 3:case"end":return t.stop()}},e,this)}));return e}()},{key:"paramsForSync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(){return l.default.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.__params());case 1:case"end":return t.stop()}},e,this)}));return e}()},{key:"__params",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:if(console.assert(!this.item.dummy,"Item is dummy, should not have gotten here.",this.item.dummy),t={uuid:this.item.uuid,content_type:this.item.content_type,deleted:this.item.deleted,created_at:this.item.created_at},this.item.errorDecrypting){i.next=24;break}if(n=this.item.doNotEncrypt()&&!this.forExportFile,!this.keys||n){i.next=12;break}return i.next=7,SFJS.itemTransformer.encryptItem(this.item,this.keys,this.version);case 7:r=i.sent,_.merge(t,r),"001"!==this.version&&(t.auth_hash=null),i.next=22;break;case 12:if(!this.forExportFile){i.next=16;break}i.t0=this.item.createContentJSONFromProperties(),i.next=20;break;case 16:return i.next=18,SFJS.crypto.base64(JSON.stringify(this.item.createContentJSONFromProperties()));case 18:i.t1=i.sent,i.t0="000"+i.t1;case 20:t.content=i.t0,this.forExportFile||(t.enc_item_key=null,t.auth_hash=null);case 22:i.next=27;break;case 24:t.content=this.item.content,t.enc_item_key=this.item.enc_item_key,t.auth_hash=this.item.auth_hash;case 27:return this.additionalFields&&_.merge(t,_.pick(this.item,this.additionalFields)),i.abrupt("return",t);case 29:case"end":return i.stop()}},e,this)}));return e}()}]),e}(),H=function(){function e(t,n,r,i,o,a,s){(0,x.default)(this,e),this.httpManager=t,this.modelManager=n,this.authManager=r,this.syncManager=i,this.$rootScope=o,this.$compile=a,this.$timeout=s,this.previousPasswords=[]}return e.$inject=["httpManager","modelManager","authManager","syncManager","$rootScope","$compile","$timeout"],(0,C.default)(e,[{key:"extensionsInContextOfItem",value:function e(t){return this.extensions.filter(function(e){return _.includes(e.supported_types,t.content_type)||e.actionsWithContextForItem(t).length>0})}},{key:"loadExtensionInContextOfItem",value:function e(t,n,r){this.httpManager.getAbsolute(t.url,{content_type:n.content_type,item_uuid:n.uuid},function(e){this.updateExtensionFromRemoteResponse(t,e),r&&r(t)}.bind(this),function(e){console.log("Error loading extension",e),r&&r(null)}.bind(this))}},{key:"updateExtensionFromRemoteResponse",value:function e(t,n){n.description&&(t.description=n.description),n.supported_types&&(t.supported_types=n.supported_types),n.actions?t.actions=n.actions.map(function(e){return new R(e)}):t.actions=[]}},{key:"executeAction",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t,n,r,i){var o=this,a,s,c,u,f;return l.default.wrap(function e(h){for(;;)switch(h.prev=h.next){case 0:a=function e(n){t.running=!1,o.$timeout(function(){i(n)})},t.running=!0,s="decrypted"==t.access_type,c=[],u=function(){var e=(0,d.default)(l.default.mark(function e(t,n,r){var i,s,f,d,h,p,m,v,g,y,b,w,_,k,x,S;return l.default.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return i=t.item,l.next=3,SFJS.itemTransformer.decryptItem(i,n);case 3:if(i.errorDecrypting){l.next=34;break}if(!r){l.next=29;break}for(s=o.modelManager.mapResponseItemsToLocalModels([i],Z.MappingSourceRemoteActionRetrieved),f=!0,d=!1,h=void 0,l.prev=9,p=s[Symbol.iterator]();!(f=(m=p.next()).done);f=!0)v=m.value,v.setDirty(!0);l.next=17;break;case 13:l.prev=13,l.t0=l.catch(9),d=!0,h=l.t0;case 17:l.prev=17,l.prev=18,!f&&p.return&&p.return();case 20:if(l.prev=20,!d){l.next=23;break}throw h;case 23:return l.finish(20);case 24:return l.finish(17);case 25:o.syncManager.sync(null),a({item:i}),l.next=31;break;case 29:i=o.modelManager.createItem(i,!0),a({item:i});case 31:return l.abrupt("return",!0);case 34:if(t.auth_params){l.next=37;break}return alert("We were unable to decrypt this revision using your current keys, and this revision is missing metadata that would allow us to try different keys to decrypt it. This can likely be fixed with some manual intervention. Please email hello@standardnotes.org for assistance."),l.abrupt("return");case 37:g=!0,y=!1,b=void 0,l.prev=40,w=o.previousPasswords[Symbol.iterator]();case 42:if(g=(_=w.next()).done){l.next=60;break}if(k=_.value,!c.includes(k)){l.next=46;break}return l.abrupt("continue",57);case 46:return c.push(k),l.next=49,SFJS.crypto.computeEncryptionKeysForUser(k,t.auth_params);case 49:if(x=l.sent){l.next=52;break}return l.abrupt("continue",57);case 52:return l.next=54,u(t,x,r);case 54:if(!(S=l.sent)){l.next=57;break}return l.abrupt("return",!0);case 57:g=!0,l.next=42;break;case 60:l.next=66;break;case 62:l.prev=62,l.t1=l.catch(40),y=!0,b=l.t1;case 66:l.prev=66,l.prev=67,!g&&w.return&&w.return();case 69:if(l.prev=69,!y){l.next=72;break}throw b;case 72:return l.finish(69);case 73:return l.finish(66);case 74:return o.presentPasswordModal(function(e){o.previousPasswords.push(e),u(t,n,r)}),l.abrupt("return",!1);case 76:case"end":return l.stop()}},e,o,[[9,13,17,25],[18,,20,24],[40,62,66,74],[67,,69,73]])}));return function t(n,r,i){return e.apply(this,arguments)}}(),h.t0=t.verb,h.next="get"===h.t0?8:"render"===h.t0?10:"show"===h.t0?12:"post"===h.t0?16:18;break;case 8:return this.httpManager.getAbsolute(t.url,{},function(e){t.error=!1,u(e,o.authManager.keys(),!0)},function(e){t.error=!0,a(null)}),h.abrupt("break",18);case 10:return this.httpManager.getAbsolute(t.url,{},function(e){t.error=!1,u(e,o.authManager.keys(),!1)},function(e){t.error=!0,a(null)}),h.abrupt("break",18);case 12:return f=window.open(t.url,"_blank"),f.focus(),a(),h.abrupt("break",18);case 16:return this.outgoingParamsForItem(r,n,s).then(function(e){var r={items:[e]};o.performPost(t,n,r,function(e){a(e)})}),h.abrupt("break",18);case 18:t.lastExecuted=new Date;case 19:case"end":return h.stop()}},e,this)}));return e}()},{key:"outgoingParamsForItem",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i,o;return l.default.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return i=this.authManager.keys(),r&&(i=null),o=new V(t,i,this.authManager.protocolVersion()),n.abrupt("return",o.paramsForExtension());case 4:case"end":return n.stop()}},e,this)}));return e}()},{key:"performPost",value:function e(t,n,r,i){this.httpManager.postAbsolute(t.url,r,function(e){t.error=!1,i&&i(e)}.bind(this),function(e){t.error=!0,console.log("Action error response:",e),i&&i({error:"Request error"})})}},{key:"presentPasswordModal",value:function e(t){var n=this.$rootScope.$new(!0);n.type="password",n.title="Decryption Assistance",n.message="Unable to decrypt this item with your current keys. Please enter your account password at the time of this revision.",n.callback=t;var r=this.$compile("<input-modal type='type' message='message' title='title' callback='callback'></input-modal>")(n);angular.element(document.body).append(r)}},{key:"extensions",get:function e(){return this.modelManager.extensions}}]),e}();angular.module("app").service("actionsManager",H);var z=function(){function e(t,n,r){(0,x.default)(this,e),this.passcodeManager=t,this.authManager=n,this.modelManager=r}return e.$inject=["passcodeManager","authManager","modelManager"],(0,C.default)(e,[{key:"downloadBackup",value:function e(t){var n=this,r,i,o;t&&(this.authManager.offline()&&this.passcodeManager.hasPasscode()?(r=this.passcodeManager.keys(),i=this.passcodeManager.passcodeAuthParams(),o=i.version):(r=this.authManager.keys(),i=this.authManager.getAuthParams(),o=this.authManager.protocolVersion())),this.__itemsData(r,i,o).then(function(e){if(n.__downloadData(e,"SN Archive - "+new Date+".txt"),!r){var t=n.modelManager.allItemsMatchingTypes(["Note"]);n.__downloadZippedNotes(t)}})}},{key:"__itemsData",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t,n,r){var i,o;return l.default.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.modelManager.getAllItemsJSONData(t,n,r);case 2:return i=a.sent,o=new Blob([i],{type:"text/json"}),a.abrupt("return",o);case 5:case"end":return a.stop()}},e,this)}));return e}()},{key:"__loadZip",value:function e(t){if(window.zip)return void t();var n=document.createElement("script");n.src="zip/zip.js",n.async=!1,document.getElementsByTagName("head")[0].appendChild(n),n.onload=function(){zip.workerScriptsPath="zip/",t()}}},{key:"__downloadZippedNotes",value:function e(t){var n=this;this.__loadZip(function(){zip.createWriter(new zip.BlobWriter("application/zip"),function(e){var r=0;!function i(){var o=t[r],a=new Blob([o.text],{type:"text/plain"}),s=o.title.replace("/","").replace("\\","");e.add(s+"-"+o.uuid+".txt",new zip.BlobReader(a),function(){r++,r<t.length?i():e.close(function(t){n.__downloadData(t,"Notes Txt Archive - "+new Date+".zip"),e=null})})}()},onerror)})}},{key:"__hrefForData",value:function e(t){return null!==this.textFile&&window.URL.revokeObjectURL(this.textFile),this.textFile=window.URL.createObjectURL(t),this.textFile}},{key:"__downloadData",value:function e(t,n){var r=document.createElement("a");r.setAttribute("download",n),r.href=this.__hrefForData(t),document.body.appendChild(r),r.click(),r.remove()}}]),e}();angular.module("app").service("archiveManager",z),angular.module("app").provider("authManager",function(){function e(){var e=location.hostname.split(".");return e[e.length-2]+"."+e[e.length-1]}function t(e,t,n,r,i,o,a,s){var c=this;this.loadInitialData=function(){var e=o.getItem("user");if(e)this.user=JSON.parse(e);else{var t=o.getItem("uuid");t&&(this.user={uuid:t})}this.checkForSecurityUpdate()},this.offline=function(){return!this.user},this.isEphemeralSession=function(){return null!=this.ephemeral&&void 0!=this.ephemeral||(this.ephemeral=JSON.parse(o.getItem("ephemeral",te.Fixed))),this.ephemeral},this.setEphemeral=function(e){this.ephemeral=e,e?(o.setModelStorageMode(te.Ephemeral),o.setItemsMode(te.Ephemeral)):(o.setModelStorageMode(te.Fixed),o.setItemsMode(o.hasPasscode()?te.FixedEncrypted:te.Fixed),o.setItem("ephemeral",JSON.stringify(!1),te.Fixed))},this.getAuthParams=function(){return this._authParams||(this._authParams=JSON.parse(o.getItem("auth_params"))),this._authParams},this.keys=function(){if(!this._keys){var e=o.getItem("mk");if(!e)return null;this._keys={mk:e,ak:o.getItem("ak")}}return this._keys},this.protocolVersion=function(){var e=this.getAuthParams();if(e&&e.version)return e.version;var t=this.keys();return t&&t.ak?"002":"001"},this.isProtocolVersionSupported=function(e){return SFJS.supportedVersions().includes(e)},this.getAuthParamsForEmail=function(e,t,r,i){var o=e+"/auth/params";n.getAbsolute(o,_.merge({email:t},r),function(e){i(e)},function(e){console.error("Error getting auth params",e),"object"!==(void 0===e?"undefined":(0,w.default)(e))&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),i(e)})},this.login=function(e,r,i,o,a,s,c){var u=this;this.getAuthParamsForEmail(e,r,s,function(l){if(l.identifier=r,l.error)return void c(l);if(!l||!l.pw_cost)return void c({error:{message:"Invalid email or password."}});if(!u.isProtocolVersionSupported(l.version)){var f;return f=SFJS.isVersionNewerThanLibraryVersion(l.version)?"This version of the application does not support your newer account type. Please upgrade to the latest version of Standard Notes to sign in.":"The protocol version associated with your account is outdated and no longer supported by this application. Please visit standardnotes.org/help/security for more information.",void c({error:{message:f}})}if(SFJS.isProtocolVersionOutdated(l.version)){var d="The encryption version for your account, "+l.version+", is outdated and requires upgrade. You may proceed with login, but are advised to follow prompts for Security Updates once inside. Please visit standardnotes.org/help/security for more information.\n\nClick 'OK' to proceed with login.";if(!confirm(d))return void c({error:{}})}if(!SFJS.supportsPasswordDerivationCost(l.pw_cost)){return void c({error:{message:"Your account was created on a platform with higher security capabilities than this browser supports. If we attempted to generate your login keys here, it would take hours. Please use a browser with more up to date security capabilities, like Google Chrome or Firefox, to log in."}})}var h=SFJS.costMinimumForVersion(l.version);if(l.pw_cost<h){return void c({error:{message:"Unable to login due to insecure password parameters. Please visit standardnotes.org/help/security for more information."}})}if(a){var p=SFJS.version();if(l.version!==p){var m="Strict sign in refused server sign in parameters. The latest security version is "+p+", but your account is reported to have version "+l.version+". If you'd like to proceed with sign in anyway, please disable strict sign in and try again.";return void c({error:{message:m}})}}SFJS.crypto.computeEncryptionKeysForUser(i,l).then(function(i){var a=e+"/auth/sign_in",f=_.merge({password:i.pw,email:r},s);n.postAbsolute(a,f,function(n){u.setEphemeral(o),u.handleAuthResponse(n,r,e,l,i),u.checkForSecurityUpdate(),t(function(){return c(n)})},function(e){console.error("Error logging in",e),"object"!==(void 0===e?"undefined":(0,w.default)(e))&&(e={error:{message:"A server error occurred while trying to sign in. Please try again."}}),t(function(){return c(e)})})})})},this.handleAuthResponse=function(e,t,n,r,a){try{n&&o.setItem("server",n),this.user=e.user,o.setItem("user",JSON.stringify(e.user)),this._authParams=r,o.setItem("auth_params",JSON.stringify(r)),o.setItem("jwt",e.token),this.saveKeys(a)}catch(e){i.displayOfflineAlert()}},this.saveKeys=function(e){this._keys=e,o.setItem("mk",e.mk),o.setItem("ak",e.ak)},this.register=function(e,t,r,i,o){var a=this;SFJS.crypto.generateInitialKeysAndAuthParamsForUser(t,r).then(function(r){var s=r.keys,c=r.authParams,u=e+"/auth",l=_.merge({password:s.pw,email:t},c);n.postAbsolute(u,l,function(n){a.setEphemeral(i),a.handleAuthResponse(n,t,e,c,s),o(n)},function(e){console.error("Registration error",e),"object"!==(void 0===e?"undefined":(0,w.default)(e))&&(e={error:{message:"A server error occurred while trying to register. Please try again."}}),o(e)})})},this.changePassword=function(e,t,r,i){var a=this,s=this.user.email,c=t.pw,u=o.getItem("server")+"/auth/change_pw",l=_.merge({new_password:c,current_password:e},r);n.postAbsolute(u,l,function(e){a.handleAuthResponse(e,s,null,r,t),i(e),a.checkForSecurityUpdate()},function(e){"object"!==(void 0===e?"undefined":(0,w.default)(e))&&(e={error:{message:"Something went wrong while changing your password. Your password was not changed. Please try again."}}),i(e)})},this.checkForSecurityUpdate=function(){if(this.offline())return!1;var t=SFJS.version(),n=this.protocolVersion()!==t;return n!==this.securityUpdateAvailable&&(this.securityUpdateAvailable=n,e.$broadcast("security-update-status-changed")),this.securityUpdateAvailable},this.presentPasswordWizard=function(t){var n=e.$new(!0);n.type=t;var r=s("<password-wizard type='type'></password-wizard>")(n);angular.element(document.body).append(r)},this.staticifyObject=function(e){return JSON.parse(JSON.stringify(e))},this.signOut=function(){this._keys=null,this.user=null,this._authParams=null};var u="SN|UserPreferences";a.registerSingleton({content_type:u},function(e){c.userPreferences=e,c.userPreferencesDidChange()},function(t){var n=new O({content_type:u});r.addItem(n),n.setDirty(!0),e.sync("authManager singletonCreate"),t(n)}),this.userPreferencesDidChange=function(){e.$broadcast("user-preferences-changed")},this.syncUserPreferences=function(){this.userPreferences.setDirty(!0),e.sync("syncUserPreferences")},this.getUserPrefValue=function(e,t){if(!this.userPreferences)return t;var n=this.userPreferences.getAppDataItem(e);return void 0!==n&&null!=n?n:t},this.setUserPrefValue=function(e,t,n){if(!this.userPreferences)return void console.log("Prefs are null, not setting value",e);this.userPreferences.setAppDataItem(e,t),n&&this.syncUserPreferences()}}this.$get=["$rootScope","$timeout","httpManager","modelManager","dbManager","storageManager","singletonManager","$compile",function(e,n,r,i,o,a,s,c){return new t(e,n,r,i,o,a,s,c)}]});var q="org.standardnotes.sn.components",W=function(){function e(t,n,r,i,o,a,s){var c=this;(0,x.default)(this,e),this.$compile=s,this.$rootScope=t,this.modelManager=n,this.syncManager=r,this.desktopManager=i,this.nativeExtManager=o,this.timeout=a,this.streamObservers=[],this.contextStreamObservers=[],this.activeComponents=[];var u=function e(t){var n=!0,r=!1,i=void 0;try{for(var o=c.activeComponents[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var s=a.value;if(document.activeElement==c.iframeForComponent(s)){c.timeout(function(){c.focusChangedForComponent(s)});break}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}};window.addEventListener?window.addEventListener("focus",u,!0):window.attachEvent("onfocusout",u),window.addEventListener?window.addEventListener("blur",u,!0):window.attachEvent("onblur",u),i.registerUpdateObserver(function(e){e.active&&e.isTheme()&&c.postActiveThemeToAllComponents()}),this.permissionDialogs=[],this.handlers=[],window.addEventListener("message",function(e){this.loggingEnabled&&console.log("Web app: received message",e),this.handleMessage(this.componentForSessionKey(e.data.sessionKey),e.data)}.bind(this),!1),this.modelManager.addItemSyncObserver("component-manager","*",function(e,t,n,r){if(r!=Z.MappingSourceComponentRetrieved){var i=e.filter(function(e){return"SN|Component"===e.content_type||"SN|Theme"==e.content_type});i.length>0&&r!=Z.MappingSourceRemoteSaved&&c.desktopManager.syncComponentsInstallation(i);var o=!0,a=!1,s=void 0;try{for(var u=i[Symbol.iterator](),l;!(o=(l=u.next()).done);o=!0){var f=l.value,d=_.find(c.activeComponents,{uuid:f.uuid});!f.active||f.deleted||d?!f.active&&d&&c.deactivateComponent(f):c.activateComponent(f)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var h=function t(n){if(w=e.filter(function(e){return-1!==n.contentTypes.indexOf(e.content_type)}),0==w.length)return"continue";k=[{name:"stream-items",content_types:n.contentTypes.sort()}],c.runWithPermissions(n.component,k,function(){c.sendItemsInReply(n.component,w,n.originalMessage)})},p=!0,m=!1,v=void 0;try{for(var g=c.streamObservers[Symbol.iterator](),y;!(p=(y=g.next()).done);p=!0)var b=y.value,w,k,x=h(b)}catch(e){m=!0,v=e}finally{try{!p&&g.return&&g.return()}finally{if(m)throw v}}var S=[{name:"stream-context-item"}],C=function t(n){var i=!0,o=!1,a=void 0;try{for(var s=c.handlers[Symbol.iterator](),u;!(i=(u=s.next()).done);i=!0){var l=u.value;(l.areas.includes(n.component.area)||l.areas.includes("*"))&&(l.contextRequestHandler&&(D=l.contextRequestHandler(n.component))&&(P=_.find(e,{uuid:D.uuid}))&&c.runWithPermissions(n.component,S,function(){c.sendContextItemInReply(n.component,P,n.originalMessage,r)}))}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}},M=!0,E=!1,A=void 0;try{for(var I=c.contextStreamObservers[Symbol.iterator](),O;!(M=(O=I.next()).done);M=!0){var b=O.value,D,P;C(b)}}catch(e){E=!0,A=e}finally{try{!M&&I.return&&I.return()}finally{if(E)throw A}}}})}return e.$inject=["$rootScope","modelManager","syncManager","desktopManager","nativeExtManager","$timeout","$compile"],(0,C.default)(e,[{key:"postActiveThemeToAllComponents",value:function e(){var t=!0,n=!1,r=void 0;try{for(var i=this.components[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var a=o.value;!a.isTheme()&&a.active&&a.window&&this.postActiveThemeToComponent(a)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"getActiveTheme",value:function e(){return this.componentsForArea("themes").find(function(e){return e.active})}},{key:"postActiveThemeToComponent",value:function e(t){var n=this.getActiveTheme(),r={themes:[n?this.urlForComponent(n):null]};this.sendMessageToComponent(t,{action:"themes",data:r})}},{key:"contextItemDidChangeInArea",value:function e(t){var n=!0,r=!1,i=void 0;try{for(var o=this.handlers[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var s=a.value;if(!1!==s.areas.includes(t)||s.areas.includes("*")){var c=this.contextStreamObservers.filter(function(e){return e.component.area===t}),u=!0,l=!1,f=void 0;try{for(var d=c[Symbol.iterator](),h;!(u=(h=d.next()).done);u=!0){var p=h.value;if(s.contextRequestHandler){var m=s.contextRequestHandler(p.component);this.sendContextItemInReply(p.component,m,p.originalMessage)}}}catch(e){l=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw f}}}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"jsonForItem",value:function e(t,n,r){var i={uuid:t.uuid,content_type:t.content_type,created_at:t.created_at,updated_at:t.updated_at,deleted:t.deleted};return i.content=t.createContentJSONFromProperties(),i.clientData=t.getDomainDataItem(n.url||n.uuid,q)||{},!r||r!=Z.MappingSourceRemoteSaved&&r!=Z.MappingSourceLocalSaved||(i.isMetadataUpdate=!0),this.removePrivatePropertiesFromResponseItems([i],n),i}},{key:"sendItemsInReply",value:function e(t,n,r,i){this.loggingEnabled&&console.log("Web|componentManager|sendItemsInReply",t,n,r);var o={items:{}},a=n.map(function(e){return this.jsonForItem(e,t,i)}.bind(this));o.items=a,this.replyToMessage(t,r,o)}},{key:"sendContextItemInReply",value:function e(t,n,r,i){this.loggingEnabled&&console.log("Web|componentManager|sendContextItemInReply",t,n,r);var o={item:this.jsonForItem(n,t,i)};this.replyToMessage(t,r,o)}},{key:"replyToMessage",value:function e(t,n,r){var i={action:"reply",original:n,data:r};this.sendMessageToComponent(t,i)}},{key:"sendMessageToComponent",value:function e(t,n){var r=["component-registered","themes"];if(t.hidden&&!r.includes(n.action))return void(this.loggingEnabled&&console.log("Component disabled for current item, not sending any messages.",t.name));this.loggingEnabled&&console.log("Web|sendMessageToComponent",t,n);var i=this.urlForComponent(t,"file://");i.startsWith("http")||i.startsWith("file")||(i=window.location.href+i),t.window.postMessage(n,i)}},{key:"componentsForArea",value:function e(t){return this.components.filter(function(e){return e.area===t})}},{key:"urlForComponent",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t.offlineOnly||a()&&t.local_url?t.local_url&&t.local_url.replace("sn://",n+this.desktopManager.getApplicationDataPath()+"/"):t.hosted_url||t.url}},{key:"componentForUrl",value:function e(t){return this.components.filter(function(e){return e.url===t||e.hosted_url===t})[0]}},{key:"componentForSessionKey",value:function e(t){return _.find(this.components,{sessionKey:t})}},{key:"handleMessage",value:function e(t,n){var r=this;if(!t)return void(this.loggingEnabled&&console.log("Component not defined, returning"));if("stream-items"===n.action)this.handleStreamItemsMessage(t,n);else if("stream-context-item"===n.action)this.handleStreamContextItemMessage(t,n);else if("set-component-data"===n.action)this.handleSetComponentDataMessage(t,n);else if("delete-items"===n.action)this.handleDeleteItemsMessage(t,n);else if("create-items"===n.action||"create-item"===n.action)this.handleCreateItemsMessage(t,n);else if("save-items"===n.action)this.handleSaveItemsMessage(t,n);else if("toggle-activate-component"===n.action){var i=this.modelManager.findItem(n.data.uuid);this.handleToggleComponentMessage(t,i,n)}else"request-permissions"===n.action?this.handleRequestPermissionsMessage(t,n):"install-local-component"===n.action&&this.handleInstallLocalComponentMessage(t,n);var o=function e(i){(i.areas.includes(t.area)||i.areas.includes("*"))&&r.timeout(function(){i.actionHandler(t,n.action,n.data)})},a=!0,s=!1,c=void 0;try{for(var u=this.handlers[Symbol.iterator](),l;!(a=(l=u.next()).done);a=!0){o(l.value)}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}}},{key:"removePrivatePropertiesFromResponseItems",value:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n||!this.nativeExtManager.isSystemExtension(n)){var i=["autoupdateDisabled","permissions","active"];r&&r.includeUrls&&(i=i.concat(["url","hosted_url","local_url"]));var o=!0,a=!1,s=void 0;try{for(var c=t[Symbol.iterator](),u;!(o=(u=c.next()).done);o=!0){var l=u.value;console.assert("function"!=typeof l.setDirty);var f=!0,d=!1,h=void 0;try{for(var p=i[Symbol.iterator](),m;!(f=(m=p.next()).done);f=!0){var v=m.value;delete l.content[v]}}catch(e){d=!0,h=e}finally{try{!f&&p.return&&p.return()}finally{if(d)throw h}}}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}}},{key:"handleStreamItemsMessage",value:function e(t,n){var r=this,i=[{name:"stream-items",content_types:n.data.content_types.sort()}];this.runWithPermissions(t,i,function(){_.find(r.streamObservers,{identifier:t.uuid})||r.streamObservers.push({identifier:t.uuid,component:t,originalMessage:n,contentTypes:n.data.content_types});var e=[],i=!0,o=!1,a=void 0;try{for(var s=n.data.content_types[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value;e=e.concat(r.modelManager.validItemsForContentType(u))}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r.sendItemsInReply(t,e,n)})}},{key:"handleStreamContextItemMessage",value:function e(t,n){var r=[{name:"stream-context-item"}];this.runWithPermissions(t,r,function(){_.find(this.contextStreamObservers,{identifier:t.uuid})||this.contextStreamObservers.push({identifier:t.uuid,component:t,originalMessage:n});var e=!0,r=!1,i=void 0;try{for(var o=this.handlersForArea(t.area)[Symbol.iterator](),a;!(e=(a=o.next()).done);e=!0){var s=a.value;if(s.contextRequestHandler){var c=s.contextRequestHandler(t);c&&this.sendContextItemInReply(t,c,n)}}}catch(e){r=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}}.bind(this))}},{key:"isItemWithinComponentContextJurisdiction",value:function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a=this.handlersForArea(n.area)[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;if(c.contextRequestHandler){var u=c.contextRequestHandler(n);if(u&&u.uuid==t.uuid)return!0}}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return!1}},{key:"handlersForArea",value:function e(t){return this.handlers.filter(function(e){return e.areas.includes(t)})}},{key:"handleSaveItemsMessage",value:function e(t,n){var r=this,i=n.data.items,o;if(1==i.length&&this.isItemWithinComponentContextJurisdiction(i[0],t))o=[{name:"stream-context-item"}];else{o=[{name:"stream-items",content_types:_.uniq(i.map(function(e){return e.content_type})).sort()}]}this.runWithPermissions(t,o,function(){r.removePrivatePropertiesFromResponseItems(i,t,{
includeUrls:!0});var e=r.modelManager.mapResponseItemsToLocalModels(i,Z.MappingSourceComponentRetrieved),o=!0,a=!1,s=void 0;try{for(var c=e[Symbol.iterator](),u;!(o=(u=c.next()).done);o=!0){var l=u.value,f=_.find(i,{uuid:l.uuid});_.merge(l.content,f.content),f.clientData&&l.setDomainDataItem(t.url||t.uuid,f.clientData,q),l.setDirty(!0)}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}r.syncManager.sync(function(e){var i=Object.assign({},n);i.action=e&&e.error?"save-error":"save-success",r.replyToMessage(t,n,{error:e.error}),r.handleMessage(t,i)},null,"handleSaveItemsMessage")})}},{key:"handleCreateItemsMessage",value:function e(t,n){var r=this,i=n.data.item?[n.data.item]:n.data.items,o=_.uniq(i.map(function(e){return e.content_type})),a=[{name:"stream-items",content_types:o}];this.runWithPermissions(t,a,function(){r.removePrivatePropertiesFromResponseItems(i,t);var e=[],o=!0,a=!1,s=void 0;try{for(var c=i[Symbol.iterator](),u;!(o=(u=c.next()).done);o=!0){var l=u.value,f=r.modelManager.createItem(l);l.clientData&&f.setDomainDataItem(t.url||t.uuid,l.clientData,q),r.modelManager.addItem(f),r.modelManager.resolveReferencesForItem(f,!0),f.setDirty(!0),e.push(f)}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}r.syncManager.sync("handleCreateItemMessage");var d="create-item"==n.action?{item:r.jsonForItem(e[0],t)}:{items:e.map(function(e){return r.jsonForItem(e,t)})};r.replyToMessage(t,n,d)})}},{key:"handleDeleteItemsMessage",value:function e(t,n){var r=this,i=_.uniq(n.data.items.map(function(e){return e.content_type})).sort(),o=[{name:"stream-items",content_types:i}];this.runWithPermissions(t,o,function(){var e=n.data.items,t=1==e.length?"item":"items";if(confirm("Are you sure you want to delete "+e.length+" "+t+"?")){var i=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value,l=r.modelManager.findItem(u.uuid);["SN|Component","SN|Theme"].includes(l.content_type)&&r.deactivateComponent(l,!0),r.modelManager.setItemToBeDeleted(l)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r.syncManager.sync("handleDeleteItemsMessage")}})}},{key:"handleRequestPermissionsMessage",value:function e(t,n){var r=this;this.runWithPermissions(t,n.data.permissions,function(){r.replyToMessage(t,n,{approved:!0})})}},{key:"handleSetComponentDataMessage",value:function e(t,n){var r=this;this.runWithPermissions(t,[],function(){t.componentData=n.data.componentData,t.setDirty(!0),r.syncManager.sync("handleSetComponentDataMessage")})}},{key:"handleToggleComponentMessage",value:function e(t,n,r){if("modal"==n.area)this.openModalComponent(n);else if(n.active)this.deactivateComponent(n);else{if("SN|Theme"==n.content_type){var i=this.getActiveTheme();i&&this.deactivateComponent(i)}this.activateComponent(n)}}},{key:"handleInstallLocalComponentMessage",value:function e(t,n){if(this.nativeExtManager.isSystemExtension(t)){var r=this.modelManager.findItem(n.data.uuid);this.desktopManager.installComponent(r)}}},{key:"runWithPermissions",value:function e(t,n,r){t.permissions||(t.permissions=[]);var i=t.permissions,o=!0,a=!0,s=!1,c=void 0;try{for(var u=n[Symbol.iterator](),l;!(a=(l=u.next()).done);a=!0){var f=l.value,d=i.find(function(e){var t=!0;return e.content_types&&f.content_types&&(t=JSON.stringify(e.content_types.sort())==JSON.stringify(f.content_types.sort())),e.name==f.name&&t});if(!d&&!(d=i.find(function(e){return Array.isArray(e.content_types)&&Array.isArray(f.content_types)&&e.content_types.containsPrimitiveSubset(f.content_types)}))){o=!1;break}}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}o?r():this.promptForPermissions(t,n,function(e){e&&r()})}},{key:"promptForPermissions",value:function e(t,n,r){var i=this.$rootScope.$new(!0);i.component=t,i.permissions=n,i.actionBlock=r,i.callback=function(e){if(e){var r=!0,o=!1,a=void 0;try{for(var s=n[Symbol.iterator](),c;!(r=(c=s.next()).done);r=!0){var u=c.value;t.permissions.includes(u)||t.permissions.push(u)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}t.setDirty(!0),this.syncManager.sync("promptForPermissions")}this.permissionDialogs=this.permissionDialogs.filter(function(r){return r==i?(r.actionBlock&&r.actionBlock(e),!1):r.component!=t||r.permissions!=n&&!n.containsObjectSubset(r.permissions)||(e&&r.actionBlock&&r.actionBlock(e),!1)}),this.permissionDialogs.length>0&&this.presentDialog(this.permissionDialogs[0])}.bind(this);var o=_.find(this.permissionDialogs,{component:t});this.permissionDialogs.push(i),o?console.log("Existing dialog, not presenting."):this.presentDialog(i)}},{key:"presentDialog",value:function e(t){var n=t.permissions,r=t.component,i=t.callback,o=this.$compile("<permissions-modal component='component' permissions='permissions' callback='callback' class='modal'></permissions-modal>")(t);angular.element(document.body).append(o)}},{key:"openModalComponent",value:function e(t){var n=this.$rootScope.$new(!0);n.component=t;var r=this.$compile("<component-modal component='component' class='modal'></component-modal>")(n);angular.element(document.body).append(r)}},{key:"registerHandler",value:function e(t){this.handlers.push(t)}},{key:"deregisterHandler",value:function e(t){var n=_.find(this.handlers,{identifier:t});this.handlers.splice(this.handlers.indexOf(n),1)}},{key:"registerComponentWindow",value:function e(t,n){t.window===n&&this.loggingEnabled&&console.log("Web|componentManager","attempting to re-register same component window."),this.loggingEnabled&&console.log("Web|componentManager|registerComponentWindow",t),t.window=n,t.sessionKey=SFJS.crypto.generateUUIDSync(),this.sendMessageToComponent(t,{action:"component-registered",sessionKey:t.sessionKey,componentData:t.componentData,data:{uuid:t.uuid,environment:a()?"desktop":"web"}}),this.postActiveThemeToComponent(t)}},{key:"activateComponent",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1!=t.active;t.active=!0;var i=!0,o=!1,a=void 0;try{for(var s=this.handlers[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value;(u.areas.includes(t.area)||u.areas.includes("*"))&&u.activationHandler(t)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r&&!n&&(t.setDirty(!0),this.syncManager.sync("activateComponent")),this.activeComponents.includes(t)||this.activeComponents.push(t),"themes"==t.area&&this.postActiveThemeToAllComponents()}},{key:"deactivateComponent",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0!=t.active;t.active=!1,t.sessionKey=null;var i=!0,o=!1,a=void 0;try{for(var s=this.handlers[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value;(u.areas.includes(t.area)||u.areas.includes("*"))&&u.activationHandler(t)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r&&!n&&(t.setDirty(!0),this.syncManager.sync("deactivateComponent")),_.pull(this.activeComponents,t),this.streamObservers=this.streamObservers.filter(function(e){return e.component!==t}),this.contextStreamObservers=this.contextStreamObservers.filter(function(e){return e.component!==t}),"themes"==t.area&&this.postActiveThemeToAllComponents()}},{key:"reloadComponent",value:function e(t){var n=this;t.active=!1;var r=!0,i=!1,o=void 0;try{for(var a=this.handlers[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;(c.areas.includes(t.area)||c.areas.includes("*"))&&c.activationHandler(t)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}"themes"==t.area&&this.postActiveThemeToAllComponents(),this.timeout(function(){t.active=!0;var e=!0,r=!1,i=void 0;try{for(var o=n.handlers[Symbol.iterator](),a;!(e=(a=o.next()).done);e=!0){var s=a.value;(s.areas.includes(t.area)||s.areas.includes("*"))&&s.activationHandler(t)}}catch(e){r=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}n.activeComponents.includes(t)||n.activeComponents.push(t),"themes"==t.area&&n.postActiveThemeToAllComponents()})}},{key:"deleteComponent",value:function e(t){this.modelManager.setItemToBeDeleted(t),this.syncManager.sync("deleteComponent")}},{key:"isComponentActive",value:function e(t){return t.active}},{key:"iframeForComponent",value:function e(t){var n=!0,r=!1,i=void 0;try{for(var o=Array.from(document.getElementsByTagName("iframe"))[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.dataset.componentId===t.uuid)return s}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"focusChangedForComponent",value:function e(t){var n=document.activeElement==this.iframeForComponent(t),r=!0,i=!1,o=void 0;try{for(var a=this.handlers[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;c.focusHandler&&c.focusHandler(t,n)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"handleSetSizeEvent",value:function e(t,n){var r=function e(t,r){var i="string"==typeof r.width?r.width:n.width+"px",o="string"==typeof r.height?r.height:n.height+"px";t.setAttribute("style","width:"+i+"; height:"+o+";")};if("rooms"==t.area||"modal"==t.area){var i="rooms"==t.area?"inner":"outer",o=document.getElementById("component-content-"+i+"-"+t.uuid);o&&r(o,n)}else{var a=this.iframeForComponent(t),s=n.width,c=n.height;a.width=s,a.height=c;var o=document.getElementById("component-iframe-"+t.uuid);o&&r(o,n)}}},{key:"components",get:function e(){return this.modelManager.allItemsMatchingTypes(["SN|Component","SN|Theme"])}}]),e}();angular.module("app").service("componentManager",W);var J=function(){function e(){(0,x.default)(this,e),this.locked=!0}return(0,C.default)(e,[{key:"displayOfflineAlert",value:function e(){var t="There was an issue loading your offline database. This could happen for two reasons:";t+="\n\n1. You're in a private window in your browser. We can't save your data without access to the local database. Please use a non-private window.",t+="\n\n2. You have two windows of the app open at the same time. Please close any other app instances and reload the page.",alert(t)}},{key:"setLocked",value:function e(t){this.locked=t}},{key:"openDatabase",value:function e(t,n){if(!this.locked){var r=window.indexedDB.open("standardnotes",1);r.onerror=function(e){e.target.errorCode?alert("Offline database issue: "+e.target.errorCode):this.displayOfflineAlert(),console.error("Offline database issue:",e),t&&t(null)}.bind(this),r.onsuccess=function(e){var n=e.target.result;n.onversionchange=function(e){n.close()},n.onerror=function(e){console.log("Database error: "+e.target.errorCode)},t&&t(n)},r.onupgradeneeded=function(e){var t=e.target.result;t.onversionchange=function(e){t.close()};var r=t.createObjectStore("items",{keyPath:"uuid"});r.createIndex("title","title",{unique:!1}),r.createIndex("uuid","uuid",{unique:!0}),r.transaction.oncomplete=function(e){1===t.version&&n&&n()}}}}},{key:"getAllModels",value:function e(t){this.openDatabase(function(e){var n=e.transaction("items").objectStore("items"),r=[];n.openCursor().onsuccess=function(e){var n=e.target.result;n?(r.push(n.value),n.continue()):t(r)}},null)}},{key:"saveModel",value:function e(t){this.saveModels([t])}},{key:"saveModels",value:function e(t,n){if(0==t.length)return void(n&&n());this.openDatabase(function(e){function r(){if(a<t.length){var e=t[a];o.put(e).onsuccess=r,++a}else n&&n()}var i=e.transaction("items","readwrite");i.oncomplete=function(e){},i.onerror=function(e){console.log("Transaction error:",e.target.errorCode)};var o=i.objectStore("items"),a=0;r()},null)}},{key:"deleteModel",value:function e(t,n){this.openDatabase(function(e){e.transaction("items","readwrite").objectStore("items").delete(t.uuid).onsuccess=function(e){n&&n(!0)}},null)}},{key:"clearAllModels",value:function e(t){var n=window.indexedDB.deleteDatabase("standardnotes");n.onerror=function(e){console.log("Error deleting database."),t&&t()},n.onsuccess=function(e){console.log("Database deleted successfully"),t&&t()},n.onblocked=function(e){console.error("Delete request blocked"),alert("Your browser is blocking Standard Notes from deleting the local database. Make sure there are no other open windows of this app and try again. If the issue persists, please manually delete app data to sign out.")}}}]),e}();angular.module("app").service("dbManager",J);var K=function(){function e(t,n,r,i,o,s){var c=this;(0,x.default)(this,e),this.passcodeManager=s,this.modelManager=r,this.authManager=o,this.syncManager=i,this.$rootScope=t,this.timeout=n,this.updateObservers=[],this.isDesktop=a(),t.$on("initial-data-loaded",function(){c.dataLoaded=!0,c.dataLoadHandler&&c.dataLoadHandler()}),t.$on("major-data-change",function(){c.majorDataChangeHandler&&c.majorDataChangeHandler()})}return e.$inject=["$rootScope","$timeout","modelManager","syncManager","authManager","passcodeManager"],(0,C.default)(e,[{key:"getApplicationDataPath",value:function e(){return console.assert(this.applicationDataPath,"applicationDataPath is null"),this.applicationDataPath}},{key:"convertComponentForTransmission",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){return l.default.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new V(t).paramsForExportFile(!0));case 1:case"end":return n.stop()}},e,this)}));return e}()},{key:"syncComponentsInstallation",value:function e(t){var n=this;this.isDesktop&&Promise.all(t.map(function(e){return n.convertComponentForTransmission(e)})).then(function(e){n.installationSyncHandler(e)})}},{key:"installComponent",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){return l.default.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=this,n.next=3,this.convertComponentForTransmission(t);case 3:n.t1=n.sent,n.t0.installComponentHandler.call(n.t0,n.t1);case 5:case"end":return n.stop()}},e,this)}));return e}()},{key:"registerUpdateObserver",value:function e(t){var n={id:Math.random,callback:t};return this.updateObservers.push(n),n}},{key:"searchText",value:function e(t){this.isDesktop&&this.searchHandler(t)}},{key:"deregisterUpdateObserver",value:function e(t){_.pull(this.updateObservers,t)}},{key:"desktop_setSearchHandler",value:function e(t){this.searchHandler=t}},{key:"desktop_onComponentInstallationComplete",value:function e(t,n){var r=this;console.log("Web|Component Installation/Update Complete",t,n);var i=["package_info","local_url"],o=this.modelManager.findItem(t.uuid);if(!o)return void console.error("desktop_onComponentInstallationComplete component is null for uuid",t.uuid);if(n)o.setAppDataItem("installError",n);else{var a=!0,s=!1,c=void 0;try{for(var u=i[Symbol.iterator](),l;!(a=(l=u.next()).done);a=!0){var f=l.value;o[f]=t.content[f]}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}this.modelManager.notifySyncObserversOfModels([o],Z.MappingSourceDesktopInstalled),o.setAppDataItem("installError",null)}o.setDirty(!0),this.syncManager.sync("onComponentInstallationComplete"),this.timeout(function(){var e=!0,t=!1,n=void 0;try{for(var i=r.updateObservers[Symbol.iterator](),a;!(e=(a=i.next()).done);e=!0){a.value.callback(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}})}},{key:"desktop_setApplicationDataPath",value:function e(t){this.applicationDataPath=t}},{key:"desktop_setComponentInstallationSyncHandler",value:function e(t){this.installationSyncHandler=t}},{key:"desktop_setInstallComponentHandler",value:function e(t){this.installComponentHandler=t}},{key:"desktop_setInitialDataLoadHandler",value:function e(t){this.dataLoadHandler=t,this.dataLoaded&&this.dataLoadHandler()}},{key:"desktop_requestBackupFile",value:function e(t){var n,r,i;this.authManager.offline()&&this.passcodeManager.hasPasscode()?(n=this.passcodeManager.keys(),r=this.passcodeManager.passcodeAuthParams(),i=r.version):(n=this.authManager.keys(),r=this.authManager.getAuthParams(),i=this.authManager.protocolVersion()),this.modelManager.getAllItemsJSONData(n,r,i,!0).then(function(e){t(e)})}},{key:"desktop_setMajorDataChangeHandler",value:function e(t){this.majorDataChangeHandler=t}}]),e}();angular.module("app").service("desktopManager",K);var G=function(){function e(t,n){(0,x.default)(this,e),this.$timeout=t,this.storageManager=n}return e.$inject=["$timeout","storageManager"],(0,C.default)(e,[{key:"setAuthHeadersForRequest",value:function e(t){var n=this.storageManager.getItem("jwt");n&&t.setRequestHeader("Authorization","Bearer "+n)}},{key:"postAbsolute",value:function e(t,n,r,i){this.httpRequest("post",t,n,r,i)}},{key:"patchAbsolute",value:function e(t,n,r,i){this.httpRequest("patch",t,n,r,i)}},{key:"getAbsolute",value:function e(t,n,r,i){this.httpRequest("get",t,n,r,i)}},{key:"httpRequest",value:function e(t,n,r,i,o){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState){var e=a.responseText;if(e)try{e=JSON.parse(e)}catch(e){}a.status>=200&&a.status<=299?this.$timeout(function(){i(e)}):(console.error("Request error:",e),this.$timeout(function(){o(e)}))}}.bind(this),"get"==t&&Object.keys(r).length>0&&(n+=this.formatParams(r)),a.open(t,n,!0),this.setAuthHeadersForRequest(a),a.setRequestHeader("Content-type","application/json"),"post"==t||"patch"==t?a.send(JSON.stringify(r)):a.send()}},{key:"formatParams",value:function e(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}}]),e}();angular.module("app").service("httpManager",G);var Y=function(){function e(t,n,r,i){var o=this;(0,x.default)(this,e),this.$rootScope=t,this.modelManager=n,this.syncManager=r,this.componentManager=i,this.migrators=[],this.addEditorToComponentMigrator(),this.modelManager.addItemSyncObserver("migration-manager","*",function(e,t,n){var r=!0,i=!1,a=void 0;try{for(var s=o.migrators[Symbol.iterator](),c;!(r=(c=s.next()).done);r=!0){var u=c.value,l=e.filter(function(e){return e.content_type==u.content_type});l.length>0&&u.handler(l)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}})}return e.$inject=["$rootScope","modelManager","syncManager","componentManager"],(0,C.default)(e,[{key:"addEditorToComponentMigrator",value:function e(){var t=this;this.migrators.push({content_type:"SN|Editor",handler:function e(n){var r=!0,i=!1,o=void 0;try{for(var a=n[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value;if(c.url&&!t.componentManager.componentForUrl(c.url)){var u=t.modelManager.createItem({content_type:"SN|Component",url:c.url,name:c.name,area:"editor-editor"});u.setAppDataItem("data",c.data),u.setDirty(!0),t.modelManager.addItem(u)}}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}var l=!0,f=!1,d=void 0;try{for(var h=n[Symbol.iterator](),p;!(l=(p=h.next()).done);l=!0){var m=p.value;t.modelManager.setItemToBeDeleted(m)}}catch(e){f=!0,d=e}finally{try{!l&&h.return&&h.return()}finally{if(f)throw d}}t.syncManager.sync("addEditorToComponentMigrator")}})}}]),e}();angular.module("app").service("migrationManager",Y);var Z=function(){function e(t){(0,x.default)(this,e),e.MappingSourceRemoteRetrieved="MappingSourceRemoteRetrieved",e.MappingSourceRemoteSaved="MappingSourceRemoteSaved",e.MappingSourceLocalSaved="MappingSourceLocalSaved",e.MappingSourceLocalRetrieved="MappingSourceLocalRetrieved",e.MappingSourceComponentRetrieved="MappingSourceComponentRetrieved",e.MappingSourceDesktopInstalled="MappingSourceDesktopInstalled",e.MappingSourceRemoteActionRetrieved="MappingSourceRemoteActionRetrieved",e.MappingSourceFileImport="MappingSourceFileImport",e.isMappingSourceRetrieved=function(t){return[e.MappingSourceRemoteRetrieved,e.MappingSourceComponentRetrieved,e.MappingSourceRemoteActionRetrieved].includes(t)},this.storageManager=t,this.notes=[],this.tags=[],this.itemSyncObservers=[],this.itemChangeObservers=[],this.itemsPendingRemoval=[],this.items=[],this._extensions=[],this.acceptableContentTypes=["Note","Tag","Extension","SN|Editor","SN|Theme","SN|Component","SF|Extension","SN|UserPreferences","SF|MFA"]}return e.$inject=["storageManager"],(0,C.default)(e,[{key:"resetLocalMemory",value:function e(){this.notes.length=0,this.tags.length=0,this.items.length=0,this._extensions.length=0}},{key:"alternateUUIDForItem",value:function t(n,r,i){var o=this;n.refreshContentObject();var a=this.createItem(n);a.uuid=SFJS.crypto.generateUUIDSync(),a.informReferencesOfUUIDChange(n.uuid,a.uuid),this.informModelsOfUUIDChangeForItem(a,n.uuid,a.uuid),console.log(n.uuid,"-->",a.uuid);var s=function e(){o.addItem(a),a.setDirty(!0),a.markAllReferencesDirty(),r()};i?(n.deleted=!0,this.mapResponseItemsToLocalModels([n],e.MappingSourceLocalSaved),s()):s()}},{key:"informModelsOfUUIDChangeForItem",value:function e(t,n,r){var i=!0,o=!1,a=void 0;try{for(var s=this.items[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){c.value.potentialItemOfInterestHasChangedItsUUID(t,n,r)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}},{key:"allItemsMatchingTypes",value:function e(t){return this.allItems.filter(function(e){return(_.includes(t,e.content_type)||_.includes(t,"*"))&&!e.dummy})}},{key:"validItemsForContentType",value:function e(t){return this.allItems.filter(function(e){return e.content_type==t&&!e.errorDecrypting})}},{key:"findItem",value:function e(t){return _.find(this.items,{uuid:t})}},{key:"findOrCreateTagByTitle",value:function e(t){var n=_.find(this.tags,{title:t});return n||(n=this.createItem({content_type:"Tag",title:t}),this.addItem(n)),n}},{key:"didSyncModelsOffline",value:function t(n){this.notifySyncObserversOfModels(n,e.MappingSourceLocalSaved)}},{key:"mapResponseItemsToLocalModels",value:function e(t,n){return this.mapResponseItemsToLocalModelsOmittingFields(t,null,n)}},{key:"mapResponseItemsToLocalModelsOmittingFields",value:function e(t,n,r){var i=[],o=[],a=[],s=!0,c=!1,u=void 0;try{for(var l=t[Symbol.iterator](),f;!(s=(f=l.next()).done);s=!0){var d=f.value;if(d.content_type&&d.content||d.deleted||d.errorDecrypting){if(Array.isArray(n)){var h=!0,p=!1,m=void 0;try{for(var v=n[Symbol.iterator](),g;!(h=(g=v.next()).done);h=!0){delete d[g.value]}}catch(e){p=!0,m=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw m}}}var y=this.findItem(d.uuid);if(y&&(y.updateFromJSON(d),y.dummy=!1),this.itemsPendingRemoval.includes(d.uuid))_.pull(this.itemsPendingRemoval,d.uuid);else{var b=d.content_type||y&&y.content_type,w=!_.includes(this.acceptableContentTypes,b),k=!1;if(1==d.deleted||w){if(!d.deleted||!d.dirty){y&&!w&&(a.push(y),this.removeItemLocally(y));continue}k=!0}y||(y=this.createItem(d,!0)),this.addItem(y,k),y.errorDecrypting||a.push(y),i.push(y),o.push(d)}}else console.error("Server response item is corrupt:",d)}}catch(e){c=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}for(var x in o){var d=o[x];d.content&&this.resolveReferencesForItem(i[x])}return this.notifySyncObserversOfModels(a,r),i}},{key:"notifySyncObserversOfModels",value:function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a=this.itemSyncObservers[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){var c=s.value,u="*"==c.type?t:t.filter(function(e){return e.content_type==c.type}),l=[],f=[],d=!0,h=!1,p=void 0;try{for(var m=u[Symbol.iterator](),v;!(d=(v=m.next()).done);d=!0){var g=v.value;g.deleted?f.push(g):l.push(g)}}catch(e){h=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw p}}u.length>0&&c.callback(u,l,f,n)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"notifyItemChangeObserversOfModels",value:function e(t){var n=!0,r=!1,i=void 0;try{for(var o=this.itemChangeObservers[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){var s=a.value,c=t.filter(function(e){return _.includes(s.content_types,e.content_type)||_.includes(s.content_types,"*")});c.length>0&&s.callback(c)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"createItem",value:function t(n,r){var i;return i="Note"==n.content_type?new N(n):"Tag"==n.content_type?new L(n):"Extension"==n.content_type?new F(n):"SN|Editor"==n.content_type?new j(n):"SN|Theme"==n.content_type?new B(n):"SN|Component"==n.content_type?new T(n):"SF|Extension"==n.content_type?new P(n):"SF|MFA"==n.content_type?new D(n):new O(n),r||this.notifySyncObserversOfModels([i],e.MappingSourceLocalSaved),i.addObserver(this,function(e){this.notifyItemChangeObserversOfModels([e])}.bind(this)),i}},{key:"createDuplicateItem",value:function e(t){var n=this.createItem(t,!0);return this.resolveReferencesForItem(n),n}},{key:"addItem",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.addItems([t],n)}},{key:"addItems",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.forEach(function(e){n||("Tag"==e.content_type?_.find(this.tags,{uuid:e.uuid})||this.tags.splice(_.sortedIndexBy(this.tags,e,function(e){return e.title?e.title.toLowerCase():""}),0,e):"Note"==e.content_type?_.find(this.notes,{uuid:e.uuid})||this.notes.unshift(e):"Extension"==e.content_type&&(_.find(this._extensions,{uuid:e.uuid})||this._extensions.unshift(e))),_.find(this.items,{uuid:e.uuid})||this.items.push(e)}.bind(this))}},{key:"resortTag",value:function e(t){_.pull(this.tags,t),this.tags.splice(_.sortedIndexBy(this.tags,t,function(e){return e.title?e.title.toLowerCase():""}),0,t)}},{key:"resolveReferencesForItem",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.contentObject;if(t.removeReferencesNotPresentIn(r.references||[]),r.references){var i=!0,o=!1,a=void 0;try{for(var s=r.references[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value,l=this.findItem(u.uuid);l&&(t.addItemAsRelationship(l),l.addItemAsRelationship(t),n&&l.setDirty(!0))}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}}},{key:"addItemSyncObserver",value:function e(t,n,r){this.itemSyncObservers.push({id:t,type:n,callback:r})}},{key:"removeItemSyncObserver",value:function e(t){_.remove(this.itemSyncObservers,_.find(this.itemSyncObservers,{id:t}))}},{key:"addItemChangeObserver",value:function e(t,n,r){this.itemChangeObservers.push({id:t,content_types:n,callback:r})}},{key:"removeItemChangeObserver",value:function e(t){_.remove(this.itemChangeObservers,_.find(this.itemChangeObservers,{id:t}))}},{key:"getDirtyItems",value:function e(){return this.items.filter(function(e){return 1==e.dirty&&!e.dummy&&(!e.errorDecrypting||e.deleted)})}},{key:"clearDirtyItems",value:function e(t){var n=!0,r=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(n=(a=o.next()).done);n=!0){a.value.setDirty(!1)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"clearAllDirtyItems",value:function e(){this.clearDirtyItems(this.getDirtyItems())}},{key:"setItemToBeDeleted",value:function e(t){t.deleted=!0,t.dummy||t.setDirty(!0),"Tag"==t.content_type?_.pull(this.tags,t):"Note"==t.content_type?_.pull(this.notes,t):"Extension"==t.content_type&&_.pull(this._extensions,t),t.removeAndDirtyAllRelationships()}},{key:"setAllItemsDirty",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.allItems.filter(function(e){return _.includes(this.acceptableContentTypes,e.content_type)}.bind(this)),r=!0,i=!1,o=void 0;try{for(var a=n[Symbol.iterator](),s;!(r=(s=a.next()).done);r=!0){s.value.setDirty(!0,t)}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}}},{key:"removeItemLocally",value:function e(t,n){_.pull(this.items,t),t.isBeingRemovedLocally(),this.itemsPendingRemoval.push(t.uuid),"Tag"==t.content_type?_.pull(this.tags,t):"Note"==t.content_type?_.pull(this.notes,t):"Extension"==t.content_type&&_.pull(this._extensions,t),this.storageManager.deleteModel(t,n)}},{key:"createRelationshipBetweenItems",value:function e(t,n){t.addItemAsRelationship(n),n.addItemAsRelationship(t),t.setDirty(!0),n.setDirty(!0)}},{key:"getAllItemsJSONData",value:function(){function e(e,n,r,i){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t,n,r,i){return l.default.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Promise.all(this.allItems.map(function(e){return new V(e,t,r).paramsForExportFile()})).then(function(e){if(i&&0==e.length)return null;var r={items:e};return t&&(r.auth_params=n),JSON.stringify(r,null,2)}));case 1:case"end":return o.stop()}},e,this)}));return e}()},{key:"humanReadableDisplayForContentType",value:function e(t){return{Note:"note",Tag:"tag",Extension:"action-based extension","SN|Component":"component","SN|Editor":"editor","SN|Theme":"theme","SF|Extension":"server extension","SF|MFA":"two-factor authentication setting"}[t]}},{key:"allItems",get:function e(){return this.items.filter(function(e){return!e.dummy})}},{key:"extensions",get:function e(){return this._extensions.filter(function(e){return!e.deleted})}},{key:"filteredNotes",get:function e(){return N.filterDummyNotes(this.notes)}}]),e}();angular.module("app").service("modelManager",Z);var X=function(){function e(t,n,r){(0,x.default)(this,e),this.modelManager=t,this.syncManager=n,this.singletonManager=r,this.extensionsManagerIdentifier="org.standardnotes.extensions-manager",this.batchManagerIdentifier="org.standardnotes.batch-manager",this.systemExtensions=[],this.resolveExtensionsManager(),this.resolveBatchManager()}return e.$inject=["modelManager","syncManager","singletonManager"],(0,C.default)(e,[{key:"isSystemExtension",value:function e(t){return this.systemExtensions.includes(t.uuid)}},{key:"resolveExtensionsManager",value:function e(){var t=this;this.singletonManager.registerSingleton({content_type:"SN|Component",package_info:{identifier:this.extensionsManagerIdentifier}},function(e){t.systemExtensions.push(e.uuid);var n=!1;a()?e.local_url||(e.local_url=window._extensions_manager_location,n=!0):e.hosted_url||(e.hosted_url=window._extensions_manager_location,n=!0),n&&(e.setDirty(!0),t.syncManager.sync("resolveExtensionsManager"))},function(e){if(window._extensions_manager_location){var n={name:"Extensions",identifier:t.extensionsManagerIdentifier},r={content_type:"SN|Component",content:{name:n.name,area:"rooms",package_info:n,permissions:[{name:"stream-items",content_types:["SN|Component","SN|Theme","SF|Extension","Extension","SF|MFA","SN|Editor"]}]}};a()?r.content.local_url=window._extensions_manager_location:r.content.hosted_url=window._extensions_manager_location;var i=t.modelManager.createItem(r);t.modelManager.addItem(i),i.setDirty(!0),t.syncManager.sync("resolveExtensionsManager createNew"),t.systemExtensions.push(i.uuid),e(i)}})}},{key:"resolveBatchManager",value:function e(){var t=this;this.singletonManager.registerSingleton({content_type:"SN|Component",package_info:{identifier:this.batchManagerIdentifier}},function(e){t.systemExtensions.push(e.uuid);var n=!1;a()?e.local_url||(e.local_url=window._batch_manager_location,n=!0):e.hosted_url||(e.hosted_url=window._batch_manager_location,n=!0),n&&(e.setDirty(!0),t.syncManager.sync("resolveExtensionsManager"))},function(e){if(window._batch_manager_location){var n={name:"Batch Manager",identifier:t.batchManagerIdentifier},r={content_type:"SN|Component",content:{name:n.name,area:"modal",package_info:n,permissions:[{name:"stream-items",content_types:["Note","Tag","SN|Component","SN|Theme","SF|Extension","Extension","SF|MFA","SN|Editor","SN|UserPreferences"]}]}};a()?r.content.local_url=window._batch_manager_location:r.content.hosted_url=window._batch_manager_location;var i=t.modelManager.createItem(r);t.modelManager.addItem(i),i.setDirty(!0),t.syncManager.sync("resolveBatchManager createNew"),t.systemExtensions.push(i.uuid),e(i)}})}}]),e}();angular.module("app").service("nativeExtManager",X),angular.module("app").provider("passcodeManager",function(){function e(e,t,n,r,i,o){var a=this;this._hasPasscode=null!=o.getItem("offlineParams",te.Fixed),this._locked=this._hasPasscode,
this.isLocked=function(){return this._locked},this.hasPasscode=function(){return this._hasPasscode},this.keys=function(){return this._keys},this.passcodeAuthParams=function(){return JSON.parse(o.getItem("offlineParams",te.Fixed))},this.protocolVersion=function(){return this._authParams&&this._authParams.version},this.unlock=function(e,t){var n=this,r=this.passcodeAuthParams();SFJS.crypto.computeEncryptionKeysForUser(e,r).then(function(e){if(e.pw!==r.hash)return void t(!1);n._keys=e,n._authParams=r,n.decryptLocalStorage(e,r).then(function(){n._locked=!1,t(!0)})})},this.setPasscode=function(e,t){var n=SFJS.crypto.generateUUIDSync();SFJS.crypto.generateInitialKeysAndAuthParamsForUser(n,e).then(function(e){var n=e.keys,r=e.authParams;r.hash=n.pw,a._keys=n,a._hasPasscode=!0,a._authParams=r,a.encryptLocalStorage(n,r),o.setItem("offlineParams",JSON.stringify(r),te.Fixed),t(!0)})},this.changePasscode=function(e,t){a.setPasscode(e,t)},this.clearPasscode=function(){o.setItemsMode(i.isEphemeralSession()?te.Ephemeral:te.Fixed),o.removeItem("offlineParams",te.Fixed),this._keys=null,this._hasPasscode=!1},this.encryptLocalStorage=function(e,t){o.setKeys(e,t),o.setItemsMode(i.isEphemeralSession()?te.Ephemeral:te.FixedEncrypted,!0)},this.decryptLocalStorage=function(){var e=(0,d.default)(l.default.mark(function e(t,n){return l.default.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return o.setKeys(t,n),r.abrupt("return",o.decryptStorage());case 2:case"end":return r.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}this.$get=["$rootScope","$timeout","modelManager","dbManager","authManager","storageManager",function(t,n,r,i,o,a){return new e(t,n,r,i,o,a)}]});var Q=function(){function e(t,n){var r=this;(0,x.default)(this,e),this.$rootScope=t,this.modelManager=n,this.singletonHandlers=[],t.$on("initial-data-loaded",function(e,t){r.resolveSingletons(n.allItems,null,!0)}),t.$on("sync:completed",function(e,t){r.resolveSingletons(t.retrievedItems,t.savedItems)})}return e.$inject=["$rootScope","modelManager"],(0,C.default)(e,[{key:"registerSingleton",value:function e(t,n,r){this.singletonHandlers.push({predicate:t,resolutionCallback:n,createBlock:r})}},{key:"resolveSingletons",value:function e(t,n,r){var i=this;t=t||[],n=n||[];var o=function e(o){d=o.predicate;var a=i.filterItemsWithPredicate(t,d),s=i.filterItemsWithPredicate(n,d).length;if(a.length>0||s>0)if(h=i.filterItemsWithPredicate(i.modelManager.allItems,d),h.length>=2){var c=h.sort(function(e,t){return e.created_at>t.created_at}),u=c[0],l=c.slice(1,c.length),f=!0,v=!1,g=void 0;try{for(var y=l[Symbol.iterator](),b;!(f=(b=y.next()).done);f=!0)p=b.value,i.modelManager.setItemToBeDeleted(p)}catch(e){v=!0,g=e}finally{try{!f&&y.return&&y.return()}finally{if(v)throw g}}i.$rootScope.sync("resolveSingletons"),o.singleton=u,o.resolutionCallback(u)}else 1==h.length&&(o.singleton||(m=h[0],o.singleton=m,o.resolutionCallback(m)));else o.singleton||r||o.pendingCreateBlockCallback||(o.pendingCreateBlockCallback=!0,o.createBlock(function(e){o.singleton=e,o.pendingCreateBlockCallback=!1,o.resolutionCallback(e)}))},a=!0,s=!1,c=void 0;try{for(var u=this.singletonHandlers[Symbol.iterator](),l;!(a=(l=u.next()).done);a=!0){var f=l.value,d,h,p,m;o(f)}}catch(e){s=!0,c=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw c}}}},{key:"filterItemsWithPredicate",value:function e(t,n){var r=this;return t.filter(function(e){return r.itemSatisfiesPredicate(e,n)})}},{key:"itemSatisfiesPredicate",value:function e(t,n){for(var r in n){var i=n[r],o=t[r];if("object"==(void 0===i?"undefined":(0,w.default)(i))){if(!o)return!1;if(!this.itemSatisfiesPredicate(o,i))return!1}else if(o!=i)return!1}return!0}}]),e}();angular.module("app").service("singletonManager",Q);var ee=function(){function e(){(0,x.default)(this,e),this.memory={}}return(0,C.default)(e,[{key:"getItem",value:function e(t){return this.memory[t]||null}},{key:"setItem",value:function e(t,n){this.memory[t]=n}},{key:"removeItem",value:function e(t){delete this.memory[t]}},{key:"clear",value:function e(){this.memory={}}},{key:"keys",value:function e(){return Object.keys(this.memory)}},{key:"key",value:function e(t){return Object.keys(this.memory)[t]}},{key:"length",get:function e(){return Object.keys(this.memory).length}}]),e}(),te=function(){function e(t){(0,x.default)(this,e),this.dbManager=t}return e.$inject=["dbManager"],(0,C.default)(e,[{key:"initialize",value:function t(n,r){n?(this.storage=this.memoryStorage,this.itemsStorageMode=e.FixedEncrypted):r?(this.storage=this.memoryStorage,this.itemsStorageMode=e.Ephemeral):(this.storage=localStorage,this.itemsStorageMode=e.Fixed),this.modelStorageMode=r?e.Ephemeral:e.Fixed}},{key:"setItemsMode",value:function t(n,r){var i=this.getVault(n);if(i!==this.storage||n!==this.itemsStorageMode||r){for(var o=this.storage.length,a=0;a<o;a++){var s=this.storage.key(a);i.setItem(s,this.storage.getItem(s))}this.itemsStorageMode=n,i!==this.storage&&this.storage.clear(),this.storage=i,n==e.FixedEncrypted?this.writeEncryptedStorageToDisk():n==e.Fixed&&this.removeItem("encryptedStorage",e.Fixed)}}},{key:"getVault",value:function t(n){return n?n==e.Ephemeral||n==e.FixedEncrypted?this.memoryStorage:localStorage:this.storage}},{key:"setItem",value:function t(n,r,i){this.getVault(i).setItem(n,r),(i===e.FixedEncrypted||!i&&this.itemsStorageMode===e.FixedEncrypted)&&this.writeEncryptedStorageToDisk()}},{key:"getItem",value:function e(t,n){return this.getVault(n).getItem(t)}},{key:"setBooleanValue",value:function e(t,n,r){this.setItem(t,JSON.stringify(n),r)}},{key:"getBooleanValue",value:function e(t,n){return JSON.parse(this.getItem(t,n))}},{key:"removeItem",value:function e(t,n){this.getVault(n).removeItem(t)}},{key:"clear",value:function e(){this.memoryStorage.clear(),localStorage.clear()}},{key:"storageAsHash",value:function e(){for(var t={},n=this.storage.length,r=0;r<n;r++){var i=this.storage.key(r);t[i]=this.storage.getItem(i)}return t}},{key:"setKeys",value:function e(t,n){this.encryptedStorageKeys=t,this.encryptedStorageAuthParams=n}},{key:"writeEncryptedStorageToDisk",value:function t(){var n=this,r=new U;r.storage=this.storageAsHash(),new V(r,this.encryptedStorageKeys,this.encryptedStorageAuthParams.version).paramsForSync().then(function(t){n.setItem("encryptedStorage",JSON.stringify(t),e.Fixed)})}},{key:"decryptStorage",value:function(){function t(){return n.apply(this,arguments)}var n=(0,d.default)(l.default.mark(function t(){var n,r,i,o,a,s,c,u;return l.default.wrap(function t(l){for(;;)switch(l.prev=l.next){case 0:return n=JSON.parse(this.getItem("encryptedStorage",e.Fixed)),l.next=3,SFJS.itemTransformer.decryptItem(n,this.encryptedStorageKeys);case 3:for(r=new U(n),i=!0,o=!1,a=void 0,l.prev=7,s=Object.keys(r.storage)[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)u=c.value,this.setItem(u,r.storage[u]);l.next=15;break;case 11:l.prev=11,l.t0=l.catch(7),o=!0,a=l.t0;case 15:l.prev=15,l.prev=16,!i&&s.return&&s.return();case 18:if(l.prev=18,!o){l.next=21;break}throw a;case 21:return l.finish(18);case 22:return l.finish(15);case 23:case"end":return l.stop()}},t,this,[[7,11,15,23],[16,,18,22]])}));return t}()},{key:"hasPasscode",value:function t(){return null!==this.getItem("encryptedStorage",e.Fixed)}},{key:"setModelStorageMode",value:function t(n){n!=this.modelStorageMode&&(n==e.Ephemeral&&this.dbManager.clearAllModels(null),this.modelStorageMode=n)}},{key:"getAllModels",value:function t(n){this.modelStorageMode==e.Fixed?this.dbManager.getAllModels(n):n&&n()}},{key:"saveModel",value:function e(t){this.saveModels([t])}},{key:"saveModels",value:function t(n,r){this.modelStorageMode==e.Fixed?this.dbManager.saveModels(n,r):r&&r()}},{key:"deleteModel",value:function t(n,r){this.modelStorageMode==e.Fixed?this.dbManager.deleteModel(n,r):r&&r()}},{key:"clearAllModels",value:function e(t){this.dbManager.clearAllModels(t)}},{key:"memoryStorage",get:function e(){return this._memoryStorage||(this._memoryStorage=new ee),this._memoryStorage}}]),e}();te.FixedEncrypted="FixedEncrypted",te.Ephemeral="Ephemeral",te.Fixed="Fixed",angular.module("app").service("storageManager",te);var ne=function(){function e(t,n,r,i,o,a,s,c,u){(0,x.default)(this,e),this.$rootScope=t,this.httpManager=o,this.modelManager=n,this.authManager=r,this.dbManager=i,this.$interval=a,this.$timeout=s,this.storageManager=c,this.passcodeManager=u,this.syncStatus={}}return e.$inject=["$rootScope","modelManager","authManager","dbManager","httpManager","$interval","$timeout","storageManager","passcodeManager"],(0,C.default)(e,[{key:"writeItemsToLocalStorage",value:function e(t,n,r){var i=this;if(0==t.length)return void(r&&r());var o=this.authManager.offline()?this.passcodeManager.protocolVersion():this.authManager.protocolVersion(),a=this.authManager.offline()?this.passcodeManager.keys():this.authManager.keys();Promise.all(t.map(function(){var e=(0,d.default)(l.default.mark(function e(t){var r;return l.default.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:return r=new V(t,a,o),i.next=3,r.paramsForLocalStorage();case 3:return r=i.sent,n&&delete r.dirty,i.abrupt("return",r);case 6:case"end":return i.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}())).then(function(e){i.storageManager.saveModels(e,r)})}},{key:"loadLocalItems",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){var n=this;return l.default.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:this.storageManager.getAllModels(function(e){var r=e.length,i=50,o=0,a=[],s=function e(){O.sortItemsByDate(a),t(a)},c=function(){var t=(0,d.default)(l.default.mark(function t(){var i,u;return l.default.wrap(function t(l){for(;;)switch(l.prev=l.next){case 0:return i=e.slice(o,o+50),l.next=3,n.handleItemsResponse(i,null,Z.MappingSourceLocalRetrieved);case 3:u=l.sent,a.push(u),o+=i.length,o<r?n.$timeout(function(){c()}):s();case 7:case"end":return l.stop()}},t,n)}));return function e(){return t.apply(this,arguments)}}();c()});case 1:case"end":return r.stop()}},e,this)}));return e}()},{key:"syncOffline",value:function e(t,n){var r=this,i=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){c.value.updated_at=new Date}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}this.writeItemsToLocalStorage(t,!0,function(e){var i=!0,o=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){var u=c.value;u.deleted&&r.modelManager.removeItemLocally(u)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r.$rootScope.$broadcast("sync:completed",{}),r.modelManager.didSyncModelsOffline(t),n&&n({success:!0})})}},{key:"markAllItemsDirtyAndSaveOffline",value:function e(t,n){var r=this,i=this.modelManager.allItems.filter(function(e){return!e.errorDecrypting}).slice(),o=function e(){var n=r.modelManager.allItems,i=!0,o=!1,a=void 0;try{for(var s=n[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){c.value.setDirty(!0)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}r.writeItemsToLocalStorage(n,!1,t)};if(n){var a=0;(function e(){if(a>=i.length)return void o();var t=i[a];a++,r.modelManager.alternateUUIDForItem(t,e,!0)})()}else o()}},{key:"clearQueuedCallbacks",value:function e(){this._queuedCallbacks=[]}},{key:"callQueuedCallbacksAndCurrent",value:function e(t,n){var r=this.queuedCallbacks;if(t&&r.push(t),r.length){var i=!0,o=!1,a=void 0;try{for(var s=r[Symbol.iterator](),c;!(i=(c=s.next()).done);i=!0){(0,c.value)(n)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}this.clearQueuedCallbacks()}}},{key:"beginCheckingIfSyncIsTakingTooLong",value:function e(){this.syncStatus.checker=this.$interval(function(){var e=5;(new Date-this.syncStatus.syncStart)/1e3>5&&(this.$rootScope.$broadcast("sync:taking-too-long"),this.stopCheckingIfSyncIsTakingTooLong())}.bind(this),500)}},{key:"stopCheckingIfSyncIsTakingTooLong",value:function e(){this.$interval.cancel(this.syncStatus.checker)}},{key:"lockSyncing",value:function e(){this.syncLocked=!0}},{key:"unlockSyncing",value:function e(){this.syncLocked=!1}},{key:"sync",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],i,o,a,s,c,u,f,h,p,m,v,g,y,b,w;return l.default.wrap(function e(_){for(;;)switch(_.prev=_.next){case 0:if(!this.syncLocked){_.next=3;break}return console.log("Sync Locked, Returning;"),_.abrupt("return");case 3:if(n||(n={}),"string"==typeof t&&(r=t,t=null),i=this.modelManager.getDirtyItems(),!this.syncStatus.syncOpInProgress||n.force){_.next=12;break}return this.repeatOnCompletion=!0,t&&this.queuedCallbacks.push(t),this.writeItemsToLocalStorage(i,!1,null),console.log("Sync op in progress; returning."),_.abrupt("return");case 12:if(!this.authManager.offline()){_.next=16;break}return this.syncOffline(i,t),this.modelManager.clearDirtyItems(i),_.abrupt("return");case 16:return o=this.syncStatus.needsMoreSync,this.syncStatus.syncOpInProgress=!0,this.syncStatus.syncStart=new Date,this.beginCheckingIfSyncIsTakingTooLong(),a=100,s=i.slice(0,a),s.length<i.length?this.syncStatus.needsMoreSync=!0:this.syncStatus.needsMoreSync=!1,o||(this.syncStatus.total=i.length,this.syncStatus.current=0),this.syncStatus.current>this.syncStatus.total&&(this.syncStatus.total=this.syncStatus.current),this.allRetreivedItems||(this.allRetreivedItems=[]),this.allSavedItems||(this.allSavedItems=[]),c=this.authManager.protocolVersion(),u=this.authManager.keys(),f={},f.limit=150,_.next=33,Promise.all(s.map(function(e){var t=new V(e,u,c);return t.additionalFields=n.additionalFields,t.paramsForSync()})).then(function(e){f.items=e});case 33:for(h=!0,p=!1,m=void 0,_.prev=36,v=s[Symbol.iterator]();!(h=(g=v.next()).done);h=!0)y=g.value,y.dirtyCount=0;_.next=44;break;case 40:_.prev=40,_.t0=_.catch(36),p=!0,m=_.t0;case 44:_.prev=44,_.prev=45,!h&&v.return&&v.return();case 47:if(_.prev=47,!p){_.next=50;break}throw m;case 50:return _.finish(47);case 51:return _.finish(44);case 52:f.sync_token=this.syncToken,f.cursor_token=this.cursorToken,b=function(e){this.stopCheckingIfSyncIsTakingTooLong()}.bind(this),w=function(){var e=(0,d.default)(l.default.mark(function e(r){var i,o,a,c,u,f,d,h,p,m,v,g,y;return l.default.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:for(i=[],o=!0,a=!1,c=void 0,l.prev=4,u=s[Symbol.iterator]();!(o=(f=u.next()).done);o=!0)d=f.value,0==d.dirtyCount&&i.push(d);l.next=12;break;case 8:l.prev=8,l.t0=l.catch(4),a=!0,c=l.t0;case 12:l.prev=12,l.prev=13,!o&&u.return&&u.return();case 15:if(l.prev=15,!a){l.next=18;break}throw c;case 18:return l.finish(15);case 19:return l.finish(12);case 20:return this.modelManager.clearDirtyItems(i),this.syncStatus.error=null,this.$rootScope.$broadcast("sync:updated_token",this.syncToken),h=this.allSavedItems.map(function(e){return e.uuid}),r.retrieved_items=r.retrieved_items.filter(function(e){return!h.includes(e.uuid)}),l.next=27,this.handleItemsResponse(r.retrieved_items,null,Z.MappingSourceRemoteRetrieved);case 27:return p=l.sent,this.allRetreivedItems=this.allRetreivedItems.concat(p),m=["content","auth_hash"],l.next=32,this.handleItemsResponse(r.saved_items,m,Z.MappingSourceRemoteSaved);case 32:v=l.sent,this.allSavedItems=this.allSavedItems.concat(v),g=r.unsaved,this.handleUnsavedItemsResponse(g),this.writeItemsToLocalStorage(v,!1,null),this.syncStatus.syncOpInProgress=!1,this.syncStatus.current+=s.length,this.syncToken=r.sync_token,this.cursorToken=r.cursor_token,b(r),this.cursorToken||this.syncStatus.needsMoreSync?setTimeout(function(){this.sync(t,n,"onSyncSuccess cursorToken || needsMoreSync")}.bind(this),10):this.repeatOnCompletion?(this.repeatOnCompletion=!1,setTimeout(function(){this.sync(t,n,"onSyncSuccess repeatOnCompletion")}.bind(this),10)):(this.writeItemsToLocalStorage(this.allRetreivedItems,!1,null),y=10,(this.allRetreivedItems.length>=y||v.length>=y||g.length>=y)&&this.$rootScope.$broadcast("major-data-change"),this.callQueuedCallbacksAndCurrent(t,r),this.$rootScope.$broadcast("sync:completed",{retrievedItems:this.allRetreivedItems,savedItems:this.allSavedItems}),this.allRetreivedItems=[],this.allSavedItems=[]);case 43:case"end":return l.stop()}},e,this,[[4,8,12,20],[13,,15,19]])}));return function(t){return e.apply(this,arguments)}}().bind(this);try{this.httpManager.postAbsolute(this.syncURL,f,function(e){try{w(e)}catch(e){console.log("Caught sync success exception:",e)}}.bind(this),function(e){console.log("Sync error: ",e);var n=e?e.error:{message:"Could not connect to server."};this.syncStatus.syncOpInProgress=!1,this.syncStatus.error=n,this.writeItemsToLocalStorage(i,!1,null),b(e),this.$rootScope.$broadcast("sync:error",n),this.callQueuedCallbacksAndCurrent(t,{error:"Sync error"})}.bind(this))}catch(e){console.log("Sync exception caught:",e)}case 57:case"end":return _.stop()}},e,this,[[36,40,44,52],[45,,47,51]])}));return e}()},{key:"handleItemsResponse",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t,n,r){var i,o,a;return l.default.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return i=this.authManager.keys()||this.passcodeManager.keys(),s.next=3,SFJS.itemTransformer.decryptMultipleItems(t,i);case 3:return o=this.modelManager.mapResponseItemsToLocalModelsOmittingFields(t,n,r),a=o.filter(function(e){var t=e.errorDecryptingValueChanged;return e.errorDecryptingValueChanged=!1,t}),a.length>0&&this.writeItemsToLocalStorage(a,!1,null),s.abrupt("return",o);case 7:case"end":return s.stop()}},e,this)}));return e}()},{key:"refreshErroredItems",value:function e(){var t=this.modelManager.allItems.filter(function(e){return 1==e.errorDecrypting});t.length>0&&this.handleItemsResponse(t,null,Z.MappingSourceLocalRetrieved)}},{key:"handleUnsavedItemsResponse",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(l.default.mark(function e(t){var n=this,r,i;return l.default.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if(0!=t.length){o.next=2;break}return o.abrupt("return");case 2:console.log("Handle unsaved",t),r=0,i=function(){var e=(0,d.default)(l.default.mark(function e(){var o,a,s,c,u;return l.default.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:if(!(r>=t.length)){l.next=3;break}return n.sync(null,{additionalFields:["created_at","updated_at"]}),l.abrupt("return");case 3:return o=t[r],a=o.item,l.next=7,SFJS.itemTransformer.decryptMultipleItems([a],n.authManager.keys());case 7:if(s=n.modelManager.findItem(a.uuid)){l.next=10;break}return l.abrupt("return");case 10:c=o.error,"uuid_conflict"===c.tag?n.modelManager.alternateUUIDForItem(s,function(){r++,i()},!0):"sync_conflict"===c.tag&&(a.uuid=null,u=n.modelManager.createDuplicateItem(a),a.deleted||s.isItemContentEqualWith(u)||(n.modelManager.addItem(u),u.conflict_of=s.uuid,u.setDirty(!0)),r++,i());case 12:case"end":return l.stop()}},e,n)}));return function t(){return e.apply(this,arguments)}}(),i();case 6:case"end":return o.stop()}},e,this)}));return e}()},{key:"clearSyncToken",value:function e(){this.storageManager.removeItem("syncToken")}},{key:"destroyLocalData",value:function e(t){this.storageManager.clear(),this.storageManager.clearAllModels(function(){t&&this.$timeout(function(){t()})}.bind(this))}},{key:"serverURL",get:function e(){return this.storageManager.getItem("server")||window._default_sf_server}},{key:"masterKey",get:function e(){return this.storageManager.getItem("mk")}},{key:"syncURL",get:function e(){return this.serverURL+"/items/sync"}},{key:"syncToken",set:function e(t){this._syncToken=t,this.storageManager.setItem("syncToken",t)},get:function e(){return this._syncToken||(this._syncToken=this.storageManager.getItem("syncToken")),this._syncToken}},{key:"cursorToken",set:function e(t){this._cursorToken=t,t?this.storageManager.setItem("cursorToken",t):this.storageManager.removeItem("cursorToken")},get:function e(){return this._cursorToken||(this._cursorToken=this.storageManager.getItem("cursorToken")),this._cursorToken}},{key:"queuedCallbacks",get:function e(){return this._queuedCallbacks||(this._queuedCallbacks=[]),this._queuedCallbacks}}]),e}();angular.module("app").service("syncManager",ne);var re=function(){function e(t,n){var r=this;(0,x.default)(this,e),this.componentManager=t,n.registerUpdateObserver(function(e){e.active&&e.isTheme()&&(r.deactivateTheme(e),setTimeout(function(){r.activateTheme(e)},10))}),t.registerHandler({identifier:"themeManager",areas:["themes"],activationHandler:function e(t){t.active?r.activateTheme(t):r.deactivateTheme(t)}})}return e.$inject=["componentManager","desktopManager"],(0,C.default)(e,[{key:"activateTheme",value:function e(t){var n=this.componentManager.urlForComponent(t),r=document.createElement("link");r.href=n,r.type="text/css",r.rel="stylesheet",r.media="screen,print",r.id=t.uuid,document.getElementsByTagName("head")[0].appendChild(r)}},{key:"deactivateTheme",value:function e(t){var n=document.getElementById(t.uuid);n&&(n.disabled=!0,n.parentNode.removeChild(n))}}]),e}();angular.module("app").service("themeManager",re),angular.module("app").filter("appDate",["$filter",function(e){return function(t){return t?e("date")(new Date(t),"MM/dd/yyyy","UTC"):""}}]).filter("appDateTime",["$filter",function(e){return function(t){return t?e("date")(new Date(t),"dd.MM.yyyy HH:mm"):""}}]),angular.module("app").filter("sortBy",["$filter",function(e){return function(e,t){var n=function e(n,r){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){if(n.pinned&&r.pinned)return e(n,r,!0);if(n.pinned)return-1;if(r.pinned)return 1}var i=n[t]||"",o=r[t]||"",a=1;if("title"==t){if(i=i.toLowerCase(),o=o.toLowerCase(),0==i.length&&0==o.length)return 0;if(0==i.length&&0!=o.length)return 1;if(0!=i.length&&0==o.length)return-1;a=-1}return i>o?-1*a:i<o?1*a:0};return e=e||[],e.sort(function(e,t){return n(e,t)})}}]),angular.module("app").filter("startFrom",function(){return function(e,t){return e.slice(t)}}),angular.module("app").filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),angular.module("app").directive("snAutofocus",["$timeout",function(e){return{restrict:"A",scope:{shouldFocus:"="},link:function t(n,r){e(function(){n.shouldFocus&&r[0].focus()})}}}]),angular.module("app").directive("clickOutside",["$document",function(e){return{restrict:"A",replace:!1,link:function t(n,r,i){var o=!1;r.bind("click",function(e){o=!1,i.isOpen&&e.stopPropagation()}),e.bind("click",function(){o||(n.$apply(i.clickOutside),o=!0)})}}}]),angular.module("app").directive("delayHide",["$timeout",function(e){return{restrict:"A",scope:{show:"=",delay:"@"},link:function t(n,r,i){function o(){n.hidePromise&&(e.cancel(n.hidePromise),n.hidePromise=null),s(!0)}function a(){n.hidePromise=e(s.bind(this,!1),c())}function s(e){e?r.css({display:""}):r.css({display:"none"})}function c(){var e=parseInt(n.delay);return angular.isNumber(e)?e:200}var u;s(!1),n.$watch("show",function(e){e?o():a()})}}}]),angular.module("app").directive("fileChange",function(){return{restrict:"A",scope:{handler:"&"},link:function e(t,n){n.on("change",function(e){t.$apply(function(){t.handler({files:e.target.files})})})}}}),angular.module("app").directive("infiniteScroll",["$rootScope","$window","$timeout",function(e,t,n){return{link:function e(t,n,r){var i=parseInt(r.threshold)||0,o=n[0];n.on("scroll",function(){t.$eval(r.canLoad)&&o.scrollTop+o.offsetHeight>=o.scrollHeight-i&&t.$apply(r.infiniteScroll)})}}}]),angular.module("app").directive("lowercase",function(){return{require:"ngModel",link:function e(t,n,r,i){var o=function e(t){void 0==t&&(t="");var n=t.toLowerCase();return n!==t&&(i.$setViewValue(n),i.$render()),n};i.$parsers.push(o),o(t[r.ngModel])}}}),angular.module("app").directive("selectOnClick",["$window",function(e){return{restrict:"A",link:function t(n,r,i){r.on("focus",function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]);var ie=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/account-menu.html",this.scope={onSuccessfulAuth:"&",closeFunction:"&"}}return(0,C.default)(e,[{key:"controller",value:["$scope","$rootScope","authManager","modelManager","syncManager","dbManager","passcodeManager","$timeout","storageManager","$compile","archiveManager",function e(t,n,r,i,o,s,c,u,l,f,d){"ngInject";t.formData={mergeLocal:!0,url:o.serverURL,ephemeral:!1},t.user=r.user,t.server=o.serverURL,t.securityUpdateAvailable=r.checkForSecurityUpdate(),t.close=function(){u(function(){t.closeFunction()()})},t.encryptedBackupsAvailable=function(){return r.user||c.hasPasscode()},t.canAddPasscode=!r.isEphemeralSession(),t.syncStatus=o.syncStatus,t.submitMfaForm=function(){var e={};e[t.formData.mfa.payload.mfa_key]=t.formData.userMfaCode,t.login(e)},t.submitAuthForm=function(){t.formData.email&&t.formData.user_password&&(t.formData.showLogin?t.login():t.register())},t.login=function(e){o.lockSyncing(),t.formData.status="Generating Login Keys...",u(function(){r.login(t.formData.url,t.formData.email,t.formData.user_password,t.formData.ephemeral,t.formData.strictSignin,e,function(e){if(!e||e.error){o.unlockSyncing(),t.formData.status=null;var n=e?e.error:{message:"An unknown error occured."};u("mfa-required"==n.tag||"mfa-invalid"==n.tag?function(){t.formData.showLogin=!1,t.formData.mfa=n}:function(){t.formData.showLogin=!0,t.formData.mfa=null,n.message&&alert(n.message)})}else t.onAuthSuccess(function(){o.unlockSyncing(),o.sync("onLogin")})})})},t.register=function(){if(t.formData.password_conf!==t.formData.user_password)return void alert("The two passwords you entered do not match. Please try again.");t.formData.confirmPassword=!1,t.formData.status="Generating Account Keys...",u(function(){r.register(t.formData.url,t.formData.email,t.formData.user_password,t.formData.ephemeral,function(e){if(!e||e.error){t.formData.status=null;var n=e?e.error:{message:"An unknown error occured."};alert(n.message)}else t.onAuthSuccess(function(){o.sync("onRegister")})})})},t.mergeLocalChanged=function(){t.formData.mergeLocal||confirm("Unchecking this option means any of the notes you have written while you were signed out will be deleted. Are you sure you want to discard these notes?")||(t.formData.mergeLocal=!0)},t.onAuthSuccess=function(e){var r=function n(){u(function(){t.onSuccessfulAuth()(),o.refreshErroredItems(),e&&e()})};t.formData.mergeLocal?(n.$broadcast("major-data-change"),t.clearDatabaseAndRewriteAllItems(!0,r)):(i.resetLocalMemory(),l.clearAllModels(function(){r()}))},t.openPasswordWizard=function(e){t.close(),r.presentPasswordWizard(e)},t.clearDatabaseAndRewriteAllItems=function(e,t){l.clearAllModels(function(){o.markAllItemsDirtyAndSaveOffline(function(){t&&t()},e)})},t.destroyLocalData=function(){confirm("Are you sure you want to end your session? This will delete all local items and extensions.")&&(r.signOut(),o.destroyLocalData(function(){window.location.reload()}))},t.archiveFormData={encrypted:!!t.encryptedBackupsAvailable()},t.user=r.user,t.submitImportPassword=function(){t.performImport(t.importData.data,t.importData.password)},t.performImport=function(e,n){t.importData.loading=!0,u(function(){t.importJSONData(e,n,function(e,n){u(function(){t.importData.loading=!1,t.importData=null,setTimeout(function(){if(e)if(n>0){var t="Import complete. "+n+" items were not imported because there was an error decrypting them. Make sure the password is correct and try again.";alert(t)}else alert("Your data has been successfully imported.");else alert("There was an error importing your data. Please try again.")},10)})})})},t.importFileSelected=function(e){t.importData={};var n=e[0],r=new FileReader;r.onload=function(e){try{var n=JSON.parse(e.target.result);u(function(){n.auth_params?(t.importData.requestPassword=!0,t.importData.data=n):t.performImport(n,null)})}catch(e){alert("Unable to open file. Ensure it is a proper JSON file and try again.")}},r.readAsText(n)},t.importJSONData=function(e,t,n){var r=function(t){i.mapResponseItemsToLocalModels(e.items,Z.MappingSourceFileImport).forEach(function(e){e.setDirty(!0,!0),e.deleted=!1,e.markAllReferencesDirty(!0),"SN|Component"==e.content_type&&(e.active=!1)}),o.sync(function(e){n(e,t)},{additionalFields:["created_at","updated_at"]},"importJSONData")}.bind(this);e.auth_params?SFJS.crypto.computeEncryptionKeysForUser(t,e.auth_params).then(function(t){try{SFJS.itemTransformer.decryptMultipleItems(e.items,t,!1).then(function(){e.items.forEach(function(e){e.enc_item_key=null,e.auth_hash=null});var t=0;e.items=e.items.filter(function(e){return!e.errorDecrypting||(t++,!1)}),r(t)})}catch(e){return console.log("Error decrypting",e),alert("There was an error decrypting your items. Make sure the password you entered is correct and try again."),void n(null)}}):r()},t.downloadDataArchive=function(){d.downloadBackup(t.archiveFormData.encrypted)},t.notesAndTagsCount=function(){return i.allItemsMatchingTypes(["Note","Tag"]).length},t.encryptionStatusForNotes=function(){var e=t.notesAndTagsCount();return e+"/"+e+" notes encrypted."},t.encryptionEnabled=function(){return c.hasPasscode()||!r.offline()},t.encryptionSource=function(){return r.offline()?c.hasPasscode()?"Local Passcode":null:"Account keys"},t.encryptionStatusString=function(){return r.offline()?c.hasPasscode()?"Encryption is enabled. Your data is encrypted using your passcode before saving to your device storage.":"Encryption is not enabled. Sign in, register, or add a passcode lock to enable encryption.":"End-to-end encryption is enabled. Your data is encrypted before syncing to your private account."},t.hasPasscode=function(){return c.hasPasscode()},t.addPasscodeClicked=function(){t.formData.showPasscodeForm=!0},t.submitPasscodeForm=function(){var e=t.formData.passcode;if(e!==t.formData.confirmPasscode)return void alert("The two passcodes you entered do not match. Please try again.");(t.formData.changingPasscode?c.changePasscode:c.setPasscode)(e,function(){u(function(){t.formData.showPasscodeForm=!1,r.offline()&&(n.$broadcast("major-data-change"),t.clearDatabaseAndRewriteAllItems(!1))})})},t.changePasscodePressed=function(){t.formData.changingPasscode=!0,t.addPasscodeClicked(),t.formData.changingPasscode=!1},t.removePasscodePressed=function(){var e=!r.offline(),t="Are you sure you want to remove your local passcode?";e||(t+=" This will remove encryption from your local data."),confirm(t)&&(c.clearPasscode(),r.offline()&&o.markAllItemsDirtyAndSaveOffline())},t.isDesktopApplication=function(){return a()}}]}]),e}();angular.module("app").directive("accountMenu",function(){return new ie});var oe=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/actions-menu.html",this.scope={item:"="}}return(0,C.default)(e,[{key:"controller",value:["$scope","modelManager","actionsManager",function e(t,n,r){"ngInject";t.renderData={},t.extensions=r.extensions.sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()});var i=function e(n){n.loading=!0,r.loadExtensionInContextOfItem(n,t.item,function(e){n.loading=!1})},o=!0,a=!1,s=void 0;try{for(var c=t.extensions[Symbol.iterator](),u;!(o=(u=c.next()).done);o=!0){i(u.value)}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}t.executeAction=function(e,n,i){if("nested"==e.verb)return void(e.subrows?e.subrows=null:e.subrows=t.subRowsForAction(e,n));e.running=!0,r.executeAction(e,n,t.item,function(o){e.running=!1,t.handleActionResponse(e,o),r.loadExtensionInContextOfItem(n,t.item,function(e){if(i){_.find(e.actions,{label:i.label}).subrows=t.subRowsForAction(i,n)}})})},t.handleActionResponse=function(e,n){switch(e.verb){case"render":var r=n.item;"Note"==r.content_type&&(t.renderData.title=r.title,t.renderData.text=r.text,t.renderData.showRenderModal=!0)}},t.subRowsForAction=function(e,t){var n=this
;return e.subactions?e.subactions.map(function(r){return{onClick:function i(o){n.executeAction(r,t,e),o.stopPropagation()},label:r.label,subtitle:r.desc,spinnerClass:r.running?"info":null}}):null}}]}]),e}();angular.module("app").directive("actionsMenu",function(){return new oe});var ae=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/component-modal.html",this.scope={show:"=",component:"=",callback:"=",onDismiss:"&"}}return(0,C.default)(e,[{key:"link",value:function e(t,n,r){t.el=n}},{key:"controller",value:["$scope","$timeout","componentManager",function e(t,n,r){"ngInject";t.dismiss=function(e){t.el.remove(),t.$destroy(),t.onDismiss&&t.onDismiss()&&t.onDismiss()(t.component),e&&e()}}]}]),e}();angular.module("app").directive("componentModal",function(){return new ae});var se=function(){function e(t,n,r,i){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/component-view.html",this.scope={component:"=",manualDealloc:"="},this.$rootScope=t,this.componentManager=n,this.desktopManager=r,this.timeout=i}return(0,C.default)(e,[{key:"link",value:function e(t,n,r,i){var o=this;t.el=n,t.identifier="component-view-"+Math.random(),this.componentManager.registerHandler({identifier:t.identifier,areas:[t.component.area],activationHandler:function e(t){t.active&&o.timeout(function(){var e=o.componentManager.iframeForComponent(t);e&&(e.onload=function(){this.componentManager.registerComponentWindow(t,e.contentWindow)}.bind(o))})},actionHandler:function e(t,n,r){"set-size"==n&&o.componentManager.handleSetSizeEvent(t,r)}}),t.updateObserver=this.desktopManager.registerUpdateObserver(function(e){e==t.component&&e.active&&t.reloadComponent()}),t.$watch("component",function(e,t){i.componentValueChanging(e,t)})}},{key:"controller",value:["$scope","$rootScope","$timeout","componentManager","desktopManager",function e(t,n,r,i,o){"ngInject";this.componentValueChanging=function(e,n){n&&e!==n&&i.deactivateComponent(n,!0),e&&(i.activateComponent(e,!0),console.log("Loading",t.component.name,t.getUrl(),e.valid_until),t.reloadStatus())},t.$on("ext-reload-complete",function(){t.reloadStatus()}),t.reloadComponent=function(){console.log("Reloading component",t.component),i.reloadComponent(t.component)},t.reloadStatus=function(){var e=t.component;t.reloading=!0;var o=t.componentValid,s,c,u;c=e.offlineOnly&&!a(),u=!a()&&!e.url&&!e.hosted_url||a()&&!e.local_url&&!e.url&&!e.hosted_url,s=e.valid_until&&e.valid_until<=new Date,t.componentValid=!c&&!u&&!s,t.error=c?"offline-restricted":u?"url-missing":s?"expired":null,t.componentValid!==o&&t.componentValid&&i.activateComponent(e,!0),s&&!t.triedReloading&&(t.triedReloading=!0,n.$broadcast("reload-ext-data")),r(function(){t.reloading=!1},500)},t.getUrl=function(){var e=i.urlForComponent(t.component);return t.component.runningLocally=e!==t.component.url&&e!==t.component.hosted_url,e},t.$on("$destroy",function(){i.deregisterHandler(t.identifier),t.component&&!t.manualDealloc&&i.deactivateComponent(t.component,!0),o.deregisterUpdateObserver(t.updateObserver)})}]}]),e}();angular.module("app").directive("componentView",["$rootScope","componentManager","desktopManager","$timeout",function(e,t,n,r){return new se(e,t,n,r)}]);var ce=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/editor-menu.html",this.scope={callback:"&",selectedEditor:"=",currentItem:"="}}return(0,C.default)(e,[{key:"controller",value:["$scope","componentManager","syncManager","$timeout",function e(t,n,r,i){"ngInject";t.formData={},t.editors=n.componentsForArea("editor-editor").sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()}),t.stack=n.componentsForArea("editor-stack").sort(function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()}),t.isDesktop=a(),t.defaultEditor=t.editors.filter(function(e){return e.isDefaultEditor()})[0],t.selectComponent=function(e,n){e.stopPropagation(),n&&(n.conflict_of=null),i(function(){t.callback()(n)})},t.toggleDefaultForEditor=function(e){t.defaultEditor==e?t.removeEditorDefault(e):t.makeEditorDefault(e)},t.offlineAvailableForComponent=function(e){return e.local_url&&a()},t.makeEditorDefault=function(e){var i=n.componentsForArea("editor-editor").filter(function(e){return e.isDefaultEditor()})[0];i&&(i.setAppDataItem("defaultEditor",!1),i.setDirty(!0)),e.setAppDataItem("defaultEditor",!0),e.setDirty(!0),r.sync("makeEditorDefault"),t.defaultEditor=e},t.removeEditorDefault=function(e){e.setAppDataItem("defaultEditor",!1),e.setDirty(!0),r.sync("removeEditorDefault"),t.defaultEditor=null},t.shouldDisplayRunningLocallyLabel=function(e){return!!e.runningLocally&&(e==t.selectedEditor||"editor-stack"==e.area&&t.stackComponentEnabled(e))},t.stackComponentEnabled=function(e){return e.active&&!e.isExplicitlyDisabledForItem(t.currentItem)}}]}]),e}();angular.module("app").directive("editorMenu",function(){return new ce});var ue=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/input-modal.html",this.scope={type:"=",title:"=",message:"=",placeholder:"=",callback:"&"}}return(0,C.default)(e,[{key:"link",value:function e(t,n,r){t.el=n}},{key:"controller",value:["$scope","modelManager","archiveManager","authManager","syncManager","$timeout",function e(t,n,r,i,o,a){"ngInject";t.formData={},t.dismiss=function(){t.el.remove(),t.$destroy()},t.submit=function(){t.callback()(t.formData.input),t.dismiss()}}]}]),e}();angular.module("app").directive("inputModal",function(){return new ue});var le=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.transclude=!0,this.templateUrl="directives/menu-row.html",this.scope={circle:"=",label:"=",subtite:"=",hasButton:"=",buttonText:"=",buttonClass:"=",buttonAction:"&",spinnerClass:"=",subRows:"=",faded:"=",desc:"="}}return(0,C.default)(e,[{key:"controller",value:["$scope","componentManager",function e(t,n){"ngInject";t.clickButton=function(e){e.stopPropagation(),t.buttonAction()}}]}]),e}();angular.module("app").directive("menuRow",function(){return new le});var fe=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/panel-resizer.html",this.scope={index:"=",panelId:"=",onResize:"&",onResizeFinish:"&",control:"=",alwaysVisible:"=",minWidth:"=",property:"=",hoverable:"=",collapsable:"="}}return(0,C.default)(e,[{key:"link",value:function e(t,n,r,i){t.elem=n,t.control.setWidth=function(e){t.setWidth(e,!0)},t.control.setLeft=function(e){t.setLeft(e)}}},{key:"controller",value:["$scope","$element","modelManager","actionsManager","$timeout",function e(t,n,r,i,o){"ngInject";function a(){return f.parentNode.getBoundingClientRect()}function s(){v=f.scrollWidth,x=document.getElementById("app").getBoundingClientRect()}function u(e){var n=f.getBoundingClientRect(),r=n.left+(v||f.style.maxWidth),i;e?i=e.clientX:(i=0,y=0);var o=i-y,a=v+o;t.setWidth(a,!1),t.onResize()&&t.onResize()(w,f)}function l(e){var n=f.getBoundingClientRect(),r=e.clientX||n.x,i=r-y,o=_+i;o<0&&(o=0,i=-_);var s=a(),c=v-i;c<p&&(c=p),c>s.width&&(c=s.width),o+c>s.width&&(o=s.width-c),t.setLeft(o,!1),t.setWidth(c,!1)}var f=document.getElementById(t.panelId);f||console.log("Panel not found for",t.panelId);var d=n[0],h=d.offsetWidth,p=t.minWidth||h,m=!1,v=f.scrollWidth,g=0,y=0,b,w=v,_,k,x;if("right"==t.property){var S=c(function(e){s(),u(),o(function(){t.finishSettingWidth()})},250);window.addEventListener("resize",S),t.$on("$destroy",function(){window.removeEventListener("resize",S)})}s(),t.alwaysVisible&&d.classList.add("always-visible"),t.hoverable&&d.classList.add("hoverable"),t.setWidth=function(e,n){e<p&&(e=p);var r=a();e>r.width&&(e=r.width);var i=x.width-f.getBoundingClientRect().x;e>i&&(e=i),e==r.width?(f.style.width="100%",f.style.flexBasis="100%"):(f.style.flexBasis=e+"px",f.style.width=e+"px"),w=e,n&&t.finishSettingWidth()},t.setLeft=function(e){f.style.left=e+"px",k=e},t.finishSettingWidth=function(){t.collapsable&&(b=w<=p,b?d.classList.add("collapsed"):d.classList.remove("collapsed"))},d.addEventListener("mousedown",function(e){m=!0,y=e.clientX,v=f.scrollWidth,_=f.offsetLeft,f.classList.add("no-selection"),t.hoverable&&d.classList.add("dragging")}),document.addEventListener("mousemove",function(e){m&&(e.preventDefault(),t.property&&"left"==t.property?l(e):u(e))}),document.addEventListener("mouseup",function(e){if(m){m=!1,d.classList.remove("dragging"),f.classList.remove("no-selection");var n=w==a().width;t.onResizeFinish&&t.onResizeFinish()(w,k,n),t.finishSettingWidth()}})}]}]),e}();angular.module("app").directive("panelResizer",function(){return new fe});var de=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/password-wizard.html",this.scope={type:"="}}return(0,C.default)(e,[{key:"link",value:function e(t,n,r){t.el=n}},{key:"controller",value:["$scope","modelManager","archiveManager","authManager","syncManager","$timeout",function e(t,n,r,i,o,a){"ngInject";t.dismiss=function(){t.el.remove(),t.$destroy()},t.syncStatus=o.syncStatus,t.formData={};var s=0,c=1,u=2,l=3,f=4,d=5,h="Continue";t.continueTitle="Continue",t.step=0,t.titleForStep=function(e){switch(e){case 1:return"Download a backup of your data";case 2:return"Sign out of all your devices";case 3:return t.changePassword?"Password information":"Enter your current password";case 4:return"Encrypt and sync data with new keys";case 5:return"Sign back in to your devices";default:return null}},t.configure=function(){"change-pw"==t.type?(t.title="Change Password",t.changePassword=!0):"upgrade-security"==t.type&&(t.title="Security Update",t.securityUpdate=!0)}(),t.continue=function(){if(5==t.step)return void t.dismiss();var e=function e(){t.step+=1,t.initializeStep(t.step)},n=t.preprocessorForStep(t.step);n?n(function(){e()}):e()},t.downloadBackup=function(e){r.downloadBackup(e)},t.preprocessorForStep=function(e){if(3==e)return function(e){t.showSpinner=!0,t.continueTitle="Generating Keys...",a(function(){t.validateCurrentPassword(function(n){t.showSpinner=!1,t.continueTitle="Continue",n&&e()})})}};var p="There was an error re-encrypting your items. Your password was changed, but not all your items were properly re-encrypted and synced. You should try syncing again. If all else fails, you should restore your notes from backup.";t.initializeStep=function(e){4==e?(t.lockContinue=!0,t.formData.status="Processing encryption keys...",t.formData.processing=!0,t.processPasswordChange(function(e){t.formData.statusError=!e,t.formData.processing=e,e?(t.formData.status="Encrypting and syncing data with new keys...",t.resyncData(function(e){t.formData.statusError=!e,t.formData.processing=!e,e?(t.lockContinue=!1,t.changePassword?t.formData.status="Successfully changed password and synced all items.":t.securityUpdate&&(t.formData.status="Successfully performed security update and synced all items.")):t.formData.status=p})):t.formData.status="Unable to process your password. Please try again."})):5==e&&(t.continueTitle="Finish")},t.validateCurrentPassword=function(e){var n=this,r=t.formData.currentPassword,o=t.securityUpdate?r:t.formData.newPassword;if(t.changePassword){if(!o||0==o.length)return void e(!1);if(o!=t.formData.newPasswordConfirmation)return alert("Your new password does not match its confirmation."),t.formData.status=null,void e(!1)}if(!i.user.email)return alert("We don't have your email stored. Please log out then log back in to fix this issue."),t.formData.status=null,void e(!1);var s=i.getAuthParams(),c=t.formData.currentPassword;SFJS.crypto.computeEncryptionKeysForUser(c,s).then(function(t){var r=t.mk===i.keys().mk;r?n.currentServerPw=t.pw:alert("The current password you entered is not correct. Please try again."),a(function(){return e(r)})})},t.resyncData=function(e){n.setAllItemsDirty(),o.sync(function(t){t.error?(alert(p),a(function(){return e(!1)})):a(function(){return e(!0)})})},t.processPasswordChange=function(e){var n=t.securityUpdate?t.formData.currentPassword:t.formData.newPassword,r=this.currentServerPw;SFJS.crypto.generateInitialKeysAndAuthParamsForUser(i.user.email,n).then(function(t){var n=t.keys,s=t.authParams;o.sync(function(t){i.changePassword(r,n,s,function(t){t.error?(alert(t.error.message?t.error.message:"There was an error changing your password. Please try again."),a(function(){return e(!1)})):a(function(){return e(!0)})})},null,"submitPasswordChange")})}}]}]),e}();angular.module("app").directive("passwordWizard",function(){return new de});var he=function(){function e(){(0,x.default)(this,e),this.restrict="E",this.templateUrl="directives/permissions-modal.html",this.scope={show:"=",component:"=",permissions:"=",callback:"="}}return(0,C.default)(e,[{key:"link",value:function e(t,n,r){t.dismiss=function(){n.remove()},t.accept=function(){t.callback(!0),t.dismiss()},t.deny=function(){t.callback(!1),t.dismiss()}}},{key:"controller",value:["$scope","modelManager",function e(t,n){"ngInject";t.permissionsString=function(){var e="",r=t.permissions.length,i=function e(t,n){return t>0?t==n-1?2==n?" and ":", and ":", ":""};return t.permissions.forEach(function(o,a){if("stream-items"===o.name){for(var s=o.content_types.map(function(e){var t=n.humanReadableDisplayForContentType(e);return t?t+"s":"items of type "+e}),c="",u=0;u<s.length;u++){var l=s[u];c+=i(u,s.length+r-a-1),c+=l}e+=i(a,r),e+=c,s.length>=2&&a<r-1&&(e+=", ")}else if("stream-context-item"===o.name){var f={"editor-stack":"working note","note-tags":"working note","editor-editor":"working note"};e+=i(a,r,!0),e+=f[t.component.area]}}),e+"."}}]}]),e}();angular.module("app").directive("permissionsModal",function(){return new he})},{"babel-runtime/helpers/asyncToGenerator":9,"babel-runtime/helpers/classCallCheck":10,"babel-runtime/helpers/createClass":11,"babel-runtime/helpers/get":12,"babel-runtime/helpers/inherits":13,"babel-runtime/helpers/possibleConstructorReturn":14,"babel-runtime/helpers/typeof":15,"babel-runtime/regenerator":16}]},{},[116]),angular.module("app").run(["$templateCache",function(e){"use strict";e.put("directives/account-menu.html","<div class='sn-component'>\n<div class='panel' id='account-panel'>\n<div class='content'>\n<div class='panel-section hero' ng-if='!user &amp;&amp; !formData.showLogin &amp;&amp; !formData.showRegister &amp;&amp; !formData.mfa'>\n<h1 class='title'>Sign in or register to enable sync and end-to-end encryption.</h1>\n<div class='panel-row'></div>\n<div class='panel-row'>\n<div class='button-group stretch'>\n<div class='button info featured' ng-click='formData.showLogin = true'>\n<div class='label'>Sign In</div>\n</div>\n<div class='button info featured' ng-click='formData.showRegister = true'>\n<div class='label'>Register</div>\n</div>\n</div>\n</div>\n<p>\nStandard Notes is free on every platform, and comes standard with sync and encryption.\n</p>\n</div>\n<div class='panel-section' ng-if='formData.showLogin || formData.showRegister'>\n<h3 class='title panel-row'>\n{{formData.showLogin ? \"Sign In\" : \"Register\"}}\n</h3>\n<form class='panel-form' ng-submit='submitAuthForm()'>\n<input name='email' ng-model='formData.email' placeholder='Email' required should-focus='true' sn-autofocus='true' type='email'>\n<input name='password' ng-model='formData.user_password' placeholder='Password' required type='password'>\n<input name='password' ng-if='formData.showRegister' ng-model='formData.password_conf' placeholder='Confirm Password' required type='password'>\n<a class='panel-row advanced' ng-click='formData.showAdvanced = !formData.showAdvanced'>\nAdvanced Options\n</a>\n<div class='advanced-options panel-row' ng-if='formData.showAdvanced'>\n<input name='server' ng-model='formData.url' placeholder='Server URL' required type='text'>\n</div>\n<div class='button-group stretch panel-row form-submit'>\n<button class='button info featured' type='submit'>\n<div class='label'>{{formData.showLogin ? \"Sign In\" : \"Register\"}}</div>\n</button>\n</div>\n<label ng-if='formData.showLogin'>\n<input ng-model='formData.strictSignin' type='checkbox'>\nUse strict sign in\n</label>\n<label>\n<input ng-false-value='true' ng-model='formData.ephemeral' ng-true-value='false' type='checkbox'>\nStay signed in\n</label>\n<label ng-if='notesAndTagsCount() &gt; 0'>\n<input ng-bind='true' ng-change='mergeLocalChanged()' ng-model='formData.mergeLocal' type='checkbox'>\nMerge local data ({{notesAndTagsCount()}} notes)\n</label>\n</form>\n<em class='block center-align mt-10' ng-if='formData.status' style='font-size: 14px;'></em>\n{{formData.status}}\n</div>\n<div class='panel-section' ng-if='formData.mfa'>\n<form ng-submit='submitMfaForm()'>\n<p>{{formData.mfa.message}}</p>\n<input autofocus='true' class='form-control mt-10' name='mfa' ng-model='formData.userMfaCode' placeholder='Enter Code' required should-focus='true' sn-autofocus='true'>\n<div class='button-group stretch panel-row form-submit'>\n<button class='button info featured' type='submit'>\n<div class='label'>Sign In</div>\n</button>\n</div>\n</form>\n</div>\n<div ng-if='!formData.showLogin &amp;&amp; !formData.showRegister &amp;&amp; !formData.mfa'>\n<div class='panel-section' ng-if='user'>\n<div class='panel-row'>\n<h2 class='title wrap'>{{user.email}}</h2>\n</div>\n<div class='subtitle subtle normal'>{{server}}</div>\n<div class='panel-row'></div>\n<a class='panel-row condensed' ng-click='openPasswordWizard(&#39;change-pw&#39;)'>Change Password</a>\n</div>\n<div class='panel-section'>\n<h3 class='title panel-row'>Encryption</h3>\n<h5 class='subtitle info panel-row' ng-if='encryptionEnabled()'>\n{{encryptionStatusForNotes()}}\n</h5>\n<p>\n{{encryptionStatusString()}}\n</p>\n</div>\n<div class='panel-section'>\n<h3 class='title panel-row'>Passcode Lock</h3>\n<div ng-if='!hasPasscode()'>\n<div ng-if='canAddPasscode'>\n<div class='panel-row' ng-if='!formData.showPasscodeForm'>\n<a class='info' ng-click='addPasscodeClicked(); $event.stopPropagation();'>Add Passcode</a>\n</div>\n<p>Add an app passcode to lock the app and encrypt on-device key storage.</p>\n</div>\n<div ng-if='!canAddPasscode'>\n<p>Adding a passcode is not supported in temporary sessions. Please sign out, then sign back in with the \"Stay signed in\" option checked.</p>\n</div>\n</div>\n<form ng-if='formData.showPasscodeForm' ng-submit='submitPasscodeForm()'>\n<input class='form-control' ng-model='formData.passcode' placeholder='Passcode' should-focus='true' sn-autofocus='true' type='password'>\n<input class='form-control' ng-model='formData.confirmPasscode' placeholder='Confirm Passcode' type='password'>\n<div class='button-group stretch panel-row form-submit'>\n<button class='button info' type='submit'>\n<div class='label'>Set Passcode</div>\n</button>\n</div>\n<a class='panel-row' ng-click='formData.showPasscodeForm = false'>Cancel</a>\n</form>\n<div ng-if='hasPasscode() &amp;&amp; !formData.showPasscodeForm'>\n<div class='panel-row'>\n<p>\nPasscode lock is enabled.\n<span ng-if='isDesktopApplication()'>Your passcode will be required on new sessions after app quit.</span>\n</p>\n</div>\n<div class='panel-row justify-left'>\n<div class='horizontal-group'>\n<a class='info' ng-click='changePasscodePressed()'>Change Passcode</a>\n<a class='danger' ng-click='removePasscodePressed()'>Remove Passcode</a>\n</div>\n</div>\n</div>\n</div>\n<div class='panel-section' ng-if='!importData.loading'>\n<h3 class='title'>Data Backups</h3>\n<form class='panel-form' ng-if='encryptedBackupsAvailable()'>\n<div class='input-group'>\n<label>\n<input ng-change='archiveFormData.encrypted = true' ng-model='archiveFormData.encrypted' ng-value='true' type='radio'>\nEncrypted\n</label>\n<label>\n<input ng-change='archiveFormData.encrypted = false' ng-model='archiveFormData.encrypted' ng-value='false' type='radio'>\nDecrypted\n</label>\n</div>\n</form>\n<a class='info' ng-class='{&#39;mt-5&#39; : !user}' ng-click='downloadDataArchive()'>Download Backup</a>\n<label class='import'>\n<input file-change='-&gt;' handler='importFileSelected(files)' style='display: none;' type='file'>\n<div class='label'>Import From Backup</div>\n</label>\n<span ng-if='isDesktopApplication()'>Backups are automatically created on desktop and can be managed via the \"Backups\" top-level menu.</span>\n<div class='impass' ng-if='importData.requestPassword'>\n<form class='panel-form stretch' ng-submit='submitImportPassword()'>\n<p>Enter the account password associated with the import file.</p>\n<input autofocus='true' class='form-control mt-5' ng-model='importData.password' placeholder='Enter File Account Password' type='password'>\n<div class='button-group stretch panel-row form-submit'>\n<button class='button info' type='submit'>\n<div class='label'>Decrypt & Import</div>\n</button>\n</div>\n</form>\n</div>\n<a class='right' ng-click='formData.showLogin = false; formData.showRegister = false;' ng-if='formData.showLogin || formData.showRegister'>\nCancel\n</a>\n<a class='right' ng-click='destroyLocalData()' ng-if='!formData.showLogin &amp;&amp; !formData.showRegister'>Clear Local Data</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("directives/actions-menu.html","<div class='sn-component'>\n<div class='menu-panel dropdown-menu'>\n<a class='no-decoration' href='https://standardnotes.org/extensions' ng-if='extensions.length == 0' target='blank'>\n<menu-row label='&#39;Download Actions&#39;'></menu-row>\n</a>\n<div ng-repeat='extension in extensions'>\n<div class='header' ng-click='extension.hide = !extension.hide; $event.stopPropagation();'>\n<div class='column'>\n<h4 class='title'>{{extension.name}}</h4>\n<div class='spinner small loading' ng-if='extension.loading'></div>\n<div ng-if='extension.hide'></div>\n</div>\n</div>\n<menu-row label='action.label' ng-click='executeAction(action, extension); $event.stopPropagation();' ng-if='!extension.hide' ng-repeat='action in extension.actionsWithContextForItem(item)' spinner-class='action.running ? &#39;info&#39; : null' sub-rows='action.subrows' subtitle='action.desc'>\n<div class='sublabel' ng-if='action.access_type'>\nUses\n<strong>{{action.access_type}}</strong>\naccess to this note.\n</div>\n</menu-row>\n</div>\n</div>\n</div>\n<div class='modal medium-text medium' ng-click='$event.stopPropagation();' ng-if='renderData.showRenderModal'>\n<div class='content'>\n<div class='sn-component'>\n<div class='panel'>\n<div class='header'>\n<h1 class='title'>Preview</h1>\n<a class='close-button info' ng-click='renderData.showRenderModal = false; $event.stopPropagation();'>Close</a>\n</div>\n<div class='content selectable'>\n<h2>{{renderData.title}}</h2>\n<p class='normal' style='white-space: pre-wrap; font-size: 16px;'>{{renderData.text}}</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("directives/component-modal.html","<div class='background' ng-click='dismiss()'></div>\n<div class='content' ng-attr-id='component-content-outer-{{component.uuid}}'>\n<div class='sn-component'>\n<div class='panel' ng-attr-id='component-content-inner-{{component.uuid}}'>\n<div class='header'>\n<h1 class='title'>\n{{component.name}}\n</h1>\n<a class='close-button info' ng-click='dismiss()'>Close</a>\n</div>\n<component-view class='component-view' component='component'></component-view>\n</div>\n</div>\n</div>\n"),e.put("directives/component-view.html","<div class='sn-component' ng-if='error == &#39;expired&#39;'>\n<div class='panel static'>\n<div class='content'>\n<div class='panel-section stretch'>\n<h2 class='title'>Unable to load Standard Notes Extended</h2>\n<p>Your Extended subscription expired on {{component.dateToLocalizedString(component.valid_until)}}.</p>\n<p>\nPlease visit\n<a href='https://dashboard.standardnotes.org' target='_blank'>dashboard.standardnotes.org</a>\nto renew your subscription.\n</p>\n<div class='panel-row'>\n<div class='panel-column'>\n<p>\n<strong>To reload your account status:</strong>\n</p>\n<p>\n<ol>\n<li>\nOpen the\n<strong>Extensions</strong>\nmenu located in the lower left corner of the app to refresh your account status.\n</li>\n<li>Click Reload below.</li>\n</ol>\n</p>\n</div>\n</div>\n<div class='panel-row'>\n<div class='button info' ng-click='reloadStatus()' ng-if='!reloading'>\n<div class='label'>Reload</div>\n</div>\n<div class='spinner info small' ng-if='reloading'></div>\n</div>\n<div class='panel-row'></div>\n<div class='panel-row'>\n<div class='panel-column'>\n<p><strong>Otherwise</strong>, please follow the steps below to disable any external editors, so you can edit your note using the plain text editor instead.</p>\n<p>\n<ol>\n<li>Click the \"Editor\" menu item above (under the note title).</li>\n<li>Select \"Plain Editor\".</li>\n<li>Repeat this for every note you'd like to access. You can also delete the editor completely to disable it for all notes. To do so, click \"Extensions\" in the lower left corner of the app, then, for every editor, click \"Uninstall\".</li>\n</ol>\n</p>\n<p>\nNeed help? Please email us at\n<a href='mailto:hello@standardnotes.org' target='_blank'>hello@standardnotes.org</a>\nor check out the\n<a href='https://standardnotes.org/help' target='_blank'>Help</a>\npage.\n</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='sn-component' ng-if='error == &#39;offline-restricted&#39;'>\n<div class='panel static'>\n<div class='content'>\n<div class='panel-section stretch'>\n<h2 class='title'>You have restricted this extension to be used offline only.</h2>\n<p>Offline extensions are not available in the Web app.</p>\n<div class='panel-row'>\n<div class='panel-column'>\n<p>You can either:</p>\n<p>\n<ul>\n<li><strong>Enable the Hosted option</strong> for this extension by opening the 'Extensions' menu and toggling 'Use hosted when local is unavailable' under this extension's options. Then press Reload below.</li>\n<li><strong>Use the Desktop application.</strong></li>\n</ul>\n</p>\n</div>\n</div>\n<div class='panel-row'>\n<div class='button info' ng-click='reloadStatus()' ng-if='!reloading'>\n<div class='label'>Reload</div>\n</div>\n<div class='spinner info small' ng-if='reloading'></div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='sn-component' ng-if='error == &#39;url-missing&#39;'>\n<div class='panel static'>\n<div class='content'>\n<div class='panel-section stretch'>\n<h2 class='title'>This extension is not installed correctly.</h2>\n<p>Please uninstall {{component.name}}, then re-install it.</p>\n<p>\nThis issue can occur if you access Standard Notes using an older version of the app.\nEnsure you are running at least version 2.1 on all platforms.\n</p>\n</div>\n</div>\n</div>\n</div>\n<iframe data-component-id='{{component.uuid}}' frameBorder='0' ng-attr-id='component-iframe-{{component.uuid}}' ng-if='component &amp;&amp; componentValid' ng-src='{{getUrl() | trusted}}' sandbox='allow-scripts allow-top-navigation-by-user-activation allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-modals allow-forms'>\nLoading\n</iframe>\n"),e.put("directives/editor-menu.html","<div class='sn-component'>\n<div class='menu-panel dropdown-menu'>\n<div class='section'>\n<div class='header'>\n<h4 class='title'>Note Editor</h4>\n</div>\n<menu-row circle='selectedEditor == null &amp;&amp; &#39;success&#39;' label='&#39;Plain Editor&#39;' ng-click='selectComponent($event, null)'></menu-row>\n<menu-row button-action='toggleDefaultForEditor(editor)' button-class='defaultEditor == editor ? &#39;warning&#39; : &#39;info&#39;' button-text='defaultEditor == editor ? &#39;Undefault&#39; : &#39;Set Default&#39;' circle='selectedEditor === editor &amp;&amp; &#39;success&#39;' has-button='selectedEditor == editor || defaultEditor == editor' label='editor.name' ng-click='selectComponent($event, editor)' ng-repeat='editor in editors'>\n<div class='column' ng-if='component.conflict_of || shouldDisplayRunningLocallyLabel(editor)'>\n<strong class='red medium-text' ng-if='editor.conflict_of'>Conflicted copy</strong>\n<div class='sublabel' ng-if='shouldDisplayRunningLocallyLabel(editor)'>Running Locally</div>\n</div>\n</menu-row>\n<a class='no-decoration' href='https://standardnotes.org/extensions' ng-if='editors.length == 0' target='blank'>\n<menu-row label='&#39;Download More Editors&#39;'></menu-row>\n</a>\n</div>\n<div class='section' ng-if='stack.length &gt; 0'>\n<div class='header'>\n<h4 class='title'>Editor Stack</h4>\n</div>\n<menu-row circle='stackComponentEnabled(component) ? &#39;success&#39; : &#39;danger&#39;' label='component.name' ng-click='selectComponent($event, component)' ng-repeat='component in stack'>\n<div class='column' ng-if='component.conflict_of || shouldDisplayRunningLocallyLabel(component)'>\n<strong class='red medium-text' ng-if='component.conflict_of'>Conflicted copy</strong>\n<div class='sublabel' ng-if='shouldDisplayRunningLocallyLabel(component)'>Running Locally</div>\n</div>\n</menu-row>\n</div>\n</div>\n</div>\n"),e.put("directives/input-modal.html","<div class='modal small auto-height'>\n<div class='content'>\n<div class='sn-component'>\n<div class='panel'>\n<div class='header'>\n<h1 class='title'>{{title}}</h1>\n<a class='close-button' ng-click='dismiss()'>Close</a>\n</div>\n<div class='content'>\n<div class='panel-section'>\n<p class='panel-row'>{{message}}</p>\n<div class='panel-row'>\n<div class='panel-column stretch'>\n<form ng-submit='submit()'>\n<input class='form-control' ng-model='formData.input' placeholder='{{placeholder}}' should-focus='true' sn-autofocus='true' type='{{type}}'>\n</form>\n</div>\n</div>\n</div>\n</div>\n<div class='footer'>\n<a class='right' ng-click='submit()'>\nSubmit\n</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("directives/menu-row.html","<div class='row' ng-attr-title='{{desc}}'>\n<div class='column'>\n<div class='left'>\n<div class='column' ng-if='circle'>\n<div class='circle small' ng-class='circle'></div>\n</div>\n<div class='column' ng-class='{&#39;faded&#39; : faded}'>\n<div class='label'>\n{{label}}\n</div>\n<div class='sublabel' ng-if='subtitle'>\n{{subtitle}}\n</div>\n<ng-transclude></ng-transclude>\n</div>\n</div>\n<div class='subrows' ng-if='subRows &amp;&amp; subRows.length &gt; 0'>\n<menu-row label='row.label' ng-click='row.onClick($event); $event.stopPropagation();' ng-repeat='row in subRows' spinner-class='row.spinnerClass' subtitle='row.subtitle'></menu-row>\n</div>\n</div>\n<div class='column' ng-if='hasButton'>\n<div class='button info' ng-class='buttonClass' ng-click='clickButton($event)'>\n{{buttonText}}\n</div>\n</div>\n<div class='column' ng-if='spinnerClass'>\n<div class='spinner small' ng-class='spinnerClass'></div>\n</div>\n</div>\n"),e.put("directives/panel-resizer.html","<div class='panel-resizer-column'></div>\n"),
e.put("directives/password-wizard.html","<div class='modal small auto-height' id='password-wizard'>\n<div class='content'>\n<div class='sn-component'>\n<div class='panel'>\n<div class='content'>\n<div ng-if='step == 0'>\n<div ng-if='changePassword'>\n<h2 class='title panel-row'>Change your password</h2>\n<p>\nChanging your password involves changing your encryption key, which requires your data to be re-encrypted and synced.\nIf you have many items, syncing your data can take several minutes.\n</p>\n<p class='panel-row'>\n<strong>You must keep the application window open during this process.</strong>\n</p>\n</div>\n<div ng-if='securityUpdate'>\n<h2 class='title panel-row'>Perform security update</h2>\n<p>\nA new update is available for your account. Updates address improvements and enhancements to our security specification.\nThis process will guide you through the update, and perform the steps necessary with your supervision.\n</p>\n<p>\nFor more information about security updates, please visit\n<a href='https://standardnotes.org/help/security' target='_blank'>standardnotes.org/help/security.</a>\n</p>\n</div>\n<div class='panel-row'></div>\n<div class='panel-row'></div>\n</div>\n<div class='panel-section' ng-if='step &gt; 0'>\n<h3 class='title panel-row'>Step {{step}} {{titleForStep(step)}}</h3>\n<div ng-if='step == 1'>\n<p class='panel-row'>\nAs a result of this process, the entirety of your data will be re-encrypted and synced to your account. This is a generally safe process,\nbut unforeseen factors like poor network connectivity or a sudden shutdown of your computer may cause this process to fail.\nIt's best to be on the safe side before large operations such as this one.\n</p>\n<div class='panel-row'></div>\n<div class='panel-row'>\n<div class='button-group'>\n<div class='button info' ng-click='downloadBackup(true)'>\n<div class='label'>Download Encrypted Backup</div>\n</div>\n<div class='button info' ng-click='downloadBackup(false)'>\n<div class='label'>Download Decrypted Backup</div>\n</div>\n</div>\n</div>\n</div>\n<div ng-if='step == 2'>\n<p class='panel-row'>\nAs a result of this process, your encryption keys will change.\nAny device on which you use Standard Notes will need to end its session. After this process completes, you will be asked to sign back in.\n</p>\n<p class='bold panel-row'>Please sign out of all applications (excluding this one), including:</p>\n<ul>\n<li>Desktop</li>\n<li>Web (Chrome, Firefox, Safari)</li>\n<li>Mobile (iOS and Android)</li>\n</ul>\n<p class='panel-row'>\nIf you do not currently have access to a device you're signed in on, you may proceed,\nbut must make signing out and back in the first step upon gaining access to that device.\n</p>\n<p class='panel-row'>Press Continue only when you have completed signing out of all your devices.</p>\n</div>\n<div ng-if='step == 3'>\n<div ng-if='changePassword'></div>\n<div ng-if='securityUpdate'>\n<p class='panel-row'>Enter your current password. We'll run this through our encryption scheme to generate strong new encryption keys.</p>\n</div>\n<div class='panel-row'></div>\n<div class='panel-row'>\n<div class='panel-column stretch'>\n<form>\n<input class='form-control' ng-model='formData.currentPassword' placeholder='Current Password' should-focus='true' sn-autofocus='true' type='password'>\n<input class='form-control' ng-if='changePassword' ng-model='formData.newPassword' placeholder='New Password' type='password'>\n<input class='form-control' ng-if='changePassword' ng-model='formData.newPasswordConfirmation' placeholder='Confirm New Password' type='password'>\n</form>\n</div>\n</div>\n</div>\n<div ng-if='step == 4'>\n<p class='panel-row'>\nYour data is being re-encrypted with your new keys and synced to your account.\n</p>\n<p class='panel-row danger'>\nDo not close this window until this process completes.\n</p>\n<div class='panel-row'>\n<div class='panel-column'>\n<div class='inline bold'>\n{{formData.status}}\n</div>\n</div>\n<div class='panel-column' delay-hide='true' delay='1000' show='syncStatus.syncOpInProgress || syncStatus.needsMoreSync'>\n<p class='info'>\nSyncing {{syncStatus.current}}/{{syncStatus.total}}\n</p>\n</div>\n</div>\n</div>\n<div ng-if='step == 5'>\n<div ng-if='changePassword'>\n<p class='panel-row'>Your password has been successfully changed.</p>\n</div>\n<div ng-if='securityUpdate'>\n<p class='panel-row'>\nThe security update has been successfully applied to your account.\n</p>\n</div>\n<p class='panel-row'>\n<strong>Please ensure you are running the latest version of Standard Notes on all platforms to ensure maximum compatibility.</strong>\n</p>\n<p class='panel-row'>You may now sign back in on all your devices and close this window.</p>\n</div>\n</div>\n</div>\n<div class='footer'>\n<div class='empty'></div>\n<a class='right' ng-class='{&#39;disabled&#39; : lockContinue}' ng-click='continue()'>\n{{continueTitle}}\n</a>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("directives/permissions-modal.html","<div class='background' ng-click='deny()'></div>\n<div class='content' id='permissions-modal'>\n<div class='sn-component'>\n<div class='panel'>\n<div class='header'>\n<h1 class='title'>Activate Extension</h1>\n<a class='close-button info' ng-click='deny()'>Cancel</a>\n</div>\n<div class='content'>\n<div class='panel-section'>\n<div class='panel-row'>\n<h3>\n<strong>{{component.name}}</strong>\nwould like to interact with your\n{{permissionsString()}}\n</h3>\n</div>\n<div class='panel-row'>\n<p>\nExtensions use an offline messaging system to communicate. Learn more at\n<a href='https://standardnotes.org/permissions' target='_blank'>https://standardnotes.org/permissions.</a>\n</p>\n</div>\n</div>\n</div>\n<div class='footer'>\n<div class='button info big block bold' ng-click='accept()'>Continue</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("editor.html","<div aria-label='Note' class='section editor' id='editor-column'>\n<div class='sn-component'>\n<div class='app-bar no-edges' ng-if='ctrl.note.locked' ng-init='ctrl.lockText = &#39;Note Locked&#39;' ng-mouseleave='ctrl.lockText = &#39;Note Locked&#39;' ng-mouseover='ctrl.lockText = &#39;Unlock&#39;'>\n<div class='left'>\n<div class='item' ng-click='ctrl.toggleLockNote()'>\n<div class='label warning'>\n<i class='icon ion-locked'></i>\n{{ctrl.lockText}}\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='sn-component' ng-if='ctrl.note'>\n<div class='app-bar no-edges'>\n<div class='left'>\n<div class='item' ng-click='ctrl.selectedMenuItem($event); ctrl.deleteNote()'>\n<div class='label'>Delete</div>\n</div>\n</div>\n</div>\n</div>\n<div class='editor-content' id='editor-content' ng-if='ctrl.noteReady &amp;&amp; !ctrl.note.errorDecrypting'>\n<component-view class='component-view' component='ctrl.selectedEditor' ng-class='{&#39;locked&#39; : ctrl.note.locked }' ng-if='ctrl.selectedEditor' ng-style='ctrl.note.locked &amp;&amp; {&#39;pointer-events&#39; : &#39;none&#39;}'></component-view>\n<textarea class='editable' dir='auto' id='note-text-editor' ng-attr-spellcheck='{{ctrl.spellcheck}}' ng-change='ctrl.contentChanged()' ng-click='ctrl.clickedTextArea()' ng-disabled='ctrl.note.locked' ng-focus='ctrl.onContentFocus()' ng-if='!ctrl.selectedEditor' ng-model='ctrl.note.text' ng-trim='false'>{{ctrl.onSystemEditorLoad()}}</textarea>\n</div>\n<div class='section' ng-if='ctrl.note.errorDecrypting'>\n<p class='medium-padding' style='padding-top: 0 !important;'>There was an error decrypting this item. Ensure you are running the latest version of this app, then sign out and sign back in to try again.</p>\n</div>\n<div id='editor-pane-component-stack'>\n<div class='sn-component'>\n<component-view class='component-view component-stack-item border-color' component='component' manual-dealloc='true' ng-if='component.active' ng-repeat='component in ctrl.componentStack' ng-show='!component.hidden'></component-view>\n</div>\n</div>\n</div>\n"),e.put("footer.html","<div class='sn-component'>\n<div class='app-bar no-edges' id='footer-bar'>\n<div class='left'>\n<div class='item' click-outside='ctrl.showAccountMenu = false;' is-open='ctrl.showAccountMenu' ng-click='ctrl.accountMenuPressed()'>\n<div class='column'>\n<div class='label title' ng-class='{red: ctrl.error}'>Account</div>\n</div>\n<account-menu close-function='ctrl.closeAccountMenu' ng-click='$event.stopPropagation()' ng-if='ctrl.showAccountMenu' on-successful-auth='ctrl.onAuthSuccess'></account-menu>\n</div>\n</div>\n<div class='right'>\n<div class='item' ng-if='ctrl.securityUpdateAvailable'>\n<span class='success label'>Security update available.</span>\n</div>\n<div class='item' ng-click='ctrl.clickedNewUpdateAnnouncement()' ng-if='ctrl.newUpdateAvailable == true'>\n<span class='info label'>New update available.</span>\n</div>\n<div class='item no-pointer' ng-if='ctrl.lastSyncDate &amp;&amp; !ctrl.isRefreshing'>\n<div class='label subtle'>\n{{ctrl.lastSyncDate | appDateTime}}\n</div>\n</div>\n<div class='item' ng-if='ctrl.lastSyncDate &amp;&amp; ctrl.isRefreshing'>\n<div class='spinner small'></div>\n</div>\n<div class='item' ng-if='ctrl.offline'>\n<div class='label'>Offline</div>\n</div>\n<div class='item' ng-click='ctrl.refreshData()' ng-if='!ctrl.offline'>\n<div class='label'>Refresh</div>\n</div>\n<div class='item' id='lock-item' ng-if='ctrl.hasPasscode()'>\n<div class='label'>\n<i class='icon ion-locked' id='footer-lock-icon' ng-click='ctrl.lockApp()' ng-if='ctrl.hasPasscode()'></i>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("home.html","<div class='main-ui-view' ng-class='platform'>\n<lock-screen ng-if='needsUnlock' on-success='onSuccessfulUnlock'></lock-screen>\n<div class='app' id='app' ng-if='!needsUnlock'>\n<tags-section add-new='tagsAddNew' all-tag='allTag' archive-tag='archiveTag' remove-tag='removeTag' save='tagsSave' selection-made='tagsSelectionMade' tags='tags' will-select='tagsWillMakeSelection'></tags-section>\n<notes-section add-new='notesAddNew' selection-made='notesSelectionMade' tag='selectedTag'></notes-section>\n<editor-section note='selectedNote' remove='deleteNote' save='saveNote' update-tags='updateTagsForNote'></editor-section>\n</div>\n<footer ng-if='!needsUnlock'></footer>\n</div>\n"),e.put("lock-screen.html","<div class='sn-component' id='lock-screen'>\n<div class='panel'>\n<div class='content'>\n<div class='panel-section'>\n<form class='panel-form panel-row' ng-submit='submitPasscodeForm()'>\n<div class='panel-column stretch'>\n<input autocomplete='new-password' autofocus='true' class='panel-row' ng-model='formData.passcode' placeholder='Enter Passcode' should-focus='true' sn-autofocus='true' type='password'>\n<div class='button-group stretch panel-row form-submit'>\n<button class='button info' type='submit'>\n<div class='label'>Unlock</div>\n</button>\n</div>\n</div>\n</form>\n</div>\n</div>\n</div>\n</div>\n"),e.put("notes.html","<div aria-label='Notes' class='section notes' id='notes-column'>\n<div class='content'>\n<div class='section-title-bar' id='notes-title-bar'>\n<div class='padded'>\n<div class='section-title-bar-header'>\n<div class='title'>\nJournal\n</div>\n<div class='add-button' id='notes-add-button' ng-click='ctrl.createNewNote()'>+</div>\n</div>\n<div class='filter-section' role='search'>\n<input class='filter-bar mousetrap' id='search-bar' lowercase='true' ng-blur='ctrl.onFilterEnter()' ng-change='ctrl.filterTextChanged()' ng-keyup='$event.keyCode == 13 &amp;&amp; ctrl.onFilterEnter();' ng-model='ctrl.noteFilter.text' placeholder='Search' select-on-click='true'>\n<div id='search-clear-button' ng-click='ctrl.clearFilterText();' ng-if='ctrl.noteFilter.text'></div>\n</input>\n</div>\n</div>\n<div class='sn-component' id='notes-menu-bar'>\n<div class='app-bar no-edges'>\n<div class='left'>\n<div class='item' ng-class='{&#39;selected&#39; : ctrl.showMenu}' ng-click='ctrl.sortBy == &#39;client_updated_at&#39; ? ctrl.selectedSortByCreated() : ctrl.selectedSortByUpdated()'>\n<div class='column'>\n<div class='label'>\n{{ctrl.optionsSubtitle()}}\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class='scrollable'>\n<div can-load='true' class='infinite-scroll' id='notes-scrollable' infinite-scroll='ctrl.paginate()' threshold='200'>\n<div class='note' ng-class='{&#39;selected&#39; : ctrl.selectedNote == note}' ng-click='ctrl.selectNote(note, true)' ng-repeat='note in (ctrl.sortedNotes = (ctrl.tag.notes | filter: ctrl.filterNotes | sortBy: ctrl.sortBy | limitTo:ctrl.notesToDisplay)) track by note.uuid'>\n<strong class='red medium-text' ng-if='note.conflict_of'>Conflicted Copy</strong>\n<strong class='red medium-text' ng-if='note.errorDecrypting'>Error Decrypting</strong>\n<div class='pinned tinted' ng-class='{&#39;tinted-selected&#39; : ctrl.selectedNote == note}' ng-if='note.pinned'>\n<strong class='medium'>{{note.title}}</strong>\n</div>\n<div class='date faded' ng-if='!ctrl.hideDate&amp;&amp;!note.pinned'>\n<span ng-if='ctrl.sortBy == &#39;client_updated_at&#39;'>{{note.updatedAtString() || 'Now'}}</span>\n<span ng-if='ctrl.sortBy != &#39;client_updated_at&#39;'>{{note.createdAtString() || 'Now'}}</span>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n"),e.put("tags.html","<div aria-label='Tags' class='section tags' id='tags-column'>\n<div class='component-view-container' ng-if='ctrl.component.active'>\n<component-view class='component-view' component='ctrl.component'></component-view>\n</div>\n<div class='content' id='tags-content' ng-if='!(ctrl.component &amp;&amp; ctrl.component.active)'>\n<div class='section-title-bar' id='tags-title-bar'>\n<div class='section-title-bar-header'>\n<div class='title'>Tags</div>\n<div class='add-button' id='tag-add-button' ng-click='ctrl.clickedAddNewTag()' title='Create a new tag'>+</div>\n</div>\n</div>\n<div class='scrollable'>\n<div class='infinite-scroll'>\n<div class='tag' ng-class='{&#39;selected&#39; : ctrl.selectedTag == ctrl.allTag}' ng-click='ctrl.selectTag(ctrl.allTag)' ng-if='ctrl.allTag'>\n<div class='info'>\n<input class='title' ng-disabled='true' ng-model='ctrl.allTag.title'>\n<div class='count'>{{ctrl.noteCount(ctrl.allTag)}}</div>\n</div>\n</div>\n<div class='tag' ng-class='{&#39;selected&#39; : ctrl.selectedTag == tag}' ng-click='ctrl.selectTag(tag)' ng-repeat='tag in ctrl.tags track by tag.uuid'>\n<div class='info'>\n<input class='title' ng-attr-id='tag-{{tag.uuid}}' ng-blur='ctrl.saveTag($event, tag)' ng-change='ctrl.tagTitleDidChange(tag)' ng-click='ctrl.selectTag(tag)' ng-keyup='$event.keyCode == 13 &amp;&amp; $event.target.blur()' ng-model='tag.title' should-focus='ctrl.newTag || ctrl.editingTag == tag' sn-autofocus='true' spellcheck='false'>\n<div class='count'>{{ctrl.noteCount(tag)}}</div>\n</div>\n<div class='red small-text bold' ng-if='tag.conflict_of'>Conflicted copy</div>\n<div class='red small-text bold' ng-if='tag.errorDecrypting'>Error decrypting</div>\n<div class='menu' ng-if='ctrl.selectedTag == tag'>\n<a class='item' ng-click='ctrl.selectedRenameTag($event, tag)' ng-if='!ctrl.editingTag'>Rename</a>\n<a class='item' ng-click='ctrl.saveTag($event, tag)' ng-if='ctrl.editingTag'>Save</a>\n<a class='item' ng-click='ctrl.selectedDeleteTag(tag)'>Delete</a>\n</div>\n</div>\n<div class='tag faded' ng-class='{&#39;selected&#39; : ctrl.selectedTag == ctrl.archiveTag}' ng-click='ctrl.selectTag(ctrl.archiveTag)' ng-if='ctrl.archiveTag'>\n<div class='info'>\n<input class='title' ng-disabled='true' ng-model='ctrl.archiveTag.title'>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);